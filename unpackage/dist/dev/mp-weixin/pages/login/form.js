"use strict";const e=require("../../common/vendor.js"),i=require("../../utils/jsencrypt.js");require("../../utils/request.js");const a=require("../../api/common.js");if(!Array){const u=e.resolveComponent("wd-input"),o=e.resolveComponent("wd-cell-group"),s=e.resolveComponent("wd-button"),t=e.resolveComponent("wd-form");(u+o+s+t)()}const p=()=>"../../uni_modules/wot-design-uni/components/wd-input/wd-input.js",m=()=>"../../uni_modules/wot-design-uni/components/wd-cell-group/wd-cell-group.js",l=()=>"../../uni_modules/wot-design-uni/components/wd-button/wd-button.js",_=()=>"../../uni_modules/wot-design-uni/components/wd-form/wd-form.js";Math||(p+m+l+_)();const w={__name:"form",setup(u){const o=e.reactive({username:"",password:""}),s=e.ref();function t(){s.value.validate().then(async({valid:n,errors:d})=>{if(n){const r=await a.loginApi({username:o.username,password:i.encrypt(o.password)});if(r.code===200){e.index.setStorageSync("token",r.data.token);const c=await a.getInfoApi();e.index.setStorageSync("user",c.data.user),e.index.switchTab({url:"/pages/index/index"})}}}).catch(n=>{e.index.__f__("log","at pages/login/form.vue:42",n,"error")})}return(n,d)=>e.e({},{b:e.o(r=>o.username=r),c:e.p({label:"账号","label-width":"70px",prop:"username",clearable:!0,placeholder:"请输入账号",rules:[{required:!0,message:"请填写账号"}],modelValue:o.username}),d:e.o(r=>o.password=r),e:e.p({label:"密码","label-width":"70px",prop:"password","show-password":!0,placeholder:"请输入密码",rules:[{required:!0,message:"请填写密码"}],modelValue:o.password}),f:e.p({border:!0}),g:e.o(t),h:e.p({type:"primary",block:!0}),i:e.sr(s,"6bec099d-0",{k:"form"}),j:e.p({model:o,errorType:"toast"})})}},g=e._export_sfc(w,[["__scopeId","data-v-6bec099d"]]);wx.createPage(g);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/login/form.js.map
