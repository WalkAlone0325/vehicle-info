"use strict";const e=require("../../../common/vendor.js");require("../../../utils/request.js");const w=require("../../../api/order.js"),p=require("../../../uni_modules/wot-design-uni/components/wd-message-box/index.js");require("../../../uni_modules/wot-design-uni/locale/index.js");if(!Array){const c=e.resolveComponent("wd-message-box"),r=e.resolveComponent("BaseLoading"),a=e.resolveComponent("wd-button"),s=e.resolveComponent("wd-card"),n=e.resolveComponent("wd-loadmore");(c+r+a+s+n)()}const f=()=>"../../../uni_modules/wot-design-uni/components/wd-message-box/wd-message-box.js",C=()=>"../../../components/BaseLoading.js",k=()=>"../../../uni_modules/wot-design-uni/components/wd-button/wd-button.js",b=()=>"../../../uni_modules/wot-design-uni/components/wd-card/wd-card.js",y=()=>"../../../uni_modules/wot-design-uni/components/wd-loadmore/wd-loadmore.js";Math||(f+C+k+b+y)();const O={__name:"list",setup(c){p.useMessage();const r=e.ref(!1),a=e.ref([]),s=e.ref(0),n=e.reactive({pageNum:1,pageSize:10,order:"asc",plateNumber:""}),d=e.ref("loading");e.onReachBottom(()=>{a.value.length?a.value.length===s.value?d.value="finished":a.value.length<s.value&&m():d.value="error"}),e.onShow(()=>{d.value="loading",n.plateNumber="",n.pageNum=1,n.order="asc",a.value=[],s.value=0,_()});function m(){n.pageNum++,_(),d.value="loading"}const _=async()=>{r.value=!0;const t=await w.getOrderApi(n);a.value=[...a.value,...t.rows],s.value=t.total,r.value=!1,a.value.length?a.value.length===s.value&&(d.value="finished"):d.value="error"},v=(t,l)=>{const o=`?id=${t}&type=${l}`;e.index.navigateTo({url:`/pages/order/cars/form${t&&l?o:""}`})},g=(t,l)=>{e.index.navigateTo({url:`/pages/order/cars/formCollect?id=${t}&type=${l}`})};return(t,l)=>e.e({a:r.value&&!a.value.length},r.value&&!a.value.length?{b:e.p({loading:r.value})}:{c:e.f(a.value,(o,N,u)=>e.e({a:o.collectPlateNumber},o.collectPlateNumber?{b:e.t(o.collectPlateNumber)}:{},{c:e.t(o.workOrdeStatusName),d:e.t(o.deptName),e:e.t(o.applicantUserName),f:e.t(o.collectDriverName),g:o.workOrdeStatusCode==="returned"},o.workOrdeStatusCode==="returned"?{h:e.t(o.returnedDriverName)}:{},{i:o.workOrdeStatusCode==="returned"},o.workOrdeStatusCode==="returned"?{j:e.t(o.returnedTime)}:{},{k:o.workOrdeStatusCode==="collect"},o.workOrdeStatusCode==="collect"?{l:"1400ea86-3-"+u+","+("1400ea86-2-"+u),m:e.p({size:"small",type:"success"}),n:e.o(i=>g(o.useCarWorkOrderId,"returned"),o.useCarWorkOrderId)}:{},{o:o.workOrdeStatusCode==="waiting_collect"},o.workOrdeStatusCode==="waiting_collect"?{p:"1400ea86-4-"+u+","+("1400ea86-2-"+u),q:e.p({size:"small",type:"warning"}),r:e.o(i=>g(o.useCarWorkOrderId,"collect"),o.useCarWorkOrderId)}:{},{s:"1400ea86-2-"+u,t:o.useCarWorkOrderId,v:e.o(i=>v(o.useCarWorkOrderId,o.workOrdeStatusCode),o.useCarWorkOrderId)})),d:e.o(m),e:e.p({state:d.value})})}},h=e._export_sfc(O,[["__scopeId","data-v-1400ea86"]]);wx.createPage(h);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/order/cars/list.js.map
