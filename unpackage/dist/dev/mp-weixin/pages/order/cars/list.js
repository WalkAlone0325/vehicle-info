"use strict";const e=require("../../../common/vendor.js");require("../../../utils/request.js");const p=require("../../../api/order.js"),y=require("../../../uni_modules/wot-design-uni/components/wd-message-box/index.js");require("../../../uni_modules/wot-design-uni/locale/index.js");if(!Array){const _=e.resolveComponent("wd-message-box"),d=e.resolveComponent("BaseLoading"),a=e.resolveComponent("wd-search"),n=e.resolveComponent("wd-sticky"),t=e.resolveComponent("wd-button"),r=e.resolveComponent("wd-card"),c=e.resolveComponent("wd-loadmore");(_+d+a+n+t+r+c)()}const f=()=>"../../../uni_modules/wot-design-uni/components/wd-message-box/wd-message-box.js",k=()=>"../../../components/BaseLoading.js",C=()=>"../../../uni_modules/wot-design-uni/components/wd-search/wd-search.js",b=()=>"../../../uni_modules/wot-design-uni/components/wd-sticky/wd-sticky.js",h=()=>"../../../uni_modules/wot-design-uni/components/wd-button/wd-button.js",N=()=>"../../../uni_modules/wot-design-uni/components/wd-card/wd-card.js",O=()=>"../../../uni_modules/wot-design-uni/components/wd-loadmore/wd-loadmore.js";Math||(f+k+C+b+h+N+O)();const S={__name:"list",setup(_){y.useMessage();const d=e.ref(!1),a=e.ref([]),n=e.ref(0),t=e.reactive({pageNum:1,pageSize:10,order:"asc",plateNumber:""}),r=e.ref("loading");e.onReachBottom(()=>{a.value.length?a.value.length<n.value?c():a.value.length===n.value&&(r.value="finished"):r.value="error"}),e.onShow(()=>{r.value="loading",t.plateNumber="",t.pageNum=1,t.order="asc",a.value=[],n.value=0,m()});function c(){t.pageNum++,m(),r.value="loading"}const m=async()=>{d.value=!0;const s=await p.getOrderApi(t);a.value=[...a.value,...s.rows],n.value=s.total,d.value=!1,a.value.length?a.value.length===n.value&&(r.value="finished"):r.value="error"},g=(s,l)=>{const o=`?id=${s}&type=${l}`;e.index.navigateTo({url:`/pages/order/cars/form${s&&l?o:""}`})},i=(s,l)=>{e.index.navigateTo({url:`/pages/order/cars/formCollect?id=${s}&type=${l}`})},v=()=>{t.plateNumber&&(r.value="loading",t.plateNumber="",t.pageNum=1,t.order="asc",a.value=[],n.value=0,m())};return(s,l)=>e.e({a:d.value&&!a.value.length},d.value&&!a.value.length?{b:e.p({loading:d.value})}:{c:e.o(s.search),d:e.o(v),e:e.o(e.m(o=>t.plateNumber=o,{trim:!0},!0)),f:e.p({modelValue:t.plateNumber}),g:e.f(a.value,(o,j,u)=>e.e({a:o.collectPlateNumber},o.collectPlateNumber?{b:e.t(o.collectPlateNumber)}:{},{c:e.t(o.workOrdeStatusName),d:e.t(o.deptName),e:e.t(o.applicantUserName),f:e.t(o.collectDriverName),g:o.workOrdeStatusCode==="returned"},o.workOrdeStatusCode==="returned"?{h:e.t(o.returnedDriverName)}:{},{i:o.workOrdeStatusCode==="returned"},o.workOrdeStatusCode==="returned"?{j:e.t(o.returnedTime)}:{},{k:o.workOrdeStatusCode==="collect"},o.workOrdeStatusCode==="collect"?{l:"1400ea86-5-"+u+","+("1400ea86-4-"+u),m:e.p({size:"small",type:"success"}),n:e.o(w=>i(o.useCarWorkOrderId,"returned"),o.useCarWorkOrderId)}:{},{o:o.workOrdeStatusCode==="waiting_collect"},o.workOrdeStatusCode==="waiting_collect"?{p:"1400ea86-6-"+u+","+("1400ea86-4-"+u),q:e.p({size:"small",type:"warning"}),r:e.o(w=>i(o.useCarWorkOrderId,"collect"),o.useCarWorkOrderId)}:{},{s:"1400ea86-4-"+u,t:o.useCarWorkOrderId,v:e.o(w=>g(o.useCarWorkOrderId,o.workOrdeStatusCode),o.useCarWorkOrderId)})),h:e.o(c),i:e.p({state:r.value})})}},x=e._export_sfc(S,[["__scopeId","data-v-1400ea86"]]);wx.createPage(x);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/order/cars/list.js.map
