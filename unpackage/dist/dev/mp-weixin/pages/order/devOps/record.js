"use strict";const e=require("../../../common/vendor.js");require("../../../utils/request.js");const p=require("../../../api/order.js"),b=require("../../../uni_modules/wot-design-uni/components/wd-message-box/index.js");require("../../../uni_modules/wot-design-uni/locale/index.js");if(!Array){const _=e.resolveComponent("wd-message-box"),i=e.resolveComponent("BaseLoading"),c=e.resolveComponent("wd-search"),a=e.resolveComponent("wd-sticky"),t=e.resolveComponent("wd-text"),o=e.resolveComponent("wd-button"),s=e.resolveComponent("wd-card"),r=e.resolveComponent("wd-loadmore"),d=e.resolveComponent("wd-status-tip"),m=e.resolveComponent("wd-fab");(_+i+c+a+t+o+s+r+d+m)()}const h=()=>"../../../uni_modules/wot-design-uni/components/wd-message-box/wd-message-box.js",x=()=>"../../../components/BaseLoading.js",N=()=>"../../../uni_modules/wot-design-uni/components/wd-search/wd-search.js",j=()=>"../../../uni_modules/wot-design-uni/components/wd-sticky/wd-sticky.js",C=()=>"../../../uni_modules/wot-design-uni/components/wd-text/wd-text.js",k=()=>"../../../uni_modules/wot-design-uni/components/wd-button/wd-button.js",R=()=>"../../../uni_modules/wot-design-uni/components/wd-card/wd-card.js",I=()=>"../../../uni_modules/wot-design-uni/components/wd-loadmore/wd-loadmore.js",q=()=>"../../../uni_modules/wot-design-uni/components/wd-status-tip/wd-status-tip.js",B=()=>"../../../uni_modules/wot-design-uni/components/wd-fab/wd-fab.js";Math||(h+x+N+j+C+k+R+I+q+B)();const D={__name:"record",setup(_){const i=b.useMessage(),c=e.ref(!1),a=e.ref([]),t=e.ref(0),o=e.reactive({pageNum:1,pageSize:10,order:"asc",plateNumber:void 0,offset:0,limit:10}),s=e.ref("loading");e.onReachBottom(()=>{a.value.length===t.value?s.value="finished":a.value.length?a.value.length<t.value&&r():s.value="error"}),e.onShow(()=>{s.value="loading",o.plateNumber=void 0,o.pageNum=1,o.order="asc",a.value=[],t.value=0,d()});function r(){o.pageNum++,d(),s.value="loading"}const d=async()=>{c.value=!0;const u=await p.getRecordList(o);a.value=[...a.value,...u.rows],t.value=u.total,c.value=!1,a.value.length===t.value?s.value="finished":a.value.length||(s.value="error")},m=u=>{e.index.navigateTo({url:`/pages/order/devOps/recordForm${u?`?id=${u}`:""}`})},w=u=>{i.confirm({title:"提示信息",msg:"是否确认删除此项记录信息？"}).then(async()=>{(await p.deleteRecord(u.maintenanceRecordId)).code==200&&(o.pageNum=1,d(),e.index.showToast({title:"删除成功",icon:"success"}),s.value="loading",o.plateNumber=void 0,o.pageNum=1,o.order="asc",a.value=[],t.value=0,d())}).catch(()=>{e.index.__f__("log","at pages/order/devOps/record.vue:92","点击了取消按钮")})},v=()=>{o.plateNumber&&(s.value="loading",o.pageNum=1,o.order="asc",a.value=[],t.value=0,d())},g=()=>{o.plateNumber&&(s.value="loading",o.plateNumber=void 0,o.pageNum=1,o.order="asc",a.value=[],t.value=0,d())};return(u,f)=>e.e({a:c.value&&!a.value.length},c.value&&!a.value.length?{b:e.p({loading:c.value})}:{c:e.o(v),d:e.o(g),e:e.o(e.m(n=>o.plateNumber=n,{trim:!0},!0)),f:e.p({modelValue:o.plateNumber}),g:e.f(a.value,(n,P,l)=>e.e({a:n.plateNumber},n.plateNumber?{b:e.t(n.plateNumber)}:{},{c:e.t(n.maintenanceRecordTypeName),d:e.t(n.maintenanceDate),e:e.t(n.maintenanceValidDate||"无"),f:"5f127210-5-"+l+","+("5f127210-4-"+l),g:e.p({text:n.maintenanceContent,lines:2,color:"#333"}),h:"5f127210-6-"+l+","+("5f127210-4-"+l),i:e.o(y=>w(n),n.maintenanceRecordId),j:"5f127210-4-"+l,k:n.maintenanceRecordId,l:e.o(y=>m(n.maintenanceRecordId),n.maintenanceRecordId)})),h:e.p({size:"small",type:"error"}),i:e.o(r),j:e.p({state:s.value})},{k:!c.value&&t.value==0},!c.value&&t.value==0?{l:e.p({image:"/static/content.png",tip:"暂无列表"})}:{},{m:e.o(m),n:e.p({activeIcon:"add",expandable:!1})})}},L=e._export_sfc(D,[["__scopeId","data-v-5f127210"]]);wx.createPage(L);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/order/devOps/record.js.map
