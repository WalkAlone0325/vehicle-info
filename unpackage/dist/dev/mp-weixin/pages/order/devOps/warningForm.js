"use strict";const e=require("../../../common/vendor.js"),y=require("../../../api/home.js"),d=require("../../../api/order.js"),g=require("../../../api/common.js");if(!Array){const m=e.resolveComponent("wd-select-picker"),c=e.resolveComponent("wd-picker"),s=e.resolveComponent("wd-datetime-picker"),u=e.resolveComponent("wd-input"),r=e.resolveComponent("wd-cell-group"),a=e.resolveComponent("wd-button"),l=e.resolveComponent("wd-form"),i=e.resolveComponent("BaseForm");(m+c+s+u+r+a+l+i)()}const f=()=>"../../../uni_modules/wot-design-uni/components/wd-select-picker/wd-select-picker.js",b=()=>"../../../uni_modules/wot-design-uni/components/wd-picker/wd-picker.js",h=()=>"../../../uni_modules/wot-design-uni/components/wd-datetime-picker/wd-datetime-picker.js",k=()=>"../../../uni_modules/wot-design-uni/components/wd-input/wd-input.js",C=()=>"../../../uni_modules/wot-design-uni/components/wd-cell-group/wd-cell-group.js",F=()=>"../../../uni_modules/wot-design-uni/components/wd-button/wd-button.js",B=()=>"../../../uni_modules/wot-design-uni/components/wd-form/wd-form.js",D=()=>"../../../components/BaseForm.js";Math||(f+b+h+k+C+F+B+D)();const x={__name:"warningForm",setup(m){const c=e.ref([]),s=e.ref({}),u=e.ref(!1),r=e.ref(null),a=e.ref({vehicleId:"",plateNumber:"",maintenanceRecordTypeCode:"",maintenanceDate:"",maintenanceStatusCode:"",remark:"",maintenanceWarningCycleId:""}),l=e.ref({maintenanceRecordTypeCode:[{required:!0,message:"请选择保养类型"}],maintenanceDate:[{required:!0,message:"请选择待保养日期"}],maintenanceStatusCode:[{required:!0,message:"请选择告警状态"}],vehicleId:[{required:!0,message:"请选择车辆车牌"}]}),i=async()=>{const o=await y.getCarListApi({order:"asc"});c.value=o.rows},_=({value:o})=>{const n=c.value.find(t=>t.vehicleId===o);a.value.plateNumber=n.plateNumber},w=async o=>{const n=await d.getWarningDetail(o);a.value=n.data},p=async o=>{const n=await g.getDictApi(o);s.value[o]=n.data},v=()=>{r.value.validate().then(async({valid:o,errors:n})=>{if(o){u.value=!0;let t;a.value.maintenanceWarningId?t=await d.putWarning(a.value):t=await d.postWarning(a.value),t.code==200&&e.index.showToast({title:"提交成功",icon:"success",duration:1e3,success:()=>{setTimeout(()=>{u.value=!1,e.index.navigateBack({delta:1})},1e3)}}),u.value=!1}}).catch(o=>{e.index.__f__("log","at pages/order/devOps/warningForm.vue:85",o,"error")})};return e.onLoad(o=>{o.id&&w(o.id),i(),p("vehicle_maintenance_record_type"),p("sys_notice_status")}),(o,n)=>({a:e.o(_),b:e.o(t=>a.value.vehicleId=t),c:e.p({type:"radio","value-key":"vehicleId","label-key":"plateNumber","label-width":"100px",prop:"vehicleId",label:"车辆车牌",placeholder:"请选择车辆车牌",columns:c.value,filterable:!0,"show-confirm":!1,modelValue:a.value.vehicleId}),d:e.o(t=>a.value.maintenanceRecordTypeCode=t),e:e.p({label:"保养类型",placeholder:"请选择保养类型","value-key":"dictValue","label-key":"dictLabel","label-width":"100px",prop:"maintenanceRecordTypeCode",columns:s.value.vehicle_maintenance_record_type,modelValue:a.value.maintenanceRecordTypeCode}),f:e.o(t=>a.value.maintenanceDate=t),g:e.p({label:"待保养日期",type:"date","label-width":"100px",placeholder:"请选择待保养日期",prop:"maintenanceDate",modelValue:a.value.maintenanceDate}),h:e.o(t=>a.value.maintenanceStatusCode=t),i:e.p({label:"告警状态",placeholder:"请选择告警状态","value-key":"dictValue","label-key":"dictLabel","label-width":"100px",prop:"maintenanceStatusCode",columns:s.value.sys_notice_status,modelValue:a.value.maintenanceStatusCode}),j:e.o(t=>a.value.remark=t),k:e.p({label:"备注","label-width":"100px",prop:"remark",clearable:!0,placeholder:"请输入备注",modelValue:a.value.remark}),l:e.p({border:!0}),m:e.o(v),n:e.p({type:"primary",loading:u.value,block:!0}),o:e.sr(r,"f25dde4d-1,f25dde4d-0",{k:"form"}),p:e.p({model:a.value,rules:l.value,errorType:"toast"})})}},I=e._export_sfc(x,[["__scopeId","data-v-f25dde4d"]]);wx.createPage(I);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/order/devOps/warningForm.js.map
