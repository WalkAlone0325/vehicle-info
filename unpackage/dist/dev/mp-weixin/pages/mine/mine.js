"use strict";const e=require("../../common/vendor.js");require("../../utils/request.js");const m=require("../../api/common.js");if(!Array){const s=e.resolveComponent("wd-img"),o=e.resolveComponent("wd-grid-item"),n=e.resolveComponent("wd-grid"),i=e.resolveComponent("wd-button");(s+o+n+i)()}const g=()=>"../../uni_modules/wot-design-uni/components/wd-img/wd-img.js",_=()=>"../../uni_modules/wot-design-uni/components/wd-grid-item/wd-grid-item.js",l=()=>"../../uni_modules/wot-design-uni/components/wd-grid/wd-grid.js",w=()=>"../../uni_modules/wot-design-uni/components/wd-button/wd-button.js";Math||(g+_+l+w)();const p={__name:"mine",setup(s){const o=e.ref({}),n=e.ref("");e.onShow(()=>{o.value=e.index.getStorageSync("user"),n.value=e.index.getStorageSync("token")});const i=()=>{e.index.navigateTo({url:"/pages/mine/info"})},r=()=>{e.index.navigateTo({url:"/pages/mine/notice"})},c=()=>{if(!o.value.userName){e.index.showToast({title:"请先登录",icon:"none"});return}e.index.navigateTo({url:"/pages/mine/edit-password"})},a=()=>{e.index.navigateTo({url:"/pages/login/login"})},d=()=>{e.index.showModal({title:"提示",content:"确定退出登录吗？",success:async t=>{t.confirm&&(await m.logoutApi()).code===200&&(e.index.showToast({title:"退出登录成功",icon:"success"}),e.index.removeStorageSync("token"),e.index.removeStorageSync("user"),e.index.removeStorageSync("roles"),e.index.reLaunch({url:"/pages/login/login"}))},fail:t=>{e.index.__f__("log","at pages/mine/mine.vue:67",t,"err")}})};return(t,u)=>e.e({a:!o.value.userName},o.value.userName?{c:e.p({width:80,height:80,round:!0,src:o.value.avatar}),d:e.t(o.value.userName),e:e.o(i)}:{b:e.o(a)},{f:e.o(r),g:e.p({icon:"notification",text:"系统通知","is-dot":!0}),h:e.o(c),i:e.p({icon:"lock-on",text:"修改密码"}),j:e.p({border:!0,clickable:!0,"hover-class":" "}),k:n.value},n.value?{l:e.o(d),m:e.p({type:"error",block:!0})}:{})}},v=e._export_sfc(p,[["__scopeId","data-v-7c2ebfa5"]]);wx.createPage(v);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/mine/mine.js.map
