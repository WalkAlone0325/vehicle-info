"use strict";const e=require("../../common/vendor.js");require("../../utils/request.js");const g=require("../../api/common.js"),p=require("../../uni_modules/wot-design-uni/components/wd-message-box/index.js");require("../../uni_modules/wot-design-uni/locale/index.js");const v=require("../../utils/index.js");if(!Array){const m=e.resolveComponent("wd-message-box"),c=e.resolveComponent("BaseLoading"),o=e.resolveComponent("wd-search"),t=e.resolveComponent("wd-sticky"),a=e.resolveComponent("wd-tag"),s=e.resolveComponent("wd-card"),u=e.resolveComponent("wd-loadmore");(m+c+o+t+a+s+u)()}const w=()=>"../../uni_modules/wot-design-uni/components/wd-message-box/wd-message-box.js",y=()=>"../../components/BaseLoading.js",f=()=>"../../uni_modules/wot-design-uni/components/wd-search/wd-search.js",h=()=>"../../uni_modules/wot-design-uni/components/wd-sticky/wd-sticky.js",N=()=>"../../uni_modules/wot-design-uni/components/wd-tag/wd-tag.js",b=()=>"../../uni_modules/wot-design-uni/components/wd-card/wd-card.js",x=()=>"../../uni_modules/wot-design-uni/components/wd-loadmore/wd-loadmore.js";Math||(w+y+f+h+N+b+x)();const j={__name:"notice",setup(m){p.useMessage();const c=e.ref(!1),o=e.ref([]),t=e.ref(0),a=e.reactive({pageNum:1,pageSize:10,order:"asc",plateNumber:""}),s=e.ref("loading");e.onReachBottom(()=>{o.value.length?o.value.length<t.value?u():o.value.length===t.value&&(s.value="finished"):s.value="error"}),e.onShow(()=>{s.value="loading",a.plateNumber="",a.pageNum=1,a.order="asc",o.value=[],t.value=0,r()});function u(){a.pageNum++,r(),s.value="loading"}const r=async()=>{c.value=!0;const d=await g.getNoticeApi(a);o.value=[...o.value,...d.rows],t.value=d.total,c.value=!1,o.value.length?o.value.length===t.value&&(s.value="finished"):s.value="error"},i=()=>{a.plateNumber&&(s.value="loading",a.pageNum=1,a.order="asc",o.value=[],t.value=0,r())},_=()=>{a.plateNumber&&(s.value="loading",a.plateNumber="",a.pageNum=1,a.order="asc",o.value=[],t.value=0,r())};return(d,k)=>e.e({a:c.value&&!o.value.length},c.value&&!o.value.length?{b:e.p({loading:c.value})}:{c:e.o(i),d:e.o(_),e:e.o(e.m(n=>a.plateNumber=n,{trim:!0},!0)),f:e.p({placeholder:"请输入车牌号",modelValue:a.plateNumber}),g:e.f(o.value,(n,q,l)=>e.e({a:n.maintenanceRecordTypeName},n.maintenanceRecordTypeName?{b:e.t(n.maintenanceRecordTypeName+"到期告警")}:{},{c:e.t(n.maintenanceStatusName),d:"d410a70a-5-"+l+","+("d410a70a-4-"+l),e:e.p({"custom-class":"space",type:n.maintenanceStatusName==="正常"?"success":"danger"}),f:e.t(n.deptName),g:e.t(n.plateNumber||"无"),h:e.t(n.maintenanceDate),i:e.t(e.unref(v.getDaysAgo)(n.maintenanceDate)),j:"d410a70a-4-"+l,k:n.maintenanceWarningId})),h:e.o(u),i:e.p({state:s.value})})}},C=e._export_sfc(j,[["__scopeId","data-v-d410a70a"]]);wx.createPage(C);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/mine/notice.js.map
