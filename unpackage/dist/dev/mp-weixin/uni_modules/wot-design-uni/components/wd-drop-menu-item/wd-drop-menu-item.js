"use strict";const o=require("../../../../common/vendor.js"),b=require("../common/clickoutside.js"),j=require("../composables/useQueue.js"),F=require("../composables/useParent.js"),z=require("../wd-drop-menu/types.js"),m=require("../common/util.js"),E=require("./types.js");Math||(k+S)();const S=()=>"../wd-popup/wd-popup.js",k=()=>"../wd-icon/wd-icon.js",B={name:"wd-drop-menu-item",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}},N=o.defineComponent({...B,props:E.dorpMenuItemProps,emits:["change","update:modelValue","open","opened","closed","close"],setup(h,{expose:K,emit:$}){const u=h,l=$,r=o.inject(j.queueKey,null),i=o.ref(!1),t=o.ref(!1),f=o.ref(),v=o.ref(12),D=o.ref(!0),w=o.ref(0),{parent:s}=F.useParent(z.DROP_MENU_KEY),{proxy:p}=o.getCurrentInstance(),q=o.computed(()=>{let e="";return i.value&&s?e=s.props.direction==="down"?`top: calc(var(--window-top) + ${s.offset.value}px); bottom: 0;`:`top: 0; bottom: calc(var(--window-bottom) + ${s.offset.value}px)`:e="",e});o.watch(()=>u.modelValue,e=>{m.isDef(e)&&typeof e!="number"&&typeof e!="string"&&o.index.__f__("error","at uni_modules/wot-design-uni/components/wd-drop-menu-item/wd-drop-menu-item.vue:99","[wot-design] warning(wd-drop-menu-item): the type of value should be a number or a string.")},{deep:!0,immediate:!0}),o.onBeforeMount(()=>{r&&r.pushToQueue?r.pushToQueue(p):b.pushToQueue(p)}),o.onBeforeUnmount(()=>{r&&r.removeFromQueue?r.removeFromQueue(p):b.removeFromQueue(p)});function I(){return t.value}function P(e){if(u.disabled)return;const{valueKey:c}=u,n=u.options[e],a=n[c]!==void 0?n[c]:n;l("update:modelValue",a),l("change",{value:a,selectedItem:n}),d()}function d(){t.value&&(m.isFunction(u.beforeToggle)?u.beforeToggle({status:!1,resolve:e=>{e&&_()}}):_())}function _(){t.value&&(t.value=!1)}function g(){t.value||(m.isFunction(u.beforeToggle)?u.beforeToggle({status:!0,resolve:e=>{e&&y()}}):y())}function y(){i.value=!0,t.value=!0,s&&(D.value=!!s.props.modal,w.value=Number(s.props.duration),f.value=s.props.direction==="down"?"top":"bottom")}function C(){t.value?d():g()}function T(){i.value=!1,l("closed")}function U(){l("open")}function M(){l("opened")}function Q(){l("close")}return K({getShowPop:I,open:g,close:d,toggle:C}),(e,c)=>o.e({a:i.value},i.value?o.e({b:e.options.length},e.options.length?{c:o.f(e.options,(n,a,V)=>o.e({a:o.t(n[e.labelKey]?n[e.labelKey]:n),b:n[e.tipKey]},n[e.tipKey]?{c:o.t(n[e.tipKey])}:{},{d:(n[e.valueKey]!==""?n[e.valueKey]:n)===e.modelValue},(n[e.valueKey]!==""?n[e.valueKey]:n)===e.modelValue?{e:o.n(`wd-drop-item__icon ${e.customIcon}`),f:"d46e2d3a-1-"+V+",d46e2d3a-0",g:o.p({name:e.iconName,size:"20px"})}:{},{h:a,i:o.o(O=>P(a),a),j:o.n(`wd-drop-item__option ${(n[e.valueKey]!==""?n[e.valueKey]:n)===e.modelValue?"is-active":""}`)})),d:o.n(`wd-drop-item__title ${e.customTitle}`)}:{},{e:o.o(U),f:o.o(M),g:o.o(Q),h:o.o(T),i:o.o(n=>t.value=n),j:o.p({"z-index":v.value,duration:w.value,position:f.value,"custom-style":`position: absolute; pointer-events: auto; max-height: 80%;${e.customPopupStyle}`,"custom-class":e.customPopupClass,modal:!1,"close-on-click-modal":!1,modelValue:t.value}),k:o.n(`wd-drop-item  ${e.customClass}`),l:o.s(`pointer-events: none; z-index: ${v.value}; ${q.value};${e.customStyle}`)}):{})}}),L=o._export_sfc(N,[["__scopeId","data-v-d46e2d3a"]]);wx.createComponent(L);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/wot-design-uni/components/wd-drop-menu-item/wd-drop-menu-item.js.map
