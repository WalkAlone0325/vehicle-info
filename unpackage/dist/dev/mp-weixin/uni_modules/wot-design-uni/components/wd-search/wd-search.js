"use strict";const a=require("../../../../common/vendor.js"),t=require("../common/util.js"),L=require("../composables/useTranslate.js"),q=require("./types.js");Math||I();const I=()=>"../wd-icon/wd-icon.js",$={name:"wd-search",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}},D=a.defineComponent({...$,props:q.searchProps,emits:["update:modelValue","change","clear","search","focus","blur","cancel"],setup(f,{emit:v}){const s=f,u=v,{translate:i}=L.useTranslate("search"),n=a.ref(!1),o=a.ref(!1),l=a.ref(""),c=a.ref(!0),r=a.ref(!1);a.watch(()=>s.modelValue,e=>{l.value=e,e&&(o.value=!0)},{immediate:!0}),a.watch(()=>s.focus,e=>{if(e){if(s.disabled)return;h()}}),a.onMounted(()=>{s.focus&&h()});const p=a.computed(()=>`wd-search  ${s.light?"is-light":""}  ${s.hideCancel?"is-without-cancel":""} ${s.customClass}`),m=a.computed(()=>{const e={display:l.value===""&&c.value?"flex":"none"};return t.objToStyle(e)});async function d(e){o.value=e,await t.pause(),n.value=e}async function h(){s.disabled||(await t.pause(100),c.value=!1,d(!0))}function w(e){l.value=e.detail.value,u("update:modelValue",e.detail.value),u("change",{value:e.detail.value})}async function _(){l.value="",r.value=!0,s.focusWhenClear&&(n.value=!1),await t.pause(100),s.focusWhenClear?(c.value=!1,d(!0)):(c.value=!0,d(!1)),u("change",{value:""}),u("update:modelValue",""),u("clear")}function C({detail:{value:e}}){u("search",{value:e})}function y(){if(r.value){r.value=!1;return}c.value=!1,u("focus",{value:l.value})}function g(){r.value||(c.value=!l.value,o.value=!c.value,n.value=!1,u("blur",{value:l.value}))}function b(){u("cancel",{value:l.value})}return(e,V)=>a.e({a:!e.placeholderLeft},e.placeholderLeft?{}:{b:a.p({name:"search","custom-class":"wd-search__search-icon"}),c:a.t(e.placeholder||a.unref(i)("search")),d:a.n(`wd-search__placeholder-txt ${e.placeholderClass}`),e:a.s(m.value),f:a.o(h)},{g:o.value||l.value||e.placeholderLeft},o.value||l.value||e.placeholderLeft?{h:a.p({name:"search","custom-class":"wd-search__search-left-icon"})}:{},{i:o.value||l.value||e.placeholderLeft},o.value||l.value||e.placeholderLeft?{j:e.placeholder||a.unref(i)("search"),k:`wd-search__placeholder-txt ${e.placeholderClass}`,l:e.placeholderStyle,m:a.n(e.customInputClass),n:a.o(y),o:a.o([S=>l.value=S.detail.value,w]),p:a.o(g),q:a.o(C),r:e.disabled,s:e.maxlength,t:n.value,v:l.value}:{},{w:l.value},l.value?{x:a.o(_),y:a.p({"custom-class":"wd-search__clear wd-search__clear-icon",name:"error-fill"})}:{},{z:!e.hideCancel},e.hideCancel?{}:{A:a.t(e.cancelTxt||a.unref(i)("cancel")),B:a.o(b)},{C:a.n(p.value),D:a.s(e.customStyle)})}}),T=a._export_sfc(D,[["__scopeId","data-v-cc0202be"]]);wx.createComponent(T);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/wot-design-uni/components/wd-search/wd-search.js.map
