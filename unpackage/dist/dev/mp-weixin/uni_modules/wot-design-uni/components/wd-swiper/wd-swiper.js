"use strict";const t=require("../../../../common/vendor.js"),a=require("../common/util.js"),D=require("./types.js");Math||A();const A=()=>"../wd-swiper-nav/wd-swiper-nav.js",H={name:"wd-swiper",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}},E=t.defineComponent({...H,props:D.swiperProps,emits:["click","change","animationfinish","update:current"],setup(P,{emit:V}){const i=P,d=V,g=t.ref(i.current),u=t.ref(i.current),f=(e,n=!1)=>{u.value=e,n&&(g.value=e),d("update:current",e)},v=t.ref(!1),{proxy:m}=t.getCurrentInstance(),h=t.ref(a.uuid());t.watch(()=>i.current,e=>{e<0?i.loop?y():w():e>=i.list.length?i.loop?w():y():p(e)});const l=t.computed(()=>{const{list:e,direction:n,indicatorPosition:o,indicator:s}=i,r={current:u.value||0,total:e.length||0,direction:n||"horizontal",indicatorPosition:o||"bottom"};return a.isObj(s)&&(r.type=s.type||"dots",r.minShowNum=s.minShowNum||2,r.showControls=s.showControls||!1),r}),U=(e,n)=>{const o=s=>n==="video"?a.isVideoUrl(s):a.isImageUrl(s);return a.isObj(e)?e.type&&["video","image"].includes(e.type)?e.type===n:o(e[i.valueKey]):o(e)},c=e=>U(e,"video");function p(e){e!==u.value&&f(e,!0)}function w(){p(0)}function y(){p(i.list.length-1)}function j(){i.stopAutoplayWhenVideoPlay&&(v.value=!0)}function C(){v.value=!1}function b(e,n,o){return(e-1+o.length)%o.length===n}function S(e,n,o){return(e+1+o.length)%o.length===n}function I(e,n,o){let s="";return b(e,n,o)&&(s=i.customPrevClass||i.customPrevImageClass),S(e,n,o)&&(s=i.customNextClass||i.customNextImageClass),s}function T(e){const{current:n,source:o}=e.detail,s=u.value;d("change",{current:n,source:o}),n!==u.value&&f(n,o==="autoplay"||o==="touch"),N(s,n)}function N(e,n){k(e),O(n)}function O(e){if(i.autoplayVideo){const n=i.list[e];a.isDef(n)&&c(n)&&t.index.createVideoContext(`video-${e}-${h.value}`,m).play()}}function k(e){if(i.stopPreviousVideo){const n=i.list[e];a.isDef(n)&&c(n)&&t.index.createVideoContext(`video-${e}-${h.value}`,m).pause()}else i.stopAutoplayWhenVideoPlay&&C()}function K(e){const{current:n,source:o}=e.detail;n!==u.value&&f(n,o==="autoplay"||o==="touch"),d("animationfinish",{current:n,source:o})}function $(e,n){d("click",{index:e,item:n})}function M({dir:e}){const{list:n,loop:o}=i,s=n.length;let r=e==="next"?u.value+1:u.value-1;o?r=e==="next"?(u.value+1)%s:(u.value-1+s)%s:r=r<0||r>=s?u.value:r,r!==u.value&&p(r)}return(e,n)=>t.e({a:t.f(e.list,(o,s,r)=>t.e({a:c(o)},c(o)?{b:`video-${s}-${h.value}`,c:t.unref(a.addUnit)(e.height),d:t.unref(a.isObj)(o)?o[e.valueKey]:o,e:t.unref(a.isObj)(o)?o.poster:"",f:t.n(`wd-swiper__video ${e.customItemClass} ${I(u.value,s,e.list)}`),g:t.o(j,s),h:t.o(C,s),i:e.videoLoop,j:e.muted,k:e.autoplayVideo,l:t.o(q=>$(s,o),s)}:{m:t.unref(a.isObj)(o)?o[e.valueKey]:o,n:t.n(`wd-swiper__image ${e.customImageClass} ${e.customItemClass} ${I(u.value,s,e.list)}`),o:t.unref(a.addUnit)(e.height),p:e.imageMode,q:t.o(q=>$(s,o),s)},{r:t.unref(a.isObj)(o)&&o[e.textKey]},t.unref(a.isObj)(o)&&o[e.textKey]?{s:t.t(o[e.textKey]),t:t.n(`wd-swiper__text ${e.customTextClass}`),v:t.s(e.customTextStyle)}:{},{w:s})),b:e.adjustHeight,c:e.adjustVerticalHeight,d:e.autoplay&&!v.value,e:g.value,f:e.interval,g:e.duration,h:e.loop,i:e.direction=="vertical",j:e.easingFunction,k:t.unref(a.addUnit)(e.previousMargin),l:t.unref(a.addUnit)(e.nextMargin),m:e.snapToEdge,n:e.displayMultipleItems,o:t.unref(a.addUnit)(e.height),p:t.o(T),q:t.o(K),r:e.indicator},e.indicator?t.e({s:t.r("indicator",{current:u.value,total:e.list.length}),t:!e.$slots.indicator},e.$slots.indicator?{}:{v:t.o(M),w:t.p({"custom-class":e.customIndicatorClass,type:l.value.type,current:l.value.current,total:l.value.total,direction:l.value.direction,"indicator-position":l.value.indicatorPosition,"min-show-num":l.value.minShowNum,"show-controls":l.value.showControls})}):{},{x:t.n(`wd-swiper ${e.customClass}`),y:t.s(e.customStyle)})}}),W=t._export_sfc(E,[["__scopeId","data-v-f903ae98"]]);wx.createComponent(W);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/wot-design-uni/components/wd-swiper/wd-swiper.js.map
