"use strict";const o=require("../../../../common/vendor.js"),i=require("../common/util.js"),z=require("../composables/useCell.js"),A=require("../wd-form/types.js"),H=require("../composables/useParent.js"),L=require("../composables/useTranslate.js"),G=require("./types.js");Math||Y();const Y=()=>"../wd-icon/wd-icon.js",J={name:"wd-input",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}},N=o.defineComponent({...J,props:G.inputProps,emits:["update:modelValue","clear","blur","focus","input","keyboardheightchange","confirm","clicksuffixicon","clickprefixicon","click"],setup(w,{emit:b}){const s=w,a=b,y=o.useSlots(),{translate:$}=L.useTranslate("input"),p=o.ref(!1),h=o.ref(!1),f=o.ref(!1),t=o.ref(!1),n=o.ref(D()),I=z.useCell();o.watch(()=>s.focus,e=>{f.value=e},{immediate:!0,deep:!0}),o.watch(()=>s.modelValue,e=>{n.value=i.isDef(e)?String(e):""});const{parent:u}=H.useParent(A.FORM_KEY),C=o.computed(()=>i.isDef(s.placeholder)?s.placeholder:$("placeholder")),m=o.computed(()=>{const{disabled:e,readonly:l,clearable:r,clearTrigger:d}=s;return!!(r&&!l&&!e&&n.value&&(d==="always"||s.clearTrigger==="focus"&&t.value))}),c=o.computed(()=>{const{disabled:e,readonly:l,maxlength:r,showWordLimit:d}=s;return!!(!e&&!l&&i.isDef(r)&&r>-1&&d)}),v=o.computed(()=>u&&s.prop&&u.errorMessages&&u.errorMessages[s.prop]?u.errorMessages[s.prop]:""),S=o.computed(()=>{let e=!1;if(u&&u.props.rules){const l=u.props.rules;for(const r in l)Object.prototype.hasOwnProperty.call(l,r)&&r===s.prop&&Array.isArray(l[r])&&(e=l[r].some(d=>d.required))}return s.required||s.rules.some(l=>l.required)||e}),q=o.computed(()=>`wd-input  ${s.label||y.label?"is-cell":""} ${s.center?"is-center":""} ${I.border.value?"is-border":""} ${s.size?"is-"+s.size:""} ${s.error?"is-error":""} ${s.disabled?"is-disabled":""}  ${n.value&&String(n.value).length>0?"is-not-empty":""}  ${s.noBorder?"is-no-border":""} ${s.customClass}`),P=o.computed(()=>`wd-input__label ${s.customLabelClass} ${S.value?"is-required":""}`),k=o.computed(()=>`wd-input__placeholder  ${s.placeholderClass}`),V=o.computed(()=>s.labelWidth?i.objToStyle({"min-width":s.labelWidth,"max-width":s.labelWidth}):"");function D(){const e=W(s.modelValue);return O(e,s.modelValue)||a("update:modelValue",e),e}function W(e){const{maxlength:l}=s;return i.isDef(l)&&l!==-1&&String(e).length>l?e.toString().slice(0,l):e}function E(){p.value=!p.value}async function M(){h.value=!0,t.value=!1,n.value="",s.focusWhenClear&&(f.value=!1),await i.pause(),s.focusWhenClear&&(f.value=!0,t.value=!0),a("update:modelValue",n.value),a("clear")}async function T(){if(await i.pause(150),h.value){h.value=!1;return}t.value=!1,a("blur",{value:n.value})}function U({detail:e}){t.value=!0,a("focus",e)}function j({detail:e}){a("update:modelValue",n.value),a("input",e)}function R({detail:e}){a("keyboardheightchange",e)}function B({detail:e}){a("confirm",e)}function F(){a("clicksuffixicon")}function g(){a("clickprefixicon")}function K(e){a("click",e)}function O(e,l){return i.isEqual(String(e),String(l))}return(e,l)=>o.e({a:e.label||e.$slots.label},e.label||e.$slots.label?o.e({b:e.prefixIcon||e.$slots.prefix},e.prefixIcon||e.$slots.prefix?o.e({c:e.prefixIcon&&!e.$slots.prefix},e.prefixIcon&&!e.$slots.prefix?{d:o.o(g),e:o.p({"custom-class":"wd-input__icon",name:e.prefixIcon})}:{}):{},{f:e.label&&!e.$slots.label},e.label&&!e.$slots.label?{g:o.t(e.label)}:{},{h:o.n(P.value),i:o.s(V.value)}):{},{j:(e.prefixIcon||e.$slots.prefix)&&!e.label},(e.prefixIcon||e.$slots.prefix)&&!e.label?o.e({k:e.prefixIcon&&!e.$slots.prefix},e.prefixIcon&&!e.$slots.prefix?{l:o.o(g),m:o.p({"custom-class":"wd-input__icon",name:e.prefixIcon})}:{}):{},{n:o.n(e.prefixIcon?"wd-input__inner--prefix":""),o:o.n(c.value?"wd-input__inner--count":""),p:o.n(e.alignRight?"is-align-right":""),q:o.n(e.customInputClass),r:e.type,s:e.showPassword&&!p.value,t:C.value,v:e.disabled||e.readonly,w:e.maxlength,x:f.value,y:e.confirmType,z:e.confirmHold,A:e.cursor,B:e.cursorSpacing,C:e.placeholderStyle,D:e.selectionStart,E:e.selectionEnd,F:e.adjustPosition,G:e.holdKeyboard,H:e.alwaysEmbed,I:k.value,J:e.ignoreCompositionEvent,K:e.inputmode,L:o.o([r=>n.value=r.detail.value,j]),M:o.o(U),N:o.o(T),O:o.o(B),P:o.o(R),Q:n.value,R:s.readonly},s.readonly?{}:{},{S:m.value||e.showPassword||e.suffixIcon||c.value||e.$slots.suffix},m.value||e.showPassword||e.suffixIcon||c.value||e.$slots.suffix?o.e({T:m.value},m.value?{U:o.o(M),V:o.p({"custom-class":"wd-input__clear",name:"error-fill"})}:{},{W:e.showPassword},e.showPassword?{X:o.o(E),Y:o.p({"custom-class":"wd-input__icon",name:p.value?"view":"eye-close"})}:{},{Z:c.value},c.value?{aa:o.t(String(n.value).length),ab:o.n(n.value&&String(n.value).length>0?"wd-input__count-current":""),ac:o.n(String(n.value).length>e.maxlength?"is-error":""),ad:o.t(e.maxlength)}:{},{ae:e.suffixIcon&&!e.$slots.suffix},e.suffixIcon&&!e.$slots.suffix?{af:o.o(F),ag:o.p({"custom-class":"wd-input__icon",name:e.suffixIcon})}:{}):{},{ah:v.value},v.value?{ai:o.t(v.value)}:{},{aj:o.n(q.value),ak:o.s(e.customStyle),al:o.o(K)})}}),Q=o._export_sfc(N,[["__scopeId","data-v-4e0c9774"]]);wx.createComponent(Q);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/wot-design-uni/components/wd-input/wd-input.js.map
