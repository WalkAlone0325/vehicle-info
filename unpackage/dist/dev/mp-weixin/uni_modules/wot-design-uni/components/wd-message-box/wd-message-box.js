"use strict";const n=require("../../../../common/vendor.js"),y=require("./types.js"),p=require("./index.js"),s=require("../common/util.js"),P=require("../composables/useTranslate.js");Math||(z+V+v)();const v=()=>"../wd-popup/wd-popup.js",V=()=>"../wd-button/wd-button.js",z=()=>"../wd-input/wd-input.js",E={name:"wd-message-box",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}},T=n.defineComponent({...E,props:y.messageBoxProps,setup(d){const a=d,{translate:u}=P.useTranslate("message-box"),m=n.computed(()=>`wd-message-box__container ${a.customClass}`),f=n.computed(()=>`wd-message-box__body ${e.title?"":"is-no-title"} ${e.type==="prompt"?"is-prompt":""}`),w=p.getMessageDefaultOptionKey(a.selector),_=n.inject(w,n.ref(p.defaultOptions)),e=n.reactive({msg:"",show:!1,title:"",showCancelButton:!1,closeOnClickModal:!0,confirmButtonText:"",cancelButtonText:"",type:"alert",inputType:"text",inputValue:"",inputPlaceholder:"",inputError:"",showErr:!1,zIndex:99,lazyRender:!0}),h=n.computed(()=>{const t=s.deepAssign({block:!0},s.isDef(e.confirmButtonProps)?s.omitBy(e.confirmButtonProps,s.isUndefined):{});return t.customClass=`${t.customClass||""} wd-message-box__actions-btn`,t}),g=n.computed(()=>{const t=s.deepAssign({block:!0,type:"info"},s.isDef(e.cancelButtonProps)?s.omitBy(e.cancelButtonProps,s.isUndefined):{});return t.customClass=`${t.customClass||""} wd-message-box__actions-btn`,t});n.watch(()=>_.value,t=>{B(t)},{deep:!0,immediate:!0}),n.watch(()=>e.show,t=>{C(!!t)},{deep:!0,immediate:!0});function r(t){if(!(t==="modal"&&!e.closeOnClickModal)&&!(e.type==="prompt"&&t==="confirm"&&!x()))switch(t){case"confirm":e.beforeConfirm?e.beforeConfirm({resolve:i=>{i&&l({action:t,value:e.inputValue})}}):l({action:t,value:e.inputValue});break;case"cancel":c({action:t});break;default:c({action:"modal"});break}}function l(t){e.show=!1,s.isFunction(e.success)&&e.success(t)}function c(t){e.show=!1,s.isFunction(e.fail)&&e.fail(t)}function x(){return e.inputPattern&&!e.inputPattern.test(String(e.inputValue))||typeof e.inputValidate=="function"&&!e.inputValidate(e.inputValue)?(e.showErr=!0,!1):(e.showErr=!1,!0)}function C(t){t===!1&&(e.showErr=!1)}function b({value:t}){if(t===""){e.showErr=!1;return}e.inputValue=t}function B(t){t&&(e.title=s.isDef(t.title)?t.title:"",e.showCancelButton=s.isDef(t.showCancelButton)?t.showCancelButton:!1,e.show=t.show,e.closeOnClickModal=t.closeOnClickModal,e.confirmButtonText=t.confirmButtonText,e.cancelButtonText=t.cancelButtonText,e.msg=t.msg,e.type=t.type,e.inputType=t.inputType,e.inputSize=t.inputSize,e.inputValue=t.inputValue,e.inputPlaceholder=t.inputPlaceholder,e.inputPattern=t.inputPattern,e.inputValidate=t.inputValidate,e.success=t.success,e.fail=t.fail,e.beforeConfirm=t.beforeConfirm,e.inputError=t.inputError,e.showErr=t.showErr,e.zIndex=t.zIndex,e.lazyRender=t.lazyRender,e.confirmButtonProps=t.confirmButtonProps,e.cancelButtonProps=t.cancelButtonProps)}return(t,i)=>n.e({a:e.title},e.title?{b:n.t(e.title)}:{},{c:e.type==="prompt"},e.type==="prompt"?n.e({d:n.o(b),e:n.o(o=>e.inputValue=o),f:n.p({type:e.inputType,size:e.inputSize,placeholder:e.inputPlaceholder,modelValue:e.inputValue}),g:e.showErr},e.showErr?{h:n.t(e.inputError||n.unref(u)("inputNoValidate"))}:{}):{},{i:n.t(e.msg),j:n.n(f.value),k:e.showCancelButton},e.showCancelButton?{l:n.t(e.cancelButtonText||n.unref(u)("cancel")),m:n.o(o=>r("cancel")),n:n.p({...g.value})}:{},{o:n.t(e.confirmButtonText||n.unref(u)("confirm")),p:n.o(o=>r("confirm")),q:n.p({...h.value}),r:n.n(`wd-message-box__actions ${e.showCancelButton?"wd-message-box__flex":"wd-message-box__block"}`),s:n.n(m.value),t:n.o(o=>r("modal")),v:n.o(o=>e.show=o),w:n.p({transition:"zoom-in","close-on-click-modal":e.closeOnClickModal,"lazy-render":e.lazyRender,"custom-class":"wd-message-box","z-index":e.zIndex,duration:200,modelValue:e.show})})}}),k=n._export_sfc(T,[["__scopeId","data-v-c8139c88"]]);wx.createComponent(k);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/wot-design-uni/components/wd-message-box/wd-message-box.js.map
