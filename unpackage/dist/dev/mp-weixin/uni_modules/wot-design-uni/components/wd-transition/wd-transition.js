"use strict";const a=require("../../../../common/vendor.js"),s=require("../common/util.js"),j=require("./types.js"),h=require("../common/AbortablePromise.js"),x={name:"wd-transition",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}},z=a.defineComponent({...x,props:j.transitionProps,emits:["click","before-enter","enter","before-leave","leave","after-leave","after-enter"],setup(P,{emit:A}){const C=e=>{let l=`${t.enterClass} ${t.enterActiveClass}`,u=`${t.enterToClass} ${t.enterActiveClass}`,$=`${t.leaveClass} ${t.leaveActiveClass}`,m=`${t.leaveToClass} ${t.leaveActiveClass}`;if(Array.isArray(e))for(let o=0;o<e.length;o++)l=`wd-${e[o]}-enter wd-${e[o]}-enter-active ${l}`,u=`wd-${e[o]}-enter-to wd-${e[o]}-enter-active ${u}`,$=`wd-${e[o]}-leave wd-${e[o]}-leave-active ${$}`,m=`wd-${e[o]}-leave-to wd-${e[o]}-leave-active ${m}`;else e&&(l=`wd-${e}-enter wd-${e}-enter-active ${l}`,u=`wd-${e}-enter-to wd-${e}-enter-active ${u}`,$=`wd-${e}-leave wd-${e}-leave-active ${$}`,m=`wd-${e}-leave-to wd-${e}-leave-active ${m}`);return{enter:l,"enter-to":u,leave:$,"leave-to":m}},t=P,i=A,_=a.ref(!1),c=a.ref(!1),p=a.ref(""),d=a.ref(!1),f=a.ref(300),w=a.ref(""),v=a.ref(null),n=a.ref(null),r=a.ref(null),T=a.computed(()=>`-webkit-transition-duration:${f.value}ms;transition-duration:${f.value}ms;${c.value||!t.destroy?"":"display: none;"}${t.customStyle}`),g=a.computed(()=>`wd-transition ${t.customClass}  ${w.value}`);a.onBeforeMount(()=>{t.show&&y()}),a.watch(()=>t.show,e=>{q(e)},{deep:!0});function k(){i("click")}function q(e){e?(D(),y()):N()}function D(){s.isPromise(v.value)&&v.value.abort(),s.isPromise(n.value)&&n.value.abort(),s.isPromise(r.value)&&r.value.abort(),v.value=null,n.value=null,r.value=null}function y(){v.value=new h.AbortablePromise(async e=>{try{const l=C(t.name),u=s.isObj(t.duration)?t.duration.enter:t.duration;p.value="enter",i("before-enter"),n.value=s.pause(),await n.value,i("enter"),w.value=l.enter,f.value=u,n.value=s.pause(),await n.value,_.value=!0,c.value=!0,n.value=s.pause(),await n.value,n.value=null,d.value=!1,w.value=l["enter-to"],e()}catch{}})}async function N(){if(!v.value)return d.value=!1,b();try{if(await v.value,!c.value)return;const e=C(t.name),l=s.isObj(t.duration)?t.duration.leave:t.duration;p.value="leave",i("before-leave"),f.value=l,r.value=s.pause(),await r.value,i("leave"),w.value=e.leave,r.value=s.pause(),await r.value,d.value=!1,w.value=e["leave-to"],r.value=U(f.value),await r.value,r.value=null,b(),v.value=null}catch{}}function U(e){return new h.AbortablePromise(l=>{const u=setTimeout(()=>{clearTimeout(u),l()},e)})}function b(){d.value||(d.value=!0,p.value==="leave"?i("after-leave"):p.value==="enter"&&i("after-enter"),!t.show&&c.value&&(c.value=!1))}return(e,l)=>a.e({a:!e.lazyRender||_.value},!e.lazyRender||_.value?{b:a.n(g.value),c:a.s(T.value),d:a.o(b),e:a.o(k)}:{})}}),E=a._export_sfc(z,[["__scopeId","data-v-af59a128"]]);wx.createComponent(E);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/wot-design-uni/components/wd-transition/wd-transition.js.map
