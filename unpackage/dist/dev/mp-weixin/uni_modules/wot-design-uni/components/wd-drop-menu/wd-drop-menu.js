"use strict";const e=require("../../../../common/vendor.js"),S=require("../common/clickoutside.js"),I=require("../composables/useQueue.js"),y=require("../common/util.js"),U=require("../composables/useChildren.js"),b=require("./types.js");Array||e.resolveComponent("wd-icon")();const k=()=>"../wd-icon/wd-icon.js";Math||(K+k)();const K=()=>"../wd-overlay/wd-overlay.js",P={name:"wd-drop-menu",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}},T=e.defineComponent({...P,props:{idx:0,...b.dropMenuProps},setup(c){const i=c,l=e.inject(I.queueKey,null),w=e.ref(`dropMenuId${y.uuid()}`),u=e.ref(0),f=e.ref(0),h=e.computed(()=>i.direction==="down"?`top: calc(var(--window-top) + ${u.value}px); bottom: 0;`:`top: 0; bottom: calc(var(--window-bottom) + ${u.value}px)`),{proxy:$}=e.getCurrentInstance(),{linkChildren:C,children:a}=U.useChildren(b.DROP_MENU_KEY),q=e.computed(()=>a.some(o=>o.$.exposed.getShowPop())),m=e.ref(!1);let r;e.watch(q,o=>{r&&clearTimeout(r),o?m.value=!0:r=setTimeout(()=>{m.value=!1,r=null},16)}),C({props:i,fold:g,offset:u}),e.watch(()=>i.direction,o=>{["up","down"].includes(o)||e.index.__f__("error","at uni_modules/wot-design-uni/components/wd-drop-menu/wd-drop-menu.vue:95","[wot design] warning(wd-drop-menu): direction must be 'up' or 'down'")},{deep:!0,immediate:!0}),e.onBeforeMount(()=>{f.value=e.index.getSystemInfoSync().windowHeight});function v(){}function x(o){const{title:s,modelValue:n,options:t,valueKey:p,labelKey:_}=o;if(s)return s;for(let d=0,O=t.length;d<O;d++)if(n===t[d][p])return t[d][_];e.index.__f__("error","at uni_modules/wot-design-uni/components/wd-drop-menu/wd-drop-menu.vue:118","[wot-design] warning(wd-drop-menu-item): no value is matched in the options option.")}function D(o){o&&!o.disabled&&(l&&l.closeOther?l.closeOther(o):S.closeOther(o),g(o))}function g(o){y.getRect(`#${w.value}`,!1,$).then(s=>{if(!s)return;const{top:n,bottom:t}=s;i.direction==="down"?u.value=Number(t):u.value=f.value-Number(n),o.$.exposed.toggle()})}function M(){i.closeOnClickModal&&a.forEach(o=>{o.$.exposed.close()})}return(o,s)=>({a:e.o(M),b:e.o(v),c:e.p({show:m.value,duration:o.duration,"z-index":12,"custom-style":h.value}),d:e.f(e.unref(a),(n,t,p)=>({a:e.t(x(n)),b:e.s(t==c.idx?{fontWeight:600,color:"#597fe8"}:{}),c:"26b08949-1-"+p,d:e.p({name:n.icon,size:n.iconSize,"custom-class":"wd-drop-menu__arrow"}),e:e.o(_=>o.$emit("click",n,t),t),f:t,g:e.o(_=>D(n),t),h:e.n(`wd-drop-menu__item ${n.disabled?"is-disabled":""} ${n.$.exposed.getShowPop()?"is-active":""}`)})),e:e.s(o.customStyle),f:e.n(`wd-drop-menu ${o.customClass}`),g:e.o(v),h:w.value})}}),j=e._export_sfc(T,[["__scopeId","data-v-26b08949"]]);wx.createComponent(j);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/wot-design-uni/components/wd-drop-menu/wd-drop-menu.js.map
