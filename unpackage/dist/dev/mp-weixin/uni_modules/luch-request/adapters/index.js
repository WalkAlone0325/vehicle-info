"use strict";const i=require("../../../common/vendor.js"),h=require("../helpers/buildURL.js"),c=require("../core/buildFullPath.js"),m=require("../core/settle.js"),_=require("../utils.js"),o=(e,r)=>{let u={};return e.forEach(a=>{_.isUndefined(r[a])||(u[a]=r[a])}),u},P=e=>new Promise((r,u)=>{let a=h.buildURL(c.buildFullPath(e.baseURL,e.url),e.params,e.paramsSerializer);const d={url:a,header:e.header,complete:t=>{e.fullPath=a,t.config=e,t.rawData=t.data;try{let l=!1;const n=typeof e.forcedJSONParsing;n==="boolean"?l=e.forcedJSONParsing:n==="object"&&(l=(e.forcedJSONParsing.include||[]).includes(e.method)),l&&typeof t.data=="string"&&(t.data=JSON.parse(t.data))}catch{}m.settle(r,u,t)}};let s;if(e.method==="UPLOAD"){delete d.header["content-type"],delete d.header["Content-Type"];let t={filePath:e.filePath,name:e.name};const l=["timeout","formData"];s=i.index.uploadFile({...d,...t,...o(l,e)})}else if(e.method==="DOWNLOAD"){const t=["timeout","filePath"];s=i.index.downloadFile({...d,...o(t,e)})}else{const t=["data","method","timeout","dataType","responseType","enableHttp2","enableQuic","enableCache","enableHttpDNS","httpDNSServiceId","enableChunked","forceCellularNetwork"];s=i.index.request({...d,...o(t,e)})}e.getTask&&e.getTask(s,e)});exports.adapter=P;
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/uni_modules/luch-request/adapters/index.js.map
