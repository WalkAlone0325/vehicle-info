"use strict";const t=require("../common/vendor.js"),s=require("../uni_modules/luch-request/core/Request.js"),i=require("./index.js"),o=new s.Request({baseURL:"https://gps.sxtdwb.com:4043/oilenginemonitoringservice/"});o.interceptors.request.use(e=>(e.header.Authorization=`Bearer ${i.getToken()}`,e),e=>Promise.reject(e));let n=!1;o.interceptors.response.use(e=>{const r=e.data;return r.code===401&&!n&&(n=!0,t.index.removeStorageSync("token"),t.index.removeStorageSync("user"),t.index.removeStorageSync("roles"),t.index.reLaunch({url:"/pages/login/login"})),r.code!==200&&r.code!=401&&t.index.showToast({title:r.msg,icon:"none"}),r},e=>Promise.reject(e));exports.http=o;
//# sourceMappingURL=../../.sourcemap/mp-weixin/utils/request.js.map
