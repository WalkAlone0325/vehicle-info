"use strict";const s=require("../common/vendor.js"),m=require("../utils/request.js"),p=require("../utils/index.js"),_=require("../uni_modules/wot-design-uni/components/wd-toast/index.js");require("../uni_modules/wot-design-uni/locale/index.js");Array||s.resolveComponent("wd-upload")();const f=()=>"../uni_modules/wot-design-uni/components/wd-upload/wd-upload.js";Math||f();const w={__name:"BaseUpload",props:{fileList:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update:fileList","remove"],setup(i,{emit:r}){const d=_.useToast(),l=r,u=e=>{l("remove",e)},c=(e,t,a)=>{s.index.uploadFile({url:m.http.config.baseURL+"system/local/file/upload",header:{...a.header,Authorization:`Bearer ${p.getToken()}`,"Content-Type":"multipart/form-data"},name:"file",fileName:"file",fileType:"image",formData:t,filePath:e.url,success:async n=>{const o=JSON.parse(n.data);s.index.__f__("log","at components/BaseUpload.vue:45",o),o.code==200?(a.onSuccess(o,e,t),l("update:fileList",[o.data]),d.show("上传成功"),s.index.showToast({title:o.msg||"",icon:"none"})):(a.onError({...o,errMsg:o.msg||""},e,t),d.show("上传失败"),s.index.showToast({title:o.msg||"",icon:"none"}))},fail(n){a.onError(n,e,t)}}).onProgressUpdate(n=>{a.onProgress(n,e)})};return(e,t)=>({a:s.o(u),b:s.p({disabled:i.disabled,"file-list":i.fileList,limit:1,"upload-method":c})})}};wx.createComponent(w);
//# sourceMappingURL=../../.sourcemap/mp-weixin/components/BaseUpload.js.map
