{"version":3,"file":"index.js","sources":["pages/index/index.vue","pages/index/index.vue?type=page"],"sourcesContent":["<script setup lang=\"ts\">\n  import { ref } from 'vue'\n  import { onShow } from '@dcloudio/uni-app'\n  import { getOilTankApi, getCarCountApi, getCarTableApi } from '@/api'\n\n  const swiperList = ref(['/static/swiper1.jpg'])\n\n  const list = ref([])\n  const dataList = ref([])\n  const chartData = ref({})\n  const opts = ref({\n    color: [\"#1890FF\", \"#91CB74\", \"#FAC858\", \"#EE6666\", \"#73C0DE\", \"#3CA272\", \"#FC8452\", \"#9A60B4\", \"#ea7ccc\"],\n    padding: [15, 10, 0, 15],\n    enableScroll: false,\n    pixelRatio: 3,\n    legend: {},\n    xAxis: {\n      disableGrid: true,\n      marginTop: 8,\n      rotateLabel: true,\n      rotateAngle: 45\n    },\n    yAxis: {\n      gridType: \"dash\",\n      dashLength: 2\n    },\n    extra: {\n      line: {\n        type: \"straight\",\n        width: 2,\n        activeType: \"hollow\"\n      }\n    }\n  })\n\n  const getLineData = async () => {\n    const res = await getCarCountApi({})\n    if(res.code == 200) {\n      chartData.value = {\n        ...res.data,\n        categories: res.data.xaxisDataList\n      }\n    }\n  }\n  const getTableData = async () => {\n    const res = await getCarTableApi({})\n    if(res.code == 200) {\n      list.value = res.data\n    }\n  }\n\n  const clickItem = (type) => {\n    uni.navigateTo({\n      url: type === 1 ? '/pages/index/car' : '/pages/index/driver'\n    })\n  }\n\n  // 油机数据统计\n  const getOilTank = async () => {\n    const res = await getOilTankApi({})\n    if(res.code == 200) {\n      dataList.value = [\n        { lab1: '正在发电设备', val1: res.data.jobStatusGeneratingCount, lab2: '总设备', val2: res.data.deviceCount, unit: '台' },\n        { lab1: '空载设备统计', val1: res.data.jobStatusIdleCount, lab2: '总设备', val2: res.data.deviceCount, unit: '台' },\n        { lab1: '在线设备统计', val1: res.data.onoffStatusOnCount, lab2: '总设备', val2: res.data.deviceCount, unit: '台' },\n        { lab1: '离线设备统计', val1: res.data.onoffStatusOffCount, lab2: '总设备', val2: res.data.deviceCount, unit: '台' },\n        { lab1: '发电次数统计', val1: res.data.recordMonthNowCount, lab2: '总次数', val2: res.data.recordCount, unit: '本月' },\n        { lab1: '开机时长统计', val1: res.data.bootTimeMonthNowCount, lab2: '总时长', val2: res.data.bootTimeCount + ' 分钟', unit: '本月' },\n      ]\n    }\n  }\n\n  onShow(() => {\n    getOilTank()\n    getLineData()\n    getTableData()\n  })\n\n  const goMap = () => {\n    uni.navigateTo({\n      url: '/pages/index/map'\n    })\n  }\n</script>\n\n<template>\n  <view class=\"index-page\">\n    <wd-swiper :list=\"swiperList\" autoplay></wd-swiper>\n    <wd-grid clickable hover-class=\" \">\n      <wd-grid-item use-icon-slot use-text-slot text=\"车辆信息\" @itemclick=\"clickItem(1)\">\n        <template #icon>\n          <image class=\"slot-img\" src=\"/static/car.png\" />\n        </template>\n        <template #text>\n          <view class=\"text\">车辆信息</view>\n        </template>\n      </wd-grid-item>\n      <wd-grid-item use-icon-slot use-text-slot text=\"司机信息\" @itemclick=\"clickItem(2)\">\n        <template #icon>\n          <image class=\"slot-img\" src=\"/static/driver.png\" />\n        </template>\n        <template #text>\n          <view class=\"text\">司机信息</view>\n        </template>\n      </wd-grid-item>\n    </wd-grid>\n\n    <!-- <button type=\"primary\" @click=\"goMap\">地图</button> -->\n\n    <BaseTitle title=\"油机数据统计\">\n      <view class=\"oil-con\">\n        <view class=\"oil-item\" v-for=\"i in dataList\" :key=\"i.lab1\">\n          <view style=\"display: flex;align-items: center;justify-content: space-between;\">\n            <view class=\"label\">{{ i.lab1 }}</view>\n            <view class=\"unit\">{{ i.unit }}</view>\n          </view>\n          <view class=\"num\">{{ i.val1 }}</view>\n          <view style=\"display: flex;align-items: center;justify-content: space-between;\">\n            <view class=\"label\">{{i.lab2}}</view>\n            <view class=\"val\">{{ i.val2 }}</view>\n          </view>\n        </view>\n      </view>\n    </BaseTitle>\n\n    <BaseTitle title=\"车辆数据统计\" />\n      <!-- <BaseStatistics /> -->\n      <!-- <view class=\"content\">\n        <view class=\"content-item\" :style=\"{backgroundColor: i.color}\" v-for=\"i in dataList\" :key=\"i.label\">\n          <view style=\"display: flex;align-items: center;\">\n            <view class=\"label\">{{ i.label }}</view>\n          </view>\n          <view class=\"icon\">{{i.val}}</view>\n        </view>\n      </view> -->\n    <view class=\"chart-box\">\n      <qiun-data-charts type=\"line\" :opts=\"opts\" :chartData=\"chartData\" canvas2d canvasId=\"uid123\" />\n    </view>\n\n    <view class=\"table-con\">\n      <wd-table :data=\"list\" :height=\"800\" :rowHeight=\"40\" :stripe=\"false\">\n        <wd-table-col prop=\"cityName\" label=\"归属地市\" width=\"105\" align=\"center\"></wd-table-col>\n        <wd-table-col prop=\"vehicleCount\" label=\"车辆总数\" width=\"90\" align=\"center\"></wd-table-col>\n        <wd-table-col prop=\"registerCount\" label=\"上线车辆\" width=\"90\" align=\"center\"></wd-table-col>\n        <wd-table-col prop=\"logoutCount\" label=\"离线车辆\" width=\"90\" align=\"center\"></wd-table-col>\n      </wd-table>\n    </view>\n  </view>\n</template>\n\n\n<style lang=\"scss\" scoped>\n  .index-page {\n    width: 100%;\n    background: #f7fbfb;\n    min-height: 100vh;\n\n    .slot-img {\n      height: 72rpx;\n      width: 72rpx;\n      margin-left: -10rpx;\n    }\n\n    .text {\n      padding-top: 24rpx;\n      text-align: center;\n      font-size: 13px;\n    }\n\n    .content {\n      // display: flex;\n      // justify-content: space-between;\n      // flex-wrap: wrap;\n      // margin: 8rpx;\n\n      .content-item {\n        box-shadow: 0 0 20rpx #eee;\n        padding: 20rpx 30rpx;\n        background-color: #fff;\n        border-radius: 14rpx;\n        margin-bottom: 30rpx;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        color: #fff;\n\n        .icon {\n          width: 80rpx;\n          height: 80rpx;\n          // background-color: #eee;\n          border-radius: 50%;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          margin-right: 30rpx;\n          font-size: 46rpx;\n          color: #333;\n        }\n\n        .val {\n          font-size: 46rpx;\n          color: #000;\n        }\n\n        .label {\n          font-size: 28rpx;\n          color: #333;\n        }\n      }\n    }\n\n    .oil-con {\n      display: flex;\n      flex-wrap: wrap;\n      justify-content: space-between;\n\n      .oil-item {\n        width: 40%;\n        background-color: #e6f1fe;\n        border-radius: 20rpx;\n        margin-bottom: 24rpx;\n        padding: 20rpx 30rpx;\n        font-size: 28rpx;\n\n        .num {\n          font-size: 42rpx;\n          font-weight: 500;\n          margin: 8rpx 0;\n        }\n\n        .label {\n          color: #666;\n        }\n\n        .val {\n          font-weight: 500;\n        }\n\n        .unit {\n          padding: 6rpx 12rpx;\n          background-color: #3f72af;\n          font-size: 24rpx;\n          color: #fff;\n          border-radius: 10rpx;\n        }\n      }\n    }\n    .charts-box {\n      width: 100%;\n      height: 400rpx;\n    }\n\n    .table-con {\n      padding: 20rpx;\n      margin-left: -8rpx;\n    }\n  }\n</style>\n","import MiniProgramPage from '/Users/jing/Code/mini/vehicle-info/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getCarCountApi","getCarTableApi","uni","getOilTankApi","onShow"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKE,UAAM,aAAaA,cAAAA,IAAI,CAAC,qBAAqB,CAAC;AAExC,UAAA,OAAOA,kBAAI,CAAA,CAAE;AACb,UAAA,WAAWA,kBAAI,CAAA,CAAE;AACjB,UAAA,YAAYA,kBAAI,CAAA,CAAE;AACxB,UAAM,OAAOA,cAAAA,IAAI;AAAA,MACf,OAAO,CAAC,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,SAAS;AAAA,MACzG,SAAS,CAAC,IAAI,IAAI,GAAG,EAAE;AAAA,MACvB,cAAc;AAAA,MACd,YAAY;AAAA,MACZ,QAAQ,CAAC;AAAA,MACT,OAAO;AAAA,QACL,aAAa;AAAA,QACb,WAAW;AAAA,QACX,aAAa;AAAA,QACb,aAAa;AAAA,MACf;AAAA,MACA,OAAO;AAAA,QACL,UAAU;AAAA,QACV,YAAY;AAAA,MACd;AAAA,MACA,OAAO;AAAA,QACL,MAAM;AAAA,UACJ,MAAM;AAAA,UACN,OAAO;AAAA,UACP,YAAY;AAAA,QACd;AAAA,MACF;AAAA,IAAA,CACD;AAED,UAAM,cAAc,YAAY;AAC9B,YAAM,MAAM,MAAMC,wBAAe,CAAA,CAAE;AAChC,UAAA,IAAI,QAAQ,KAAK;AAClB,kBAAU,QAAQ;AAAA,UAChB,GAAG,IAAI;AAAA,UACP,YAAY,IAAI,KAAK;AAAA,QAAA;AAAA,MAEzB;AAAA,IAAA;AAEF,UAAM,eAAe,YAAY;AAC/B,YAAM,MAAM,MAAMC,wBAAe,CAAA,CAAE;AAChC,UAAA,IAAI,QAAQ,KAAK;AAClB,aAAK,QAAQ,IAAI;AAAA,MACnB;AAAA,IAAA;AAGI,UAAA,YAAY,CAAC,SAAS;AAC1BC,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,SAAS,IAAI,qBAAqB;AAAA,MAAA,CACxC;AAAA,IAAA;AAIH,UAAM,aAAa,YAAY;AAC7B,YAAM,MAAM,MAAMC,uBAAc,CAAA,CAAE;AAC/B,UAAA,IAAI,QAAQ,KAAK;AAClB,iBAAS,QAAQ;AAAA,UACf,EAAE,MAAM,UAAU,MAAM,IAAI,KAAK,0BAA0B,MAAM,OAAO,MAAM,IAAI,KAAK,aAAa,MAAM,IAAI;AAAA,UAC9G,EAAE,MAAM,UAAU,MAAM,IAAI,KAAK,oBAAoB,MAAM,OAAO,MAAM,IAAI,KAAK,aAAa,MAAM,IAAI;AAAA,UACxG,EAAE,MAAM,UAAU,MAAM,IAAI,KAAK,oBAAoB,MAAM,OAAO,MAAM,IAAI,KAAK,aAAa,MAAM,IAAI;AAAA,UACxG,EAAE,MAAM,UAAU,MAAM,IAAI,KAAK,qBAAqB,MAAM,OAAO,MAAM,IAAI,KAAK,aAAa,MAAM,IAAI;AAAA,UACzG,EAAE,MAAM,UAAU,MAAM,IAAI,KAAK,qBAAqB,MAAM,OAAO,MAAM,IAAI,KAAK,aAAa,MAAM,KAAK;AAAA,UAC1G,EAAE,MAAM,UAAU,MAAM,IAAI,KAAK,uBAAuB,MAAM,OAAO,MAAM,IAAI,KAAK,gBAAgB,OAAO,MAAM,KAAK;AAAA,QAAA;AAAA,MAE1H;AAAA,IAAA;AAGFC,kBAAAA,OAAO,MAAM;AACA;AACC;AACC;IAAA,CACd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3EH,GAAG,WAAW,eAAe;"}