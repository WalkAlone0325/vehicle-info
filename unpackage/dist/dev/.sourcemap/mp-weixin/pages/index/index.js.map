{"version":3,"file":"index.js","sources":["pages/index/index.vue","pages/index/index.vue?type=page"],"sourcesContent":["<script setup lang=\"ts\">\r\n  import { ref } from 'vue'\r\n  import { onShow } from '@dcloudio/uni-app'\r\n  import { getOilTankApi, getCarCountApi, getCarTableApi } from '@/api'\r\n\r\n  const swiperList = ref(['/static/swiper1.jpg'])\r\n\r\n  const list = ref([])\r\n  const dataList = ref([])\r\n  const chartData = ref({})\r\n  const opts = ref({\r\n    color: [\"#1890FF\", \"#91CB74\", \"#FAC858\", \"#EE6666\", \"#73C0DE\", \"#3CA272\", \"#FC8452\", \"#9A60B4\", \"#ea7ccc\"],\r\n    padding: [15, 10, 0, 15],\r\n    enableScroll: false,\r\n    pixelRatio: 3,\r\n    legend: {},\r\n    xAxis: {\r\n      disableGrid: true,\r\n      marginTop: 8,\r\n      rotateLabel: true,\r\n      rotateAngle: 45\r\n    },\r\n    yAxis: {\r\n      gridType: \"dash\",\r\n      dashLength: 2\r\n    },\r\n    extra: {\r\n      line: {\r\n        type: \"straight\",\r\n        width: 2,\r\n        activeType: \"hollow\"\r\n      }\r\n    }\r\n  })\r\n\r\n  const getLineData = async () => {\r\n    const res = await getCarCountApi({})\r\n    if(res.code == 200) {\r\n      chartData.value = {\r\n        ...res.data,\r\n        categories: res.data.xaxisDataList\r\n      }\r\n    }\r\n  }\r\n  const getTableData = async () => {\r\n    const res = await getCarTableApi({})\r\n    if(res.code == 200) {\r\n      list.value = res.data\r\n    }\r\n  }\r\n\r\n  const clickItem = (type) => {\r\n    uni.navigateTo({\r\n      url: type === 1 ? '/pages/index/car' : '/pages/index/driver'\r\n    })\r\n  }\r\n\r\n  // 油机数据统计\r\n  const getOilTank = async () => {\r\n    const res = await getOilTankApi({})\r\n    if(res.code == 200) {\r\n      dataList.value = [\r\n        { lab1: '正在发电设备', val1: res.data.jobStatusGeneratingCount, lab2: '总设备', val2: res.data.deviceCount, unit: '台' },\r\n        { lab1: '空载设备统计', val1: res.data.jobStatusIdleCount, lab2: '总设备', val2: res.data.deviceCount, unit: '台' },\r\n        { lab1: '在线设备统计', val1: res.data.onoffStatusOnCount, lab2: '总设备', val2: res.data.deviceCount, unit: '台' },\r\n        { lab1: '离线设备统计', val1: res.data.onoffStatusOffCount, lab2: '总设备', val2: res.data.deviceCount, unit: '台' },\r\n        { lab1: '发电次数统计', val1: res.data.recordMonthNowCount, lab2: '总次数', val2: res.data.recordCount, unit: '本月' },\r\n        { lab1: '开机时长统计', val1: res.data.bootTimeMonthNowCount, lab2: '总时长', val2: res.data.bootTimeCount + ' 分钟', unit: '本月' },\r\n      ]\n    }\r\n  }\r\n\r\n  onShow(() => {\r\n    getOilTank()\r\n    getLineData()\r\n    getTableData()\r\n  })\r\n\r\n  const goMap = () => {\r\n    uni.navigateTo({\r\n      url: '/pages/index/map'\r\n    })\r\n  }\r\n</script>\r\n\r\n<template>\r\n  <view class=\"index-page\">\r\n    <wd-swiper :list=\"swiperList\" autoplay></wd-swiper>\r\n    <wd-grid clickable hover-class=\" \">\r\n      <wd-grid-item use-icon-slot use-text-slot text=\"车辆信息\" @itemclick=\"clickItem(1)\">\r\n        <template #icon>\r\n          <image class=\"slot-img\" src=\"/static/car.png\" />\r\n        </template>\r\n        <template #text>\r\n          <view class=\"text\">车辆信息</view>\r\n        </template>\r\n      </wd-grid-item>\r\n      <wd-grid-item use-icon-slot use-text-slot text=\"司机信息\" @itemclick=\"clickItem(2)\">\r\n        <template #icon>\r\n          <image class=\"slot-img\" src=\"/static/driver.png\" />\r\n        </template>\r\n        <template #text>\r\n          <view class=\"text\">司机信息</view>\r\n        </template>\r\n      </wd-grid-item>\r\n    </wd-grid>\r\n\r\n    <!-- <button type=\"primary\" @click=\"goMap\">地图</button> -->\r\n\r\n    <BaseTitle title=\"油机数据统计\">\r\n      <view class=\"oil-con\">\r\n        <view class=\"oil-item\" v-for=\"i in dataList\" :key=\"i.lab1\">\r\n          <view style=\"display: flex;align-items: center;justify-content: space-between;\">\r\n            <view class=\"label\">{{ i.lab1 }}</view>\r\n            <view class=\"unit\">{{ i.unit }}</view>\r\n          </view>\r\n          <view class=\"num\">{{ i.val1 }}</view>\r\n          <view style=\"display: flex;align-items: center;justify-content: space-between;\">\r\n            <view class=\"label\">{{i.lab2}}</view>\r\n            <view class=\"val\">{{ i.val2 }}</view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </BaseTitle>\r\n\r\n    <BaseTitle title=\"车辆数据统计\" />\r\n      <!-- <BaseStatistics /> -->\r\n      <!-- <view class=\"content\">\r\n        <view class=\"content-item\" :style=\"{backgroundColor: i.color}\" v-for=\"i in dataList\" :key=\"i.label\">\r\n          <view style=\"display: flex;align-items: center;\">\r\n            <view class=\"label\">{{ i.label }}</view>\r\n          </view>\r\n          <view class=\"icon\">{{i.val}}</view>\r\n        </view>\r\n      </view> -->\r\n    <view class=\"chart-box\">\r\n      <qiun-data-charts type=\"line\" :opts=\"opts\" :chartData=\"chartData\" canvas2d canvasId=\"uid123\" />\r\n    </view>\r\n\r\n    <view class=\"table-con\">\r\n      <wd-table :data=\"list\" :height=\"800\" :rowHeight=\"40\" :stripe=\"false\">\r\n        <wd-table-col prop=\"cityName\" label=\"归属地市\" width=\"105\" align=\"center\"></wd-table-col>\r\n        <wd-table-col prop=\"vehicleCount\" label=\"车辆总数\" width=\"90\" align=\"center\"></wd-table-col>\r\n        <wd-table-col prop=\"registerCount\" label=\"上线车辆\" width=\"90\" align=\"center\"></wd-table-col>\r\n        <wd-table-col prop=\"logoutCount\" label=\"离线车辆\" width=\"90\" align=\"center\"></wd-table-col>\r\n      </wd-table>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n  .index-page {\r\n    width: 100%;\r\n    background: #f7fbfb;\r\n    min-height: 100vh;\r\n\r\n    .slot-img {\r\n      height: 72rpx;\r\n      width: 72rpx;\r\n      margin-left: -10rpx;\r\n    }\r\n\r\n    .text {\r\n      padding-top: 24rpx;\r\n      text-align: center;\r\n      font-size: 13px;\r\n    }\r\n\r\n    .content {\r\n      // display: flex;\r\n      // justify-content: space-between;\r\n      // flex-wrap: wrap;\r\n      // margin: 8rpx;\r\n\r\n      .content-item {\r\n        box-shadow: 0 0 20rpx #eee;\r\n        padding: 20rpx 30rpx;\r\n        background-color: #fff;\r\n        border-radius: 14rpx;\r\n        margin-bottom: 30rpx;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n        color: #fff;\r\n\r\n        .icon {\r\n          width: 80rpx;\r\n          height: 80rpx;\r\n          // background-color: #eee;\r\n          border-radius: 50%;\r\n          display: flex;\r\n          justify-content: center;\r\n          align-items: center;\r\n          margin-right: 30rpx;\r\n          font-size: 46rpx;\r\n          color: #333;\r\n        }\r\n\r\n        .val {\r\n          font-size: 46rpx;\r\n          color: #000;\r\n        }\r\n\r\n        .label {\r\n          font-size: 28rpx;\r\n          color: #333;\r\n        }\r\n      }\r\n    }\r\n\r\n    .oil-con {\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n      justify-content: space-between;\r\n\r\n      .oil-item {\r\n        width: 40%;\r\n        background-color: #e6f1fe;\r\n        border-radius: 20rpx;\r\n        margin-bottom: 24rpx;\r\n        padding: 20rpx 30rpx;\r\n        font-size: 28rpx;\r\n\r\n        .num {\r\n          font-size: 42rpx;\r\n          font-weight: 500;\r\n          margin: 8rpx 0;\r\n        }\r\n\r\n        .label {\r\n          color: #666;\r\n        }\r\n\r\n        .val {\r\n          font-weight: 500;\r\n        }\r\n\r\n        .unit {\r\n          padding: 6rpx 12rpx;\r\n          background-color: #3f72af;\r\n          font-size: 24rpx;\r\n          color: #fff;\r\n          border-radius: 10rpx;\r\n        }\r\n      }\r\n    }\r\n    .charts-box {\r\n      width: 100%;\r\n      height: 400rpx;\r\n    }\r\n\r\n    .table-con {\r\n      padding: 20rpx;\r\n      margin-left: -8rpx;\r\n    }\r\n  }\r\n</style>\r\n","import MiniProgramPage from '/Users/jing/Code/mini/vehicle-info/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getCarCountApi","getCarTableApi","uni","getOilTankApi","onShow"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKE,UAAM,aAAaA,cAAAA,IAAI,CAAC,qBAAqB,CAAC;AAExC,UAAA,OAAOA,kBAAI,CAAA,CAAE;AACb,UAAA,WAAWA,kBAAI,CAAA,CAAE;AACjB,UAAA,YAAYA,kBAAI,CAAA,CAAE;AACxB,UAAM,OAAOA,cAAAA,IAAI;AAAA,MACf,OAAO,CAAC,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,SAAS;AAAA,MACzG,SAAS,CAAC,IAAI,IAAI,GAAG,EAAE;AAAA,MACvB,cAAc;AAAA,MACd,YAAY;AAAA,MACZ,QAAQ,CAAC;AAAA,MACT,OAAO;AAAA,QACL,aAAa;AAAA,QACb,WAAW;AAAA,QACX,aAAa;AAAA,QACb,aAAa;AAAA,MACf;AAAA,MACA,OAAO;AAAA,QACL,UAAU;AAAA,QACV,YAAY;AAAA,MACd;AAAA,MACA,OAAO;AAAA,QACL,MAAM;AAAA,UACJ,MAAM;AAAA,UACN,OAAO;AAAA,UACP,YAAY;AAAA,QACd;AAAA,MACF;AAAA,IAAA,CACD;AAED,UAAM,cAAc,YAAY;AAC9B,YAAM,MAAM,MAAMC,wBAAe,CAAA,CAAE;AAChC,UAAA,IAAI,QAAQ,KAAK;AAClB,kBAAU,QAAQ;AAAA,UAChB,GAAG,IAAI;AAAA,UACP,YAAY,IAAI,KAAK;AAAA,QAAA;AAAA,MAEzB;AAAA,IAAA;AAEF,UAAM,eAAe,YAAY;AAC/B,YAAM,MAAM,MAAMC,wBAAe,CAAA,CAAE;AAChC,UAAA,IAAI,QAAQ,KAAK;AAClB,aAAK,QAAQ,IAAI;AAAA,MACnB;AAAA,IAAA;AAGI,UAAA,YAAY,CAAC,SAAS;AAC1BC,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,SAAS,IAAI,qBAAqB;AAAA,MAAA,CACxC;AAAA,IAAA;AAIH,UAAM,aAAa,YAAY;AAC7B,YAAM,MAAM,MAAMC,uBAAc,CAAA,CAAE;AAC/B,UAAA,IAAI,QAAQ,KAAK;AAClB,iBAAS,QAAQ;AAAA,UACf,EAAE,MAAM,UAAU,MAAM,IAAI,KAAK,0BAA0B,MAAM,OAAO,MAAM,IAAI,KAAK,aAAa,MAAM,IAAI;AAAA,UAC9G,EAAE,MAAM,UAAU,MAAM,IAAI,KAAK,oBAAoB,MAAM,OAAO,MAAM,IAAI,KAAK,aAAa,MAAM,IAAI;AAAA,UACxG,EAAE,MAAM,UAAU,MAAM,IAAI,KAAK,oBAAoB,MAAM,OAAO,MAAM,IAAI,KAAK,aAAa,MAAM,IAAI;AAAA,UACxG,EAAE,MAAM,UAAU,MAAM,IAAI,KAAK,qBAAqB,MAAM,OAAO,MAAM,IAAI,KAAK,aAAa,MAAM,IAAI;AAAA,UACzG,EAAE,MAAM,UAAU,MAAM,IAAI,KAAK,qBAAqB,MAAM,OAAO,MAAM,IAAI,KAAK,aAAa,MAAM,KAAK;AAAA,UAC1G,EAAE,MAAM,UAAU,MAAM,IAAI,KAAK,uBAAuB,MAAM,OAAO,MAAM,IAAI,KAAK,gBAAgB,OAAO,MAAM,KAAK;AAAA,QAAA;AAAA,MAE1H;AAAA,IAAA;AAGFC,kBAAAA,OAAO,MAAM;AACA;AACC;AACC;IAAA,CACd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3EH,GAAG,WAAW,eAAe;"}