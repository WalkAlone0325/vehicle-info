{"version":3,"file":"car.js","sources":["pages/index/car.vue","pages/index/car.vue?type=page"],"sourcesContent":["<script setup>\r\n  import {\r\n    onLoad,\r\n    onReachBottom\r\n  } from '@dcloudio/uni-app'\r\n  import {\r\n    reactive,\r\n    ref\r\n  } from 'vue'\r\n  import {\r\n    getCarListApi\r\n  } from '@/api'\r\n\r\n  const val = ref('')\r\n  const list = ref([])\r\n  const total = ref(0)\r\n  const queryParams = reactive({\r\n    pageNum: 1,\r\n    pageSize: 10,\r\n    order: 'asc',\n    val: ''\r\n  })\r\n\r\n  const state = ref('loading')\r\n\r\n  onReachBottom(() => {\r\n    // if (!list.value.length) {\r\n    //   state.value = 'error'\r\n    // } else \n    if (list.value.length < total.value) {\r\n      loadmore()\r\n    } else if (list.value.length === total.value) {\r\n      state.value = 'finished'\r\n    }\r\n  })\r\n\r\n  onLoad(() => {\r\n    getData()\r\n  })\r\n\r\n  function loadmore() {\r\n      queryParams.pageNum ++\n      state.value = 'loading'\r\n      getData()\r\n  }\r\n\r\n  const getData = async () => {\r\n    const res = await getCarListApi(queryParams)\r\n    list.value = [...list.value, ...res.rows]\r\n    total.value = res.total\r\n  }\n  const search = ({value}) => {\n    queryParams.val = value\n    queryParams.pageNum = 1\n    getData()\n  }\r\n  const clear = () => {\r\n    val.value = ''\n    queryParams.pageNum = 1\r\n    getData()\r\n  }\r\n  const cancel = () => {\r\n    val.value = ''\r\n  }\r\n</script>\r\n\r\n<template>\r\n  <view class=\"driver-page\">\r\n    <wd-sticky>\r\n      <view style=\"width: 100vw;\">\r\n        <wd-search placeholder-left v-model=\"queryParams.val\" @search=\"search\" @clear=\"clear\" @cancel=\"cancel\" :maxlength=\"10\" />\r\n      </view>\r\n    </wd-sticky>\n    <view class=\"flex-cc\" v-if=\"!list.length\">\n      <wd-loading type=\"outline\" />\n    </view>\r\n    <view class=\"container\" v-else>\r\n      <view v-for=\"i in list\" :key=\"i.driverId\">\r\n        <wd-card>\r\n          <template #title>\r\n            <view style=\"display: flex; text-align: right;\">\r\n              <view class=\"flex-col-c\">\r\n                <view class=\"name\">{{ i.plateNumber }}</view>\r\n                <view class=\"sex\">\r\n                  <wd-tag type=\"primary\" v-if=\"i.brandModel\">{{i.brandModel}}</wd-tag>\r\n                </view>\r\n              </view>\r\n              <view class=\"right\">\r\n                <wd-tag type=\"success\" mark v-if=\"i.vehicleStatusName\">{{i.vehicleStatusName}}</wd-tag>\r\n              </view>\r\n            </view>\r\n          </template>\r\n          <view class=\"content\">\r\n            <view style=\"display: flex; justify-content: space-between;\">\r\n              <!-- <view class=\"content-item\">\r\n                <view class=\"label\">准驾车型：</view>\r\n                <view class=\"value\">A1</view>\r\n              </view> -->\r\n             <view class=\"content-item\" v-if=\"i.driverName\">\r\n                <view class=\"label\">车辆司机：</view>\r\n                <view class=\"value\">{{i.driverName}}</view>\r\n              </view>\r\n            </view>\r\n            <view class=\"content-item\">\r\n              <view class=\"label\">部门名称：</view>\r\n              <view class=\"value\">{{i.deptName}} {{`(${i.cityName}${i.countyName})`}}</view>\r\n            </view>\n            <view class=\"content-item\">\n              <view class=\"label\">车辆用途：</view>\n              <view class=\"value\">{{i.vehicleApplicationNames}}</view>\n            </view>\n            <view class=\"content-item\">\n              <view class=\"label\">初次上线时间：</view>\n              <view class=\"value\">{{i.terminalFirstOnlineTime}}</view>\n            </view>\n            <view class=\"content-item pd\">\n              <view class=\"label\">最近离线时间：</view>\n              <view class=\"value\">{{i.terminalRecentOfflineTime}}</view>\n            </view>\r\n          </view>\r\n        </wd-card>\r\n\r\n      </view>\r\n      <wd-loadmore :state=\"state\" @reload=\"loadmore\" />\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .driver-page {\r\n    ::v-deep .wd-card__title-content {\r\n      padding: 20rpx 0;\r\n    }\r\n\r\n    .container {\r\n      .name {\r\n        color: #597fe8;\r\n      }\r\n\r\n      .sex {\r\n        margin-left: 12rpx;\r\n      }\r\n\r\n      .content {\r\n        .content-item {\r\n          display: flex;\n          margin-bottom: 6rpx;\r\n\r\n          .value {\r\n            color: #333;\r\n          }\r\n        }\r\n      }\r\n\r\n      .pd {\r\n        padding-bottom: 12rpx;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  image {\r\n    display: block;\r\n    width: 120px;\r\n    height: 78px;\r\n    margin-right: 15px;\r\n  }\r\n\r\n  .right {\r\n    -webkit-box-flex: 1;\r\n    -ms-flex: 1;\r\n    flex: 1;\r\n  }\r\n</style>","import MiniProgramPage from '/Users/jing/Code/mini/vehicle-info/pages/index/car.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","reactive","onReachBottom","onLoad","getCarListApi"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAaE,UAAM,MAAMA,cAAG,IAAC,EAAE;AAClB,UAAM,OAAOA,cAAG,IAAC,EAAE;AACnB,UAAM,QAAQA,cAAG,IAAC,CAAC;AACnB,UAAM,cAAcC,cAAAA,SAAS;AAAA,MAC3B,SAAS;AAAA,MACT,UAAU;AAAA,MACV,OAAO;AAAA,MACP,KAAK;AAAA,IACT,CAAG;AAED,UAAM,QAAQD,cAAG,IAAC,SAAS;AAE3BE,kBAAAA,cAAc,MAAM;AAIlB,UAAI,KAAK,MAAM,SAAS,MAAM,OAAO;AACnC,iBAAU;AAAA,MACX,WAAU,KAAK,MAAM,WAAW,MAAM,OAAO;AAC5C,cAAM,QAAQ;AAAA,MACf;AAAA,IACL,CAAG;AAEDC,kBAAAA,OAAO,MAAM;AACX,cAAS;AAAA,IACb,CAAG;AAED,aAAS,WAAW;AAChB,kBAAY;AACZ,YAAM,QAAQ;AACd,cAAS;AAAA,IACZ;AAED,UAAM,UAAU,YAAY;AAC1B,YAAM,MAAM,MAAMC,SAAa,cAAC,WAAW;AAC3C,WAAK,QAAQ,CAAC,GAAG,KAAK,OAAO,GAAG,IAAI,IAAI;AACxC,YAAM,QAAQ,IAAI;AAAA,IACnB;AACD,UAAM,SAAS,CAAC,EAAC,MAAK,MAAM;AAC1B,kBAAY,MAAM;AAClB,kBAAY,UAAU;AACtB,cAAS;AAAA,IACV;AACD,UAAM,QAAQ,MAAM;AAClB,UAAI,QAAQ;AACZ,kBAAY,UAAU;AACtB,cAAS;AAAA,IACV;AACD,UAAM,SAAS,MAAM;AACnB,UAAI,QAAQ;AAAA,IACb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9DH,GAAG,WAAW,eAAe;"}