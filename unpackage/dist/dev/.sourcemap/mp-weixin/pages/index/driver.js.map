{"version":3,"file":"driver.js","sources":["pages/index/driver.vue","pages/index/driver.vue?type=page"],"sourcesContent":["<script setup>\n  import {\n    onLoad,\n    onReachBottom\n  } from '@dcloudio/uni-app'\n  import {\n    reactive,\n    ref\n  } from 'vue'\n  import {\n    getDriverListApi\n  } from '@/api'\n\n  const val = ref('')\n  const list = ref([])\n  const total = ref(0)\n  const queryParams = reactive({\n    pageNum: 1,\n    pageSize: 10,\n    order: 'asc',\n    val: ''\n  })\n\n  const state = ref('loading')\n\n  onReachBottom(() => {\n    if (!list.value.length) {\n      state.value = 'error'\n    } else if (list.value.length < total.value) {\n      loadmore()\n    } else if (list.value.length === total.value) {\n      state.value = 'finished'\n    }\n  })\n\n  onLoad(() => {\n    getData()\n  })\n\n  function loadmore() {\n      queryParams.pageNum ++\n      getData()\n      state.value = 'loading'\n  }\n\n  const getData = async () => {\n    const res = await getDriverListApi(queryParams)\n    list.value = [...list.value, ...res.rows]\n    total.value = res.total\n  }\n  const search = ({value}) => {\n    queryParams.val = value\n    queryParams.pageNum = 1\n    getData()\n  }\n  const clear = () => {\n    val.value = ''\n    queryParams.pageNum = 1\n    getData()\n  }\n  const cancel = () => {\n    val.value = ''\n  }\n</script>\n\n<template>\n  <view class=\"driver-page\">\n    <wd-sticky>\n      <view style=\"width: 100vw;\">\n        <wd-search placeholder-left v-model=\"queryParams.val\" @search=\"search\" @clear=\"clear\" @cancel=\"cancel\" :maxlength=\"10\" />\n      </view>\n    </wd-sticky>\n    <view class=\"flex-cc\" v-if=\"!list.length\">\n      <wd-loading type=\"outline\" />\n    </view>\n    <view class=\"container\" v-else>\n      <view v-for=\"i in list\" :key=\"i.driverId\">\n        <wd-card>\n          <template #title>\n            <view style=\"display: flex; text-align: right;\">\n              <view class=\"flex-col-c\">\n                <view class=\"name\">{{ i.driverName }}</view>\n                <view class=\"sex\">\n                  <wd-tag type=\"primary\" v-if=\"i.driverSexName\">{{i.driverSexName}}</wd-tag>\n                </view>\n              </view>\n              <view class=\"right\">\n                <!-- <wd-tag type=\"success\" mark>在岗</wd-tag> -->\n              </view>\n            </view>\n          </template>\n          <view class=\"content\">\n            <view style=\"display: flex; justify-content: space-between;\">\n              <!-- <view class=\"content-item\">\n                <view class=\"label\">准驾车型：</view>\n                <view class=\"value\">A1</view>\n              </view> -->\n              <view class=\"content-item\">\n                <view class=\"label\">手机号码：</view>\n                <view class=\"value\">{{i.mobile}}</view>\n              </view>\n            </view>\n            <view class=\"content-item pd\">\n              <view class=\"label\">单位：</view>\n              <view class=\"value\">{{i.deptName}}</view>\n            </view>\n          </view>\n        </wd-card>\n\n      </view>\n      <wd-loadmore :state=\"state\" @reload=\"loadmore\" />\n    </view>\n  </view>\n</template>\n\n<style lang=\"scss\" scoped>\n  .driver-page {\n    ::v-deep .wd-card__title-content {\n      padding: 20rpx 0;\n    }\n\n    .container {\n      .name {\n        color: #597fe8;\n      }\n\n      .sex {\n        margin-left: 12rpx;\n      }\n\n      .content {\n        .content-item {\n          display: flex;\n\n          .value {\n            color: #333;\n          }\n        }\n      }\n\n      .pd {\n        padding: 12rpx 0;\n      }\n    }\n  }\n\n\n  image {\n    display: block;\n    width: 120px;\n    height: 78px;\n    margin-right: 15px;\n  }\n\n  .right {\n    -webkit-box-flex: 1;\n    -ms-flex: 1;\n    flex: 1;\n  }\n</style>","import MiniProgramPage from '/Users/jing/Code/mini/vehicle-info/pages/index/driver.vue'\nwx.createPage(MiniProgramPage)"],"names":["val","ref","list","total","queryParams","reactive","state","onReachBottom","loadmore","onLoad","getData","res","getDriverListApi","search","value","clear","cancel","MiniProgramPage"],"mappings":"+1BAaE,MAAMA,EAAMC,EAAG,IAAC,EAAE,EACZC,EAAOD,EAAG,IAAC,EAAE,EACbE,EAAQF,EAAG,IAAC,CAAC,EACbG,EAAcC,EAAAA,SAAS,CAC3B,QAAS,EACT,SAAU,GACV,MAAO,MACP,IAAK,EACT,CAAG,EAEKC,EAAQL,EAAG,IAAC,SAAS,EAE3BM,EAAAA,cAAc,IAAM,CACbL,EAAK,MAAM,OAELA,EAAK,MAAM,OAASC,EAAM,MACnCK,EAAU,EACDN,EAAK,MAAM,SAAWC,EAAM,QACrCG,EAAM,MAAQ,YAJdA,EAAM,MAAQ,OAMpB,CAAG,EAEDG,EAAAA,OAAO,IAAM,CACXC,EAAS,CACb,CAAG,EAED,SAASF,GAAW,CAChBJ,EAAY,UACZM,EAAS,EACTJ,EAAM,MAAQ,SACjB,CAED,MAAMI,EAAU,SAAY,CAC1B,MAAMC,EAAM,MAAMC,EAAgB,iBAACR,CAAW,EAC9CF,EAAK,MAAQ,CAAC,GAAGA,EAAK,MAAO,GAAGS,EAAI,IAAI,EACxCR,EAAM,MAAQQ,EAAI,KACnB,EACKE,EAAS,CAAC,CAAC,MAAAC,CAAK,IAAM,CAC1BV,EAAY,IAAMU,EAClBV,EAAY,QAAU,EACtBM,EAAS,CACV,EACKK,EAAQ,IAAM,CAClBf,EAAI,MAAQ,GACZI,EAAY,QAAU,EACtBM,EAAS,CACV,EACKM,EAAS,IAAM,CACnBhB,EAAI,MAAQ,EACb,wgBC7DH,GAAG,WAAWiB,CAAe"}