{"version":3,"file":"form.js","sources":["pages/login/form.vue","pages/login/form.vue?type=page"],"sourcesContent":["<script setup>\nimport { reactive, ref } from 'vue'\nimport { encrypt } from '@/utils/jsencrypt'\nimport { loginApi, getInfoApi } from '@/api'\n\nconst model = reactive({\n  username: '',\n  password: ''\n})\n\nconst form = ref()\n\nfunction handleSubmit() {\n  form.value\n    .validate()\n    .then(async ({\n      valid,\n      errors\n    }) => {\n      if (valid) {\n        const res = await loginApi(\n          {\n            username: model.username,\n            password: encrypt(model.password)\n          }\n          // { \"username\": \"admin\", \"password\": \"PFZ37mn1+EB/3KV6P1zZt1usC0Ngckv2PZVkGEHf5YN+qSP+n4cXl00iCK1Q/zC1YAKAu4PFwTq0U4DVaq7FnCkHgdNJPFT1vOtOtcDWJgIKTcX1ga7bXSpRteJzdTMu/4EzFPfHrKyUw4KbqqwB/SospZsZquz7MQq9WuLTOO8=\" }\n          // {\"username\":\"wangyuan\",\"password\":\"XaBloRSRNcxUCfG+Ffd9ryJmXTrXhSMNZxJ2GAQeyGCR6m1obpxZgZvdMNb/CpS4Oe2WVabJ0vOiCCUrykuawMRz7jWbtxoyhWQANshcNQCnhRnYgAGrbfx2n4iBYUC4rakVv/LVib+i12T4cp7EESQv0MWmA634qsIY8FNqH5A=\"}\n          // {\"username\":\"tyjl01\",\"password\":\"S65lxxcvyk7QrOvrdccrEKLiWUKI+pRJGLu1wvOQWcZyL5+BulcXothDLxKQwKHHLUp9WN6bKFRgFkgCQPXN1ANOTS+tlQ5xqKExzWaDugwQplbWzAvlEqOxGe71bjtJ9NYzIOWJ2jkgUzySbP+dzAkkfO8aYSinGWqfmH1+0Io=\"}\n          // {\"username\":\"tydz01\",\"password\":\"gLY100N2xa3mQno4LispsyEzFYtGW2DPHxQWNZpznsIVJ/oKyqXKzydxzzPvPR5Tln0fLu5yZTTSNhsxLuW5iBne/Va/vCb5aR0Wi2593plssbPP3KtzaJXvcdIOsAkZsIh9d+HZU0KQT/mKl3f3TMMVWPxX+ProCZOAGLXr3tA=\"}\n        )\n        if (res.code === 200) {\n          uni.setStorageSync('token', res.data.token)\n          const info = await getInfoApi()\n          uni.setStorageSync('user', info.data.user)\n          uni.switchTab({\n            url: '/pages/index/index'\n          })\n        }\n      }\n    })\n    .catch((error) => {\n      console.log(error, 'error')\n    })\n}\n</script>\n\n<template>\n  <view class=\"login-page\">\n    <view class=\"one-login\" v-if=\"false\">\n      <view class=\"one-login-btn\" @click=\"handleSubmit\">微信授权一键登录</view>\n    </view>\n\n    <view class=\"login-con\" v-if=\"true\">\n      <wd-form ref=\"form\" :model=\"model\" errorType=\"toast\">\n        <view class=\"title\">自动绘图数据采集上报系统</view>\n        <wd-cell-group border>\n          <wd-input label=\"账号\" label-width=\"70px\" prop=\"username\" clearable v-model=\"model.username\" placeholder=\"请输入账号\"\n            :rules=\"[{ required: true, message: '请填写账号' }]\" />\n          <wd-input label=\"密码\" label-width=\"70px\" prop=\"password\" show-password v-model=\"model.password\"\n            placeholder=\"请输入密码\" :rules=\"[{ required: true, message: '请填写密码' }]\" />\n        </wd-cell-group>\n        <view class=\"footer\">\n          <wd-button type=\"primary\" @click=\"handleSubmit\" block>登录</wd-button>\n        </view>\n      </wd-form>\n    </view>\n  </view>\n</template>\n\n<style lang=\"scss\" scoped>\n.login-page {\n  width: 100%;\n  height: 100vh;\n  max-height: 100vh;\n  overflow-y: hidden;\n  // background: linear-gradient(135deg, #3498db, #2c3e50);\n\n  .one-login {\n    width: 100%;\n    height: 100vh;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin-top: -14vh;\n\n    .one-login-btn {\n      width: 440rpx;\n      line-height: 72rpx;\n      color: #fff;\n      font-size: 28rpx;\n      background-color: #597fe8;\n      text-align: center;\n    }\n  }\n\n  .login-con {\n    height: 460rpx;\n    padding: 0 20rpx;\n    background-color: #fff;\n    border-radius: 20rpx;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    // align-items: center;\n    margin: 30rpx;\n    margin-top: 20vh;\n\n    .title {\n      padding-bottom: 40rpx;\n      text-align: center;\n    }\n  }\n\n  .footer {\n    padding: 24rpx;\n  }\n}\n</style>\n","import MiniProgramPage from '/Users/jing/Code/mini/vehicle-info/pages/login/form.vue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","ref","loginApi","encrypt","uni","getInfoApi"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAKA,UAAM,QAAQA,cAAAA,SAAS;AAAA,MACrB,UAAU;AAAA,MACV,UAAU;AAAA,IACZ,CAAC;AAED,UAAM,OAAOC,cAAAA,IAAK;AAElB,aAAS,eAAe;AACtB,WAAK,MACF,SAAU,EACV,KAAK,OAAO;AAAA,QACX;AAAA,QACA;AAAA,MACN,MAAU;AACJ,YAAI,OAAO;AACT,gBAAM,MAAM,MAAMC,WAAQ;AAAA,YACxB;AAAA,cACE,UAAU,MAAM;AAAA,cAChB,UAAUC,gBAAAA,QAAQ,MAAM,QAAQ;AAAA,YACjC;AAAA;AAAA;AAAA;AAAA;AAAA,UAKF;AACD,cAAI,IAAI,SAAS,KAAK;AACpBC,0BAAAA,MAAI,eAAe,SAAS,IAAI,KAAK,KAAK;AAC1C,kBAAM,OAAO,MAAMC,sBAAY;AAC/BD,0BAAAA,MAAI,eAAe,QAAQ,KAAK,KAAK,IAAI;AACzCA,0BAAAA,MAAI,UAAU;AAAA,cACZ,KAAK;AAAA,YACjB,CAAW;AAAA,UACF;AAAA,QACF;AAAA,MACP,CAAK,EACA,MAAM,CAAC,UAAU;AAChBA,sBAAAA,MAAY,MAAA,OAAA,8BAAA,OAAO,OAAO;AAAA,MAChC,CAAK;AAAA,IACL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1CA,GAAG,WAAW,eAAe;"}