{"version":3,"file":"form.js","sources":["pages/order/form.vue","pages/order/form.vue?type=page"],"sourcesContent":["<script setup>\r\nimport { computed, onMounted, ref, watchEffect } from 'vue'\r\nimport { onLoad } from '@dcloudio/uni-app'\r\nimport { formatDate } from '@/utils'\r\nimport { getCarListApi, getDriverListApi, putOrderDraftApi, postOrderApplyApi, postApprove, getOrderDetailApi } from '@/api'\r\nimport { getApplyInfoApi, getPostApi, getDictApi, getRegionApi, getCarApi, getDriverApi } from '@/api'\r\nimport { findChildrenByCode } from '@/hooks/useColPickerData'\r\n\r\n// const { findChildrenByCode } = useColPickerData()\r\n\r\nconst curType = ref('')\r\nconst defaultValueDate = ref(Date.now())\r\nconst curId = ref('')\r\nconst form = ref(null)\r\nconst approveForm = ref(null)\r\nconst model = ref({\r\n  applicantNickName: '', // 申请人\r\n  applicantUserId: '', // 申请人账号\r\n  applicantUserName: '',\r\n  applicantDeptId: '', // 申请人公司\r\n  applicantDeptName: '',\r\n  applicantCompanyDeptId: '', // 申请人部门\r\n  applicantCompanyDeptName: '',\r\n  applicantPostId: '', // 申请人岗位\r\n  applicantStartRegionCode: '', // 开始地点\r\n  name1: '',\r\n  name2: '',\r\n  code1: [],\r\n  code2: [],\r\n  applicantEndRegionCode: '', // 目标地点\r\n  applicantIsIntermarketCityCode: '', // 是否跨市\r\n  applicantPassengersNumber: '', // 乘车人数\r\n  planStartTime: '', // 计划开始时间\r\n  planEndTime: '', // 计划结束时间\r\n  applicantContent: '', // 申请内容\r\n})\r\nconst rules = ref({\r\n  applicantContent: [{ required: true, message: '请输入申请内容', }],\r\n  planStartTime: [{ required: true, message: '请选择用车开始时间' }],\r\n  planEndTime: [{ required: true, message: '请选择用车结束时间' }],\r\n  applicantPassengersNumber: [{ required: true, message: '请输入乘车人数' }],\r\n  applicantStartRegionCode: [{ required: true, message: '请选择开始地点' }],\r\n  applicantEndRegionCode: [{ required: true, message: '请选择目标地点' }],\r\n  applicantIsIntermarketCityCode: [{ required: true, message: '请选择是否跨市' }],\r\n})\r\n\r\n// 审批\r\nconst approveModel = ref({\r\n  approvalCause: undefined,\r\n  approvalResultCode: undefined,\r\n  approveDriverId: undefined,\r\n  approveDriverName: undefined,\r\n  approvePlateNumber: undefined,\r\n  approveDriverMobile: undefined,\r\n  approveVehicleId: undefined,\r\n  useCarApplicationOrderId: undefined\r\n})\r\n\r\nconst approveRules = ref({\r\n  approvalCause: [{ required: true, message: '请输入审批原因' }],\r\n  // approveDriverId: [{ required: true, message: '请选择审批司机' }],\r\n  // approveVehicleId: [{ required: true, message: '请选择审批车辆' }],\r\n})\r\n\r\n// 数据\r\nconst typeOptions = ref([])\r\nconst carOptions = ref([])\r\nconst driverOptions = ref([])\r\n\r\n// 存为草稿\r\nconst handleDraft = () => {\r\n  form.value.validate().then(async ({ valid, errors }) => {\r\n    if (valid) {\r\n      const res = await postOrderApplyApi({\r\n        ...model.value,\r\n        planStartTime: formatDate(model.value.planStartTime),\r\n        planEndTime: formatDate(model.value.planEndTime),\r\n        orderStatusCode: 'draft'\r\n      })\r\n      if (res.code === 200) {\r\n        uni.showToast({ title: '草稿保存成功', icon: 'success' })\r\n        setTimeout(() => {\r\n          uni.navigateBack()\r\n        }, 1000)\r\n      }\r\n    }\r\n  })\r\n    .catch((error) => {\r\n      console.log(error, 'error')\r\n    })\r\n}\r\nconst handlePublish = () => {\r\n  form.value.validate().then(async ({ valid, errors }) => {\r\n    if (valid) {\r\n      if (model.value.useCarApplicationOrderId) {\r\n        const res = await putOrderDraftApi({\r\n          ...model.value,\r\n          planStartTime: formatDate(model.value.planStartTime),\r\n          planEndTime: formatDate(model.value.planEndTime),\r\n          orderStatusCode: 'pending'\r\n        })\r\n        if (res.code === 200) {\r\n          uni.showToast({ title: '提交成功', icon: 'success' })\r\n          setTimeout(() => {\r\n            uni.navigateBack()\r\n          }, 1000)\r\n        }\r\n      } else {\r\n        const res = await postOrderApplyApi({\r\n          ...model.value,\r\n          planStartTime: formatDate(model.value.planStartTime),\r\n          planEndTime: formatDate(model.value.planEndTime),\r\n          orderStatusCode: 'pending'\r\n        })\r\n        if (res.code === 200) {\r\n          uni.showToast({ title: '提交成功', icon: 'success' })\r\n          setTimeout(() => {\r\n            uni.navigateBack()\r\n          }, 1000)\r\n        }\r\n      }\r\n    }\r\n  })\r\n    .catch((error) => {\r\n      console.log(error, 'error')\r\n    })\r\n}\r\n\r\n// 可编辑\r\nconst canEdit = computed(() => !(curType.value !== 'history' && curType.value !== 'approve'))\r\n\r\n// 申请人信息\r\nconst getInfo = async () => {\r\n  const res = await getApplyInfoApi()\r\n  model.value.applicantNickName = res.data.nickName\r\n  model.value.applicantUserId = res.data.userId\r\n  model.value.applicantDeptId = res.data.deptId\r\n  model.value.applicantCompanyDeptId = res.data.companyDeptId\r\n  model.value.applicantPostId = res.data.postId\r\n  model.value.applicantUserName = res.data.username\r\n  model.value.applicantDeptName = res.data.deptName\r\n  model.value.applicantCompanyDeptName = res.data.companyDeptName\r\n}\r\n\r\nconst vehicleTypeOptions = ref([])\r\nconst ynOptions = ref([])\r\nconst getDict = async (key, option) => {\r\n  const res = await getDictApi(key)\r\n  option.value = res.data\r\n}\r\n\r\n// 地点\r\nconst area = ref([[]])\r\nconst area2 = ref([[]])\r\nconst areaOptions = ref([])\r\nconst getRegion = async (payload) => {\r\n  const res = await getRegionApi(payload)\r\n  area.value[0] = res.data\r\n  area2.value[0] = res.data\r\n  areaOptions.value = res.data\r\n}\r\nconst columnChange = async ({ selectedItem, index, resolve, finish }) => {\r\n  if(index < 2) {\r\n    const res = await getRegionApi({ code: selectedItem.code })\r\n    const areaData = findChildrenByCode(area.value[index], selectedItem.code, res.data)\r\n    if(index == 0) {\r\n      area.value = [areaOptions.value]\r\n    }\r\n    if (areaData && areaData.length) {\r\n      area.value[index + 1] = areaData\r\n      resolve(areaData)\r\n    } else {\r\n      // 没有下一项时，执行完成\r\n      finish()\r\n    }\r\n  } else {\r\n    finish()\r\n  }\r\n}\r\n\r\nconst columnChange2 = async ({ selectedItem, index, resolve, finish }) => {\r\n  if(index < 2) {\r\n    const res = await getRegionApi({ code: selectedItem.code })\r\n    const areaData = findChildrenByCode(area2.value[index], selectedItem.code, res.data)\r\n    if(index == 0) {\r\n      area2.value = [areaOptions.value]\r\n    }\r\n    if (areaData && areaData.length) {\r\n      area2.value[index + 1] = areaData\r\n      resolve(areaData)\r\n    } else {\r\n      // 没有下一项时，执行完成\r\n      finish()\r\n    }\r\n  } else {\r\n    finish()\r\n  }\r\n}\r\n\r\nconst handleConfirm = ({ value, selectedItems }) => {\r\n  model.value.code1 = value\r\n  model.value.applicantStartRegionCode = value[2]\r\n  // model.value.applicantStartRegionName = selectedItems.map(item => item.name).join('')\r\n}\r\nconst handleConfirm2 = ({ value, selectedItems }) => {\r\n  model.value.code2 = value\r\n  model.value.applicantEndRegionCode = value[2]\r\n  // model.value.applicantEndRegionName = selectedItems.map(item => item.name).join('')\r\n}\r\n\r\nwatchEffect(() => {\r\n  if (!model.value.applicantStartRegionCode || !model.value.applicantEndRegionCode) {\r\n    model.value.applicantIsIntermarketCityCode = ''\r\n    return\r\n  }\r\n  const v1 = model.value.applicantStartRegionCode?.substring(0, 4)\r\n  const v2 = model.value.applicantEndRegionCode?.substring(0, 4)\r\n  model.value.applicantIsIntermarketCityCode = v1 === v2 ? 'N' : 'Y'\r\n})\r\n\r\n// 岗位\r\nconst postOptions = ref([])\r\nconst getPost = async () => {\r\n  const res = await getPostApi()\r\n  postOptions.value = res.data\r\n  if (res.data.length) {\r\n    model.value.applicantPostId = res.data[0].postId\r\n  }\r\n}\r\n\r\n// 获取详情\r\nconst getOrderDetail = async (id) => {\r\n  const res = await getOrderDetailApi(id)\r\n  model.value = {\r\n    ...res.data,\r\n    code1: [res.data.applicantStartProvinceCode, res.data.applicantStartCityCode, res.data.applicantStartCountyCode],\r\n    code2: [res.data.applicantEndProvinceCode, res.data.applicantEndCityCode, res.data.applicantEndCountyCode],\r\n  }\r\n  approveModel.value = {\r\n    ...approveModel.value,\r\n    approveDriverId: model.value.approveDriverId,\r\n    approveVehicleId: model.value.approveVehicleId,\r\n    approveDriverMobile: model.value.approveDriverMobile,\r\n    approvalCause: model.value.approvalCause,\r\n  }\r\n  handleConfirm({ value: model.value.code1 })\r\n  handleConfirm2({ value: model.value.code2 })\r\n}\r\n\r\n// 时间\r\nconst openDatePicker = (type) => {\r\n  defaultValueDate.value = model.value[type === 1 ? 'planStartTime' : 'planEndTime'] || Date.now()\r\n}\r\n\r\nonMounted(() => {\r\n  getInfo()\r\n  getPost()\r\n  // getDict('vehicle_type', vehicleTypeOptions)\r\n  getDict('sys_yes_no', ynOptions)\r\n\r\n})\r\n\r\n// 加载\r\nonLoad(async (param) => {\r\n  console.log(param)\r\n  curType.value = param.type\r\n  curId.value = param.id\r\n  await getRegion()\r\n  if (curId.value) {\r\n    await getOrderDetail(curId.value)\r\n    if(curType.value === 'approve' || curType.value === 'history') {\r\n      await getCar()\r\n      await getDriver()\r\n    }\r\n  }\r\n})\r\n\r\n\r\n// 审批\r\nconst handleApproveDriverChange = ({ value }) => {\r\n  const driver = driverOptions.value.find(item => item.driverId === value)\r\n  approveModel.value.approveDriverName = driver.driverName\r\n}\r\nconst handleApproveCarChange = ({ value }) => {\r\n  const car = carOptions.value.find(item => item.vehicleId === value)\r\n  approveModel.value.approvePlateNumber = car.plateNumber\r\n  approveModel.value.approveDriverName = car.driverName\r\n  approveModel.value.approveDriverId = car.driverId\r\n}\r\n\r\nconst handleApprove = (status) => {\r\n  approveForm.value.validate().then(async ({ valid, errors }) => {\r\n    if (valid) {\r\n      if(model.value.taskName === '车辆管理员') {\r\n        if(!approveModel.value.approveVehicleId) {\r\n          uni.showToast({ title: '请选择车辆', icon: 'none' })\r\n          return\r\n        }\r\n        if(!approveModel.value.approveDriverId) {\r\n          uni.showToast({ title: '请选择司机', icon: 'none' })\r\n          return\r\n        }\r\n        console.log(approveModel.value.approveDriverMobile)\r\n        if(!approveModel.value.approveDriverMobile) {\r\n          uni.showToast({ title: '请输入司机手机号', icon: 'none' })\r\n          return\r\n        }\r\n      }\r\n      const res = await postApprove({\r\n        ...approveModel.value,\r\n        approvalResultCode: status,\r\n        taskId: model.value.taskId,\r\n        taskName: model.value.taskName,\r\n        useCarApplicationOrderId: model.value.useCarApplicationOrderId\r\n      })\r\n      if (res.code === 200) {\r\n        uni.showToast({ title: '审批成功', icon: 'success' })\r\n        setTimeout(() => {\r\n          uni.navigateBack()\r\n        }, 1000)\r\n      }\r\n    }\r\n  })\r\n    .catch((error) => {\r\n      console.log(error, 'error')\r\n    })\r\n}\r\n\r\n// 车辆\r\nconst getCar = async () => {\r\n  const res = await getCarApi({ isIncludeCompany: 'N', deptId: model.value.applicantCompanyDeptId })\r\n  carOptions.value = res.rows.map(item => ({\r\n    ...item,\r\n    label: `${item.plateNumber}（${item.brandModel}）${item.vehicleTypeName}`,\r\n  }))\r\n}\r\n\r\n// 司机\r\nconst getDriver = async () => {\r\n  const res = await getDriverApi({ isIncludeCompany: 'N', deptId: model.value.applicantCompanyDeptId })\r\n  driverOptions.value = res.rows.map(item => ({\r\n    ...item,\r\n    label: `${item.driverName}（${item.driverSexName}）${item.licenseTypeName}`,\r\n  }))\r\n}\r\n\r\nconst clickImg = (i) => {\r\n  uni.previewImage({\r\n    urls: [`data:image/jpg;base64,${model.value.flowChart}`] // 单张图片的 URL 数组\r\n  })\r\n  // data:image/png;base64,\r\n  // i.useCarApplicationOrderId\r\n}\r\n</script>\r\n\r\n<template>\r\n  <view class=\"order-form-page\">\r\n    <wd-message-box />\r\n    <wd-toast />\r\n    <view style=\"height: 2rpx;\"></view>\r\n    <BaseForm group>\r\n      <wd-form ref=\"form\" :model=\"model\" :rules=\"rules\" errorType=\"toast\">\r\n        <view class=\"group-con\">\r\n          <wd-cell-group title=\"基础信息\" border>\r\n            <wd-input label=\"申请人\" label-width=\"100px\" prop=\"applicantNickName\" clearable\r\n              v-model=\"model.applicantNickName\" placeholder=\"请输入申请人\" readonly />\r\n            <wd-input label=\"申请人账号\" label-width=\"100px\" prop=\"applicantUserId\" clearable\r\n              v-model=\"model.applicantUserName\" placeholder=\"请输入申请人账号\" readonly />\r\n            <wd-input label=\"申请人公司\" label-width=\"100px\" prop=\"applicantDeptId\" clearable\r\n              v-model=\"model.applicantCompanyDeptName\" placeholder=\"请输入申请人公司\" readonly />\r\n            <wd-input label=\"申请人部门\" label-width=\"100px\" prop=\"applicantCompanyDeptId\" clearable\r\n              v-model=\"model.applicantDeptName\" placeholder=\"请输入申请人部门\" readonly />\r\n            <wd-picker :readonly=\"canEdit\" label=\"申请人岗位\" placeholder=\"请选择申请人岗位\" value-key=\"postId\" label-key=\"postName\"\r\n              label-width=\"100px\" prop=\"applicantPostId\" v-model=\"model.applicantPostId\" :columns=\"postOptions\" />\r\n\r\n            <wd-col-picker auto-complete label-width=\"100px\" label=\"开始地点\" prop=\"applicantStartRegionCode\"\r\n              v-model=\"model.code1\" :columns=\"area\" :column-change=\"columnChange\" :readonly=\"canEdit\"\r\n              @confirm=\"handleConfirm\" value-key=\"code\" label-key=\"name\" />\r\n            <wd-col-picker auto-complete label-width=\"100px\" label=\"目标地点\" prop=\"applicantEndRegionCode\"\r\n              v-model=\"model.code2\" :columns=\"area2\" :column-change=\"columnChange2\" :readonly=\"canEdit\"\r\n              @confirm=\"handleConfirm2\" value-key=\"code\" label-key=\"name\" />\r\n            <wd-picker :readonly=\"canEdit\" label=\"是否跨市\" placeholder=\"请选择是否跨市\" value-key=\"dictValue\"\r\n              label-key=\"dictLabel\" label-width=\"100px\" prop=\"applicantIsIntermarketCityCode\"\r\n              v-model=\"model.applicantIsIntermarketCityCode\" :columns=\"ynOptions\" />\r\n            <wd-input label=\"乘车人数\" type=\"number\" :readonly=\"canEdit\" label-width=\"100px\"\r\n              prop=\"applicantPassengersNumber\" clearable v-model=\"model.applicantPassengersNumber\"\r\n              placeholder=\"请输入乘车人数\" />\r\n\r\n            <wd-datetime-picker @open=\"openDatePicker\" :readonly=\"canEdit\" :default-value=\"defaultValueDate\"\r\n              label=\"计划开始时间\" label-width=\"100px\" placeholder=\"请选择时间\" prop=\"planStartTime\"\r\n              v-model=\"model.planStartTime\" />\r\n            <wd-datetime-picker @open=\"openDatePicker(2)\" :readonly=\"canEdit\" :default-value=\"defaultValueDate\"\r\n              label=\"计划结束时间\" label-width=\"100px\" placeholder=\"请选择时间\" prop=\"planEndTime\" v-model=\"model.planEndTime\" />\r\n            <wd-textarea :readonly=\"canEdit\" label=\"申请内容\" label-width=\"100px\" prop=\"applicantContent\" clearable\r\n              v-model=\"model.applicantContent\" placeholder=\"请输入申请内容\" :maxlength=\"200\" auto-height show-word-limit\r\n              type=\"textarea\" />\r\n          </wd-cell-group>\r\n        </view>\r\n\r\n        <view class=\"footer\" v-if=\"curType === 'draft' || !curType\">\r\n          <wd-button type=\"warning\" v-if=\"curType !== 'draft'\" @click=\"handleDraft\">保存草稿</wd-button>\r\n          <view class=\"mg\"></view>\r\n          <wd-button type=\"primary\" @click=\"handlePublish\">保存发布</wd-button>\r\n        </view>\r\n      </wd-form>\r\n\r\n      <wd-form ref=\"approveForm\" :model=\"approveModel\" :rules=\"approveRules\" errorType=\"toast\">\r\n        <view class=\"group-con\" v-if=\"curType === 'approve' || curType === 'history'\">\r\n          <wd-cell-group title=\"审批信息\" border use-slot>\r\n            <template #value>\r\n              <view class=\"btn\" @click=\"clickImg\">流程图</view>\r\n              <!-- <wd-button size=\"small\" plain @click=\"clickImg\">流程图</wd-button> -->\r\n            </template>\r\n            <wd-input v-if=\"model.taskName\" label=\"任务节点\" label-width=\"100px\" prop=\"taskName\" clearable\r\n              v-model=\"model.taskName\" placeholder=\"请输入任务节点\" readonly />\r\n            <wd-select-picker :readonly=\"curType === 'history'\" type=\"radio\" value-key=\"vehicleId\"\r\n              label-key=\"label\" label-width=\"100px\" prop=\"approveVehicleId\" label=\"派发车辆\" placeholder=\"请选择派发车辆\"\r\n              v-model=\"approveModel.approveVehicleId\" :columns=\"carOptions\" @change=\"handleApproveCarChange\" filterable :show-confirm=\"false\" />\r\n            <wd-select-picker :readonly=\"curType === 'history'\" type=\"radio\" value-key=\"driverId\" label-key=\"label\"\r\n              label-width=\"100px\" prop=\"approveDriverId\" label=\"车辆司机\" placeholder=\"请选择车辆司机\"\r\n              v-model=\"approveModel.approveDriverId\" :columns=\"driverOptions\" @change=\"handleApproveDriverChange\" filterable :show-confirm=\"false\" />\r\n            <wd-input label=\"联系电话\" type=\"tel\" label-width=\"100px\" prop=\"approveDriverMobile\" clearable\r\n              v-model=\"approveModel.approveDriverMobile\" placeholder=\"请输入联系电话\" :readonly=\"curType === 'history'\" />\r\n            <wd-textarea v-if=\"curType !== 'history'\"  :readonly=\"curType === 'history'\" label=\"审批原因\" label-width=\"100px\" prop=\"approvalCause\"\r\n              clearable v-model=\"approveModel.approvalCause\" placeholder=\"请输入审批原因\" :maxlength=\"200\" auto-height\r\n              show-word-limit type=\"textarea\" />\r\n            <wd-input v-if=\"curType === 'history'\" label=\"审核状态\" :readonly=\"true\" label-width=\"100px\"\r\n              prop=\"orderStatusName\" clearable v-model=\"model.orderStatusName\" placeholder=\"\" />\r\n          </wd-cell-group>\r\n\r\n          <view class=\"footer\" v-if=\"curType === 'approve'\">\r\n            <wd-button type=\"warning\" @click=\"handleApprove('pass')\">通过</wd-button>\r\n            <view class=\"mg\"></view>\r\n            <wd-button type=\"primary\" @click=\"handleApprove('refuse')\">拒绝</wd-button>\r\n          </view>\r\n        </view>\r\n      </wd-form>\r\n    </BaseForm>\r\n  </view>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.order-form-page {\r\n\r\n  .group-con {\r\n    border-radius: 20rpx;\r\n    padding: 20rpx 10rpx;\r\n    background-color: #fff;\r\n    margin-bottom: 30rpx;\r\n\r\n    .btn {\r\n      line-height: 48rpx;\r\n      border-radius: 6rpx;\r\n      color: #fff;\r\n      font-size: 26rpx;\r\n      background-color: #597fe8;\r\n      text-align: center;\r\n      padding: 0 12rpx;\r\n    }\r\n  }\r\n\r\n  .footer {\r\n    display: flex;\r\n    justify-content: center;\r\n    margin-top: 40rpx;\r\n\r\n    .mg {\r\n      width: 40rpx;\r\n    }\r\n  }\r\n\r\n  ::v-deep .wd-cell-group__title {\r\n    align-items: center;\r\n    // padding-bottom: 12rpx;\r\n    padding-top: 12rpx;\r\n  }\r\n}\r\n</style>\r\n","import MiniProgramPage from '/Users/jing/Code/mini/vehicle-info/pages/order/form.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","postOrderApplyApi","formatDate","uni","putOrderDraftApi","computed","getApplyInfoApi","getDictApi","getRegionApi","findChildrenByCode","watchEffect","getPostApi","getOrderDetailApi","onMounted","onLoad","postApprove","getCarApi","getDriverApi"],"mappings":"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"}