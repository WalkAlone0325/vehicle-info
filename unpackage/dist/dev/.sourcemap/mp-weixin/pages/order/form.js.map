{"version":3,"file":"form.js","sources":["pages/order/form.vue","pages/order/form.vue?type=page"],"sourcesContent":["<script setup>\nimport { computed, onMounted, ref, watchEffect } from 'vue'\nimport { onLoad } from '@dcloudio/uni-app'\nimport { formatDate } from '@/utils'\nimport { getCarListApi, getDriverListApi, putOrderDraftApi, postOrderApplyApi, postApprove, getOrderDetailApi } from '@/api'\nimport { getApplyInfoApi, getPostApi, getDictApi, getRegionApi, getCarApi, getDriverApi } from '@/api'\nimport { findChildrenByCode } from '@/hooks/useColPickerData'\n\n// const { findChildrenByCode } = useColPickerData()\n\nconst curType = ref('')\nconst defaultValueDate = ref(Date.now())\nconst curId = ref('')\nconst form = ref(null)\nconst approveForm = ref(null)\nconst model = ref({\n  applicantNickName: '', // 申请人\n  applicantUserId: '', // 申请人账号\n  applicantUserName: '',\n  applicantDeptId: '', // 申请人公司\n  applicantDeptName: '',\n  applicantCompanyDeptId: '', // 申请人部门\n  applicantCompanyDeptName: '',\n  applicantPostId: '', // 申请人岗位\n  applicantStartRegionCode: '', // 开始地点\n  name1: '',\n  name2: '',\n  code1: [],\n  code2: [],\n  applicantEndRegionCode: '', // 目标地点\n  applicantIsIntermarketCityCode: '', // 是否跨市\n  applicantPassengersNumber: '', // 乘车人数\n  planStartTime: '', // 计划开始时间\n  planEndTime: '', // 计划结束时间\n  applicantContent: '', // 申请内容\n})\nconst rules = ref({\n  applicantContent: [{ required: true, message: '请输入申请内容', }],\n  planStartTime: [{ required: true, message: '请选择用车开始时间' }],\n  planEndTime: [{ required: true, message: '请选择用车结束时间' }],\n  applicantPassengersNumber: [{ required: true, message: '请输入乘车人数' }],\n  applicantStartRegionCode: [{ required: true, message: '请选择开始地点' }],\n  applicantEndRegionCode: [{ required: true, message: '请选择目标地点' }],\n  applicantIsIntermarketCityCode: [{ required: true, message: '请选择是否跨市' }],\n})\n\n// 审批\nconst approveModel = ref({\n  approvalCause: undefined,\n  approvalResultCode: undefined,\n  approveDriverId: undefined,\n  approveDriverName: undefined,\n  approvePlateNumber: undefined,\n  approveDriverMobile: undefined,\n  approveVehicleId: undefined,\n  useCarApplicationOrderId: undefined\n})\n\nconst approveRules = ref({\n  approvalCause: [{ required: true, message: '请输入审批原因' }],\n  // approveDriverId: [{ required: true, message: '请选择审批司机' }],\n  // approveVehicleId: [{ required: true, message: '请选择审批车辆' }],\n})\n\n// 数据\nconst typeOptions = ref([])\nconst carOptions = ref([])\nconst driverOptions = ref([])\n\n// 存为草稿\nconst handleDraft = () => {\n  form.value.validate().then(async ({ valid, errors }) => {\n    if (valid) {\n      const res = await postOrderApplyApi({\n        ...model.value,\n        planStartTime: formatDate(model.value.planStartTime),\n        planEndTime: formatDate(model.value.planEndTime),\n        orderStatusCode: 'draft'\n      })\n      if (res.code === 200) {\n        uni.showToast({ title: '草稿保存成功', icon: 'success' })\n        setTimeout(() => {\n          uni.navigateBack()\n        }, 1000)\n      }\n    }\n  })\n    .catch((error) => {\n      console.log(error, 'error')\n    })\n}\nconst handlePublish = () => {\n  form.value.validate().then(async ({ valid, errors }) => {\n    if (valid) {\n      if (model.value.useCarApplicationOrderId) {\n        const res = await putOrderDraftApi({\n          ...model.value,\n          planStartTime: formatDate(model.value.planStartTime),\n          planEndTime: formatDate(model.value.planEndTime),\n          orderStatusCode: 'pending'\n        })\n        if (res.code === 200) {\n          uni.showToast({ title: '提交成功', icon: 'success' })\n          setTimeout(() => {\n            uni.navigateBack()\n          }, 1000)\n        }\n      } else {\n        const res = await postOrderApplyApi({\n          ...model.value,\n          planStartTime: formatDate(model.value.planStartTime),\n          planEndTime: formatDate(model.value.planEndTime),\n          orderStatusCode: 'pending'\n        })\n        if (res.code === 200) {\n          uni.showToast({ title: '提交成功', icon: 'success' })\n          setTimeout(() => {\n            uni.navigateBack()\n          }, 1000)\n        }\n      }\n    }\n  })\n    .catch((error) => {\n      console.log(error, 'error')\n    })\n}\n\n// 可编辑\nconst canEdit = computed(() => !(curType.value !== 'history' && curType.value !== 'approve'))\n\n// 申请人信息\nconst getInfo = async () => {\n  const res = await getApplyInfoApi()\n  model.value.applicantNickName = res.data.nickName\n  model.value.applicantUserId = res.data.userId\n  model.value.applicantDeptId = res.data.deptId\n  model.value.applicantCompanyDeptId = res.data.companyDeptId\n  model.value.applicantPostId = res.data.postId\n  model.value.applicantUserName = res.data.username\n  model.value.applicantDeptName = res.data.deptName\n  model.value.applicantCompanyDeptName = res.data.companyDeptName\n}\n\nconst vehicleTypeOptions = ref([])\nconst ynOptions = ref([])\nconst getDict = async (key, option) => {\n  const res = await getDictApi(key)\n  option.value = res.data\n}\n\n// 地点\nconst area = ref([[]])\nconst area2 = ref([[]])\nconst areaOptions = ref([])\nconst getRegion = async (payload) => {\n  const res = await getRegionApi(payload)\n  area.value[0] = res.data\n  area2.value[0] = res.data\n  areaOptions.value = res.data\n}\nconst columnChange = async ({ selectedItem, index, resolve, finish }) => {\n  if(index < 2) {\n    const res = await getRegionApi({ code: selectedItem.code })\n    const areaData = findChildrenByCode(area.value[index], selectedItem.code, res.data)\n    if(index == 0) {\n      area.value = [areaOptions.value]\n    }\n    if (areaData && areaData.length) {\n      area.value[index + 1] = areaData\n      resolve(areaData)\n    } else {\n      // 没有下一项时，执行完成\n      finish()\n    }\n  } else {\n    finish()\n  }\n}\n\nconst columnChange2 = async ({ selectedItem, index, resolve, finish }) => {\n  if(index < 2) {\n    const res = await getRegionApi({ code: selectedItem.code })\n    const areaData = findChildrenByCode(area2.value[index], selectedItem.code, res.data)\n    if(index == 0) {\n      area2.value = [areaOptions.value]\n    }\n    if (areaData && areaData.length) {\n      area2.value[index + 1] = areaData\n      resolve(areaData)\n    } else {\n      // 没有下一项时，执行完成\n      finish()\n    }\n  } else {\n    finish()\n  }\n}\n\nconst handleConfirm = ({ value, selectedItems }) => {\n  model.value.code1 = value\n  model.value.applicantStartRegionCode = value[2]\n  // model.value.applicantStartRegionName = selectedItems.map(item => item.name).join('')\n}\nconst handleConfirm2 = ({ value, selectedItems }) => {\n  model.value.code2 = value\n  model.value.applicantEndRegionCode = value[2]\n  // model.value.applicantEndRegionName = selectedItems.map(item => item.name).join('')\n}\n\nwatchEffect(() => {\n  if (!model.value.applicantStartRegionCode || !model.value.applicantEndRegionCode) {\n    model.value.applicantIsIntermarketCityCode = ''\n    return\n  }\n  const v1 = model.value.applicantStartRegionCode?.substring(0, 4)\n  const v2 = model.value.applicantEndRegionCode?.substring(0, 4)\n  model.value.applicantIsIntermarketCityCode = v1 === v2 ? 'N' : 'Y'\n})\n\n// 岗位\nconst postOptions = ref([])\nconst getPost = async () => {\n  const res = await getPostApi()\n  postOptions.value = res.data\n  if (res.data.length) {\n    model.value.applicantPostId = res.data[0].postId\n  }\n}\n\n// 获取详情\nconst getOrderDetail = async (id) => {\n  const res = await getOrderDetailApi(id)\n  model.value = {\n    ...res.data,\n    code1: [res.data.applicantStartProvinceCode, res.data.applicantStartCityCode, res.data.applicantStartCountyCode],\n    code2: [res.data.applicantEndProvinceCode, res.data.applicantEndCityCode, res.data.applicantEndCountyCode],\n  }\n  approveModel.value = {\n    ...approveModel.value,\n    approveDriverId: model.value.approveDriverId,\n    approveVehicleId: model.value.approveVehicleId,\n    approveDriverMobile: model.value.approveDriverMobile,\n    approvalCause: model.value.approvalCause,\n  }\n  handleConfirm({ value: model.value.code1 })\n  handleConfirm2({ value: model.value.code2 })\n}\n\n// 时间\nconst openDatePicker = (type) => {\n  defaultValueDate.value = model.value[type === 1 ? 'planStartTime' : 'planEndTime'] || Date.now()\n}\n\nonMounted(() => {\n  getInfo()\n  getPost()\n  // getDict('vehicle_type', vehicleTypeOptions)\n  getDict('sys_yes_no', ynOptions)\n\n})\n\n// 加载\nonLoad(async (param) => {\n  try {\n      uni.showLoading({ title: '加载中...' })\n      curType.value = param.type\n      curId.value = param.id\n      await getRegion()\n      if (curId.value) {\n        await getOrderDetail(curId.value)\n        if(curType.value === 'approve' || curType.value === 'history') {\n          await getCar()\n          await getDriver()\n        }\n      }\n      uni.hideLoading()\n    } catch (e) {\n      uni.hideLoading()\n    }\n})\n\n\n// 审批\nconst handleApproveDriverChange = ({ value }) => {\n  const driver = driverOptions.value.find(item => item.driverId === value)\n  approveModel.value.approveDriverName = driver.driverName\n}\nconst handleApproveCarChange = ({ value }) => {\n  const car = carOptions.value.find(item => item.vehicleId === value)\n  approveModel.value.approvePlateNumber = car.plateNumber\n  approveModel.value.approveDriverName = car.driverName\n  approveModel.value.approveDriverId = car.driverId\n}\n\nconst handleApprove = (status) => {\n  approveForm.value.validate().then(async ({ valid, errors }) => {\n    if (valid) {\n      if(model.value.taskName === '车辆管理员') {\n        if(!approveModel.value.approveVehicleId) {\n          uni.showToast({ title: '请选择车辆', icon: 'none' })\n          return\n        }\n        if(!approveModel.value.approveDriverId) {\n          uni.showToast({ title: '请选择司机', icon: 'none' })\n          return\n        }\n      }\n      const res = await postApprove({\n        ...approveModel.value,\n        approvalResultCode: status,\n        taskId: model.value.taskId,\n        taskName: model.value.taskName,\n        useCarApplicationOrderId: model.value.useCarApplicationOrderId\n      })\n      if (res.code === 200) {\n        uni.showToast({ title: '审批成功', icon: 'success' })\n        setTimeout(() => {\n          uni.navigateBack()\n        }, 1000)\n      }\n    }\n  })\n    .catch((error) => {\n      console.log(error, 'error')\n    })\n}\n\n// 车辆\nconst getCar = async () => {\n  const res = await getCarApi({ isIncludeCompany: 'N', deptId: model.value.applicantCompanyDeptId })\n  carOptions.value = res.rows.map(item => ({\n    ...item,\n    label: `${item.plateNumber}（${item.brandModel}）${item.vehicleTypeName}`,\n  }))\n}\n\n// 司机\nconst getDriver = async () => {\n  const res = await getDriverApi({ isIncludeCompany: 'N', deptId: model.value.applicantCompanyDeptId })\n  driverOptions.value = res.rows.map(item => ({\n    ...item,\n    label: `${item.driverName}（${item.driverSexName}）${item.licenseTypeName}`,\n  }))\n}\n\nconst clickImg = (i) => {\n  uni.previewImage({\n    urls: [`data:image/jpg;base64,${model.value.flowChart}`] // 单张图片的 URL 数组\n  })\n  // data:image/png;base64,\n  // i.useCarApplicationOrderId\n}\n</script>\n\n<template>\n  <view class=\"order-form-page\">\n    <wd-message-box />\n    <wd-toast />\n    <view style=\"height: 2rpx;\"></view>\n    <BaseForm group>\n      <wd-form ref=\"form\" :model=\"model\" :rules=\"rules\" errorType=\"toast\">\n        <view class=\"group-con\">\n          <wd-cell-group title=\"基础信息\" border>\n            <wd-input label=\"申请人\" label-width=\"100px\" prop=\"applicantNickName\" clearable\n              v-model=\"model.applicantNickName\" placeholder=\"请输入申请人\" readonly />\n            <wd-input label=\"申请人账号\" label-width=\"100px\" prop=\"applicantUserId\" clearable\n              v-model=\"model.applicantUserName\" placeholder=\"请输入申请人账号\" readonly />\n            <wd-input label=\"申请人公司\" label-width=\"100px\" prop=\"applicantDeptId\" clearable\n              v-model=\"model.applicantCompanyDeptName\" placeholder=\"请输入申请人公司\" readonly />\n            <wd-input label=\"申请人部门\" label-width=\"100px\" prop=\"applicantCompanyDeptId\" clearable\n              v-model=\"model.applicantDeptName\" placeholder=\"请输入申请人部门\" readonly />\n            <wd-picker :readonly=\"canEdit\" label=\"申请人岗位\" placeholder=\"请选择申请人岗位\" value-key=\"postId\" label-key=\"postName\"\n              label-width=\"100px\" prop=\"applicantPostId\" v-model=\"model.applicantPostId\" :columns=\"postOptions\" />\n\n            <wd-col-picker clearable auto-complete label-width=\"100px\" label=\"开始地点\" prop=\"applicantStartRegionCode\"\n              v-model=\"model.code1\" :columns=\"area\" :column-change=\"columnChange\" :readonly=\"canEdit\"\n              @confirm=\"handleConfirm\" value-key=\"code\" label-key=\"name\" />\n            <wd-col-picker clearable auto-complete label-width=\"100px\" label=\"目标地点\" prop=\"applicantEndRegionCode\"\n              v-model=\"model.code2\" :columns=\"area2\" :column-change=\"columnChange2\" :readonly=\"canEdit\"\n              @confirm=\"handleConfirm2\" value-key=\"code\" label-key=\"name\" />\n            <wd-picker :readonly=\"canEdit\" label=\"是否跨市\" placeholder=\"请选择是否跨市\" value-key=\"dictValue\"\n              label-key=\"dictLabel\" label-width=\"100px\" prop=\"applicantIsIntermarketCityCode\"\n              v-model=\"model.applicantIsIntermarketCityCode\" :columns=\"ynOptions\" />\n            <wd-input label=\"乘车人数\" type=\"number\" :readonly=\"canEdit\" label-width=\"100px\"\n              prop=\"applicantPassengersNumber\" clearable v-model=\"model.applicantPassengersNumber\"\n              placeholder=\"请输入乘车人数\" />\n\n            <wd-datetime-picker @open=\"openDatePicker\" :readonly=\"canEdit\" :default-value=\"defaultValueDate\"\n              label=\"计划开始时间\" label-width=\"100px\" placeholder=\"请选择时间\" prop=\"planStartTime\"\n              v-model=\"model.planStartTime\" />\n            <wd-datetime-picker @open=\"openDatePicker(2)\" :readonly=\"canEdit\" :default-value=\"defaultValueDate\"\n              label=\"计划结束时间\" label-width=\"100px\" placeholder=\"请选择时间\" prop=\"planEndTime\" v-model=\"model.planEndTime\" />\n            <wd-textarea :readonly=\"canEdit\" label=\"申请内容\" label-width=\"100px\" prop=\"applicantContent\" clearable\n              v-model=\"model.applicantContent\" placeholder=\"请输入申请内容\" :maxlength=\"200\" auto-height show-word-limit\n              type=\"textarea\" />\n          </wd-cell-group>\n        </view>\n\n        <view class=\"footer\" v-if=\"curType === 'draft' || !curType\">\n          <!-- <wd-button type=\"warning\" v-if=\"curType !== 'draft'\" @click=\"handleDraft\">保存草稿</wd-button> -->\n          <!-- <view class=\"mg\"></view> -->\n          <wd-button type=\"primary\" @click=\"handlePublish\">保存发布</wd-button>\n        </view>\n      </wd-form>\n\n      <wd-form ref=\"approveForm\" :model=\"approveModel\" :rules=\"approveRules\" errorType=\"toast\">\n        <view class=\"group-con\" v-if=\"curType === 'approve' || curType === 'history'\">\n          <wd-cell-group title=\"审批信息\" border use-slot>\n            <template #value>\n              <view class=\"btn\" @click=\"clickImg\">流程图</view>\n              <!-- <wd-button size=\"small\" plain @click=\"clickImg\">流程图</wd-button> -->\n            </template>\n            <wd-input v-if=\"model.taskName\" label=\"任务节点\" label-width=\"80px\" prop=\"taskName\" clearable\n              v-model=\"model.taskName\" placeholder=\"请输入任务节点\" readonly />\n            <wd-select-picker clearable :readonly=\"curType === 'history'\" type=\"radio\" value-key=\"vehicleId\"\n              label-key=\"label\" label-width=\"80px\" prop=\"approveVehicleId\" label=\"派发车辆\" placeholder=\"请选择派发车辆\"\n              v-model=\"approveModel.approveVehicleId\" :columns=\"carOptions\" @change=\"handleApproveCarChange\" filterable :show-confirm=\"false\" />\n            <wd-select-picker clearable :readonly=\"curType === 'history'\" type=\"radio\" value-key=\"driverId\" label-key=\"label\"\n              label-width=\"80px\" prop=\"approveDriverId\" label=\"车辆司机\" placeholder=\"请选择车辆司机\"\n              v-model=\"approveModel.approveDriverId\" :columns=\"driverOptions\" @change=\"handleApproveDriverChange\" filterable :show-confirm=\"false\" />\n            <!-- <wd-input label=\"联系电话\" type=\"tel\" label-width=\"80px\" prop=\"approveDriverMobile\" clearable\n              v-model=\"approveModel.approveDriverMobile\" placeholder=\"请输入联系电话\" :readonly=\"curType === 'history'\" /> -->\n            <wd-textarea v-if=\"curType !== 'history'\"  :readonly=\"curType === 'history'\" label=\"审批原因\" label-width=\"80px\" prop=\"approvalCause\"\n              clearable v-model=\"approveModel.approvalCause\" placeholder=\"请输入审批原因\" :maxlength=\"200\" auto-height\n              show-word-limit type=\"textarea\" />\n            <wd-input v-if=\"curType === 'history'\" label=\"审核状态\" :readonly=\"true\" label-width=\"80px\"\n              prop=\"orderStatusName\" clearable v-model=\"model.orderStatusName\" placeholder=\"\" />\n          </wd-cell-group>\n\n          <view class=\"footer\" v-if=\"curType === 'approve'\">\n            <wd-button type=\"warning\" @click=\"handleApprove('pass')\">通过</wd-button>\n            <view class=\"mg\"></view>\n            <wd-button type=\"primary\" @click=\"handleApprove('refuse')\">拒绝</wd-button>\n          </view>\n        </view>\n      </wd-form>\n    </BaseForm>\n  </view>\n</template>\n\n<style lang=\"scss\" scoped>\n.order-form-page {\n\n  .group-con {\n    border-radius: 20rpx;\n    padding: 20rpx 10rpx;\n    background-color: #fff;\n    margin-bottom: 30rpx;\n\n    .btn {\n      line-height: 48rpx;\n      border-radius: 6rpx;\n      color: #fff;\n      font-size: 26rpx;\n      background-color: #597fe8;\n      text-align: center;\n      padding: 0 12rpx;\n    }\n  }\n\n  .footer {\n    display: flex;\n    justify-content: center;\n    margin-top: 40rpx;\n\n    .mg {\n      width: 40rpx;\n    }\n  }\n\n  ::v-deep .wd-cell-group__title {\n    align-items: center;\n    // padding-bottom: 12rpx;\n    padding-top: 12rpx;\n  }\n}\n</style>\n","import MiniProgramPage from '/Users/jing/Code/mini/vehicle-info/pages/order/form.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","putOrderDraftApi","formatDate","uni","postOrderApplyApi","computed","getApplyInfoApi","getDictApi","getRegionApi","findChildrenByCode","watchEffect","getPostApi","getOrderDetailApi","onMounted","onLoad","postApprove","getCarApi","getDriverApi"],"mappings":"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"}