{"version":3,"file":"form.js","sources":["pages/order/form.vue","pages/order/form.vue?type=page"],"sourcesContent":["<script setup>\nimport { computed, onMounted, ref, watchEffect } from 'vue'\nimport { onLoad } from '@dcloudio/uni-app'\nimport { formatDate } from '@/utils'\nimport { getCarListApi, getDriverListApi, putOrderDraftApi, postOrderApplyApi, postApprove, getOrderDetailApi } from '@/api'\nimport { getApplyInfoApi, getPostApi, getDictApi, getRegionApi, getCarApi, getDriverApi } from '@/api'\nimport { findChildrenByCode } from '@/hooks/useColPickerData'\n\n// const { findChildrenByCode } = useColPickerData()\n\nconst curType = ref('')\nconst defaultValueDate = ref(Date.now())\nconst curId = ref('')\nconst form = ref(null)\nconst approveForm = ref(null)\nconst model = ref({\n  applicantNickName: '', // 申请人\n  applicantUserId: '', // 申请人账号\n  applicantUserName: '',\n  applicantDeptId: '', // 申请人公司\n  applicantDeptName: '',\n  applicantCompanyDeptId: '', // 申请人部门\n  applicantCompanyDeptName: '',\n  applicantPostId: '', // 申请人岗位\n  applicantStartRegionCode: '', // 开始地点\n  name1: '',\n  name2: '',\n  code1: [],\n  code2: [],\n  applicantEndRegionCode: '', // 目标地点\n  applicantIsIntermarketCityCode: '', // 是否跨市\n  applicantPassengersNumber: '', // 乘车人数\n  planStartTime: '', // 计划开始时间\n  planEndTime: '', // 计划结束时间\n  applicantContent: '', // 申请内容\n})\nconst rules = ref({\n  applicantContent: [{ required: true, message: '请输入申请内容', }],\n  planStartTime: [{ required: true, message: '请选择用车开始时间' }],\n  planEndTime: [{ required: true, message: '请选择用车结束时间' }],\n  applicantPassengersNumber: [{ required: true, message: '请输入乘车人数' }],\n  applicantStartRegionCode: [{ required: true, message: '请选择开始地点' }],\n  applicantEndRegionCode: [{ required: true, message: '请选择目标地点' }],\n  applicantIsIntermarketCityCode: [{ required: true, message: '请选择是否跨市' }],\n})\n\n// 审批\nconst approveModel = ref({\n  approvalCause: undefined,\n  approvalResultCode: undefined,\n  approveDriverId: undefined,\n  approveDriverName: undefined,\n  approvePlateNumber: undefined,\n  approveDriverMobile: undefined,\n  approveVehicleId: undefined,\n  useCarApplicationOrderId: undefined\n})\n\nconst approveRules = ref({\n  approvalCause: [{ required: true, message: '请输入审批原因' }],\n  // approveDriverId: [{ required: true, message: '请选择审批司机' }],\n  // approveVehicleId: [{ required: true, message: '请选择审批车辆' }],\n})\n\n// 数据\nconst typeOptions = ref([])\nconst carOptions = ref([])\nconst driverOptions = ref([])\n\n// 存为草稿\nconst handleDraft = () => {\n  form.value.validate().then(async ({ valid, errors }) => {\n    if (valid) {\n      const res = await postOrderApplyApi({\n        ...model.value,\n        planStartTime: formatDate(model.value.planStartTime),\n        planEndTime: formatDate(model.value.planEndTime),\n        orderStatusCode: 'draft'\n      })\n      if (res.code === 200) {\n        uni.showToast({ title: '草稿保存成功', icon: 'success' })\n        setTimeout(() => {\n          uni.navigateBack()\n        }, 1000)\n      }\n    }\n  })\n    .catch((error) => {\n      console.log(error, 'error')\n    })\n}\nconst handlePublish = () => {\n  form.value.validate().then(async ({ valid, errors }) => {\n    if (valid) {\n      if (model.value.useCarApplicationOrderId) {\n        const res = await putOrderDraftApi({\n          ...model.value,\n          planStartTime: formatDate(model.value.planStartTime),\n          planEndTime: formatDate(model.value.planEndTime),\n          orderStatusCode: 'pending'\n        })\n        if (res.code === 200) {\n          uni.showToast({ title: '提交成功', icon: 'success' })\n          setTimeout(() => {\n            uni.navigateBack()\n          }, 1000)\n        }\n      } else {\n        const res = await postOrderApplyApi({\n          ...model.value,\n          planStartTime: formatDate(model.value.planStartTime),\n          planEndTime: formatDate(model.value.planEndTime),\n          orderStatusCode: 'pending'\n        })\n        if (res.code === 200) {\n          uni.showToast({ title: '提交成功', icon: 'success' })\n          setTimeout(() => {\n            uni.navigateBack()\n          }, 1000)\n        }\n      }\n    }\n  })\n    .catch((error) => {\n      console.log(error, 'error')\n    })\n}\n\n// 可编辑\nconst canEdit = computed(() => !(curType.value !== 'history' && curType.value !== 'approve'))\n\n// 申请人信息\nconst getInfo = async () => {\n  const res = await getApplyInfoApi()\n  model.value.applicantNickName = res.data.nickName\n  model.value.applicantUserId = res.data.userId\n  model.value.applicantDeptId = res.data.deptId\n  model.value.applicantCompanyDeptId = res.data.companyDeptId\n  model.value.applicantPostId = res.data.postId\n  model.value.applicantUserName = res.data.username\n  model.value.applicantDeptName = res.data.deptName\n  model.value.applicantCompanyDeptName = res.data.companyDeptName\n}\n\nconst vehicleTypeOptions = ref([])\nconst ynOptions = ref([])\nconst getDict = async (key, option) => {\n  const res = await getDictApi(key)\n  option.value = res.data\n}\n\n// 地点\nconst area = ref([[]])\nconst area2 = ref([[]])\nconst areaOptions = ref([])\nconst getRegion = async (payload) => {\n  const res = await getRegionApi(payload)\n  area.value[0] = res.data\n  area2.value[0] = res.data\n  areaOptions.value = res.data\n}\nconst columnChange = async ({ selectedItem, index, resolve, finish }) => {\n  if(index < 2) {\n    const res = await getRegionApi({ code: selectedItem.code })\n    const areaData = findChildrenByCode(area.value[index], selectedItem.code, res.data)\n    if(index == 0) {\n      area.value = [areaOptions.value]\n    }\n    if (areaData && areaData.length) {\n      area.value[index + 1] = areaData\n      resolve(areaData)\n    } else {\n      // 没有下一项时，执行完成\n      finish()\n    }\n  } else {\n    finish()\n  }\n}\n\nconst columnChange2 = async ({ selectedItem, index, resolve, finish }) => {\n  if(index < 2) {\n    const res = await getRegionApi({ code: selectedItem.code })\n    const areaData = findChildrenByCode(area2.value[index], selectedItem.code, res.data)\n    if(index == 0) {\n      area2.value = [areaOptions.value]\n    }\n    if (areaData && areaData.length) {\n      area2.value[index + 1] = areaData\n      resolve(areaData)\n    } else {\n      // 没有下一项时，执行完成\n      finish()\n    }\n  } else {\n    finish()\n  }\n}\n\nconst handleConfirm = ({ value, selectedItems }) => {\n  model.value.code1 = value\n  model.value.applicantStartRegionCode = value[2]\n  // model.value.applicantStartRegionName = selectedItems.map(item => item.name).join('')\n}\nconst handleConfirm2 = ({ value, selectedItems }) => {\n  model.value.code2 = value\n  model.value.applicantEndRegionCode = value[2]\n  // model.value.applicantEndRegionName = selectedItems.map(item => item.name).join('')\n}\n\nwatchEffect(() => {\n  if (!model.value.applicantStartRegionCode || !model.value.applicantEndRegionCode) {\n    model.value.applicantIsIntermarketCityCode = ''\n    return\n  }\n  const v1 = model.value.applicantStartRegionCode?.substring(0, 4)\n  const v2 = model.value.applicantEndRegionCode?.substring(0, 4)\n  model.value.applicantIsIntermarketCityCode = v1 === v2 ? 'N' : 'Y'\n})\n\n// 岗位\nconst postOptions = ref([])\nconst getPost = async () => {\n  const res = await getPostApi()\n  postOptions.value = res.data\n  if (res.data.length) {\n    model.value.applicantPostId = res.data[0].postId\n  }\n}\n\n// 获取详情\nconst getOrderDetail = async (id) => {\n  const res = await getOrderDetailApi(id)\n  model.value = {\n    ...res.data,\n    code1: [res.data.applicantStartProvinceCode, res.data.applicantStartCityCode, res.data.applicantStartCountyCode],\n    code2: [res.data.applicantEndProvinceCode, res.data.applicantEndCityCode, res.data.applicantEndCountyCode],\n  }\n  approveModel.value = {\n    ...approveModel.value,\n    approveDriverId: model.value.approveDriverId,\n    approveVehicleId: model.value.approveVehicleId,\n    approveDriverMobile: model.value.approveDriverMobile,\n    approvalCause: model.value.approvalCause,\n  }\n  handleConfirm({ value: model.value.code1 })\n  handleConfirm2({ value: model.value.code2 })\n}\n\n// 时间\nconst openDatePicker = (type) => {\n  defaultValueDate.value = model.value[type === 1 ? 'planStartTime' : 'planEndTime'] || Date.now()\n}\n\nonMounted(() => {\n  getInfo()\n  getPost()\n  // getDict('vehicle_type', vehicleTypeOptions)\n  getDict('sys_yes_no', ynOptions)\n\n})\n\n// 加载\nonLoad(async (param) => {\n  try {\n      uni.showLoading({ title: '加载中...' })\n      curType.value = param.type\n      curId.value = param.id\n      await getRegion()\n      if (curId.value) {\n        await getOrderDetail(curId.value)\n        if(curType.value === 'approve' || curType.value === 'history') {\n          await getCar()\n          await getDriver()\n        }\n      }\n      uni.hideLoading()\n    } catch (e) {\n      uni.hideLoading()\n    }\n})\n\n\n// 审批\nconst handleApproveDriverChange = ({ value }) => {\n  const driver = driverOptions.value.find(item => item.driverId === value)\n  approveModel.value.approveDriverName = driver.driverName\n}\nconst handleApproveCarChange = ({ value }) => {\n  const car = carOptions.value.find(item => item.vehicleId === value)\n  approveModel.value.approvePlateNumber = car.plateNumber\n  approveModel.value.approveDriverName = car.driverName\n  approveModel.value.approveDriverId = car.driverId\n}\n\nconst handleApprove = (status) => {\n  approveForm.value.validate().then(async ({ valid, errors }) => {\n    if (valid) {\n      if(model.value.taskName === '车辆管理员') {\n        if(!approveModel.value.approveVehicleId) {\n          uni.showToast({ title: '请选择车辆', icon: 'none' })\n          return\n        }\n        if(!approveModel.value.approveDriverId) {\n          uni.showToast({ title: '请选择司机', icon: 'none' })\n          return\n        }\n      }\n      const res = await postApprove({\n        ...approveModel.value,\n        approvalResultCode: status,\n        taskId: model.value.taskId,\n        taskName: model.value.taskName,\n        useCarApplicationOrderId: model.value.useCarApplicationOrderId\n      })\n      if (res.code === 200) {\n        uni.showToast({ title: '审批成功', icon: 'success' })\n        setTimeout(() => {\n          uni.navigateBack()\n        }, 1000)\n      }\n    }\n  })\n    .catch((error) => {\n      console.log(error, 'error')\n    })\n}\n\n// 车辆\nconst getCar = async () => {\n  const res = await getCarApi({ isIncludeCompany: 'N', deptId: model.value.applicantCompanyDeptId })\n  carOptions.value = res.rows.map(item => ({\n    ...item,\n    label: `${item.plateNumber}（${item.brandModel}）${item.vehicleTypeName}`,\n  }))\n}\n\n// 司机\nconst getDriver = async () => {\n  const res = await getDriverApi({ isIncludeCompany: 'N', deptId: model.value.applicantCompanyDeptId })\n  driverOptions.value = res.rows.map(item => ({\n    ...item,\n    label: `${item.driverName}（${item.driverSexName}）${item.licenseTypeName}`,\n  }))\n}\n\nconst clickImg = (i) => {\n  uni.previewImage({\n    urls: [`data:image/jpg;base64,${model.value.flowChart}`] // 单张图片的 URL 数组\n  })\n  // data:image/png;base64,\n  // i.useCarApplicationOrderId\n}\n</script>\n\n<template>\n  <view class=\"order-form-page\">\n    <wd-message-box />\n    <wd-toast />\n    <view style=\"height: 2rpx;\"></view>\n    <BaseForm group>\n      <wd-form ref=\"form\" :model=\"model\" :rules=\"rules\" errorType=\"toast\">\n        <view class=\"group-con\">\n          <wd-cell-group title=\"基础信息\" border>\n            <wd-input label=\"申请人\" label-width=\"100px\" prop=\"applicantNickName\" clearable\n              v-model=\"model.applicantNickName\" placeholder=\"请输入申请人\" readonly />\n            <wd-input label=\"申请人账号\" label-width=\"100px\" prop=\"applicantUserId\" clearable\n              v-model=\"model.applicantUserName\" placeholder=\"请输入申请人账号\" readonly />\n            <wd-input label=\"申请人公司\" label-width=\"100px\" prop=\"applicantDeptId\" clearable\n              v-model=\"model.applicantCompanyDeptName\" placeholder=\"请输入申请人公司\" readonly />\n            <wd-input label=\"申请人部门\" label-width=\"100px\" prop=\"applicantCompanyDeptId\" clearable\n              v-model=\"model.applicantDeptName\" placeholder=\"请输入申请人部门\" readonly />\n            <wd-picker :readonly=\"canEdit\" label=\"申请人岗位\" placeholder=\"请选择申请人岗位\" value-key=\"postId\" label-key=\"postName\"\n              label-width=\"100px\" prop=\"applicantPostId\" v-model=\"model.applicantPostId\" :columns=\"postOptions\" />\n\n            <wd-col-picker clearable auto-complete label-width=\"100px\" label=\"开始地点\" prop=\"applicantStartRegionCode\"\n              v-model=\"model.code1\" :columns=\"area\" :column-change=\"columnChange\" :readonly=\"canEdit\"\n              @confirm=\"handleConfirm\" value-key=\"code\" label-key=\"name\" />\n            <wd-col-picker clearable auto-complete label-width=\"100px\" label=\"目标地点\" prop=\"applicantEndRegionCode\"\n              v-model=\"model.code2\" :columns=\"area2\" :column-change=\"columnChange2\" :readonly=\"canEdit\"\n              @confirm=\"handleConfirm2\" value-key=\"code\" label-key=\"name\" />\n            <wd-picker :readonly=\"canEdit\" label=\"是否跨市\" placeholder=\"请选择是否跨市\" value-key=\"dictValue\"\n              label-key=\"dictLabel\" label-width=\"100px\" prop=\"applicantIsIntermarketCityCode\"\n              v-model=\"model.applicantIsIntermarketCityCode\" :columns=\"ynOptions\" />\n            <wd-input label=\"乘车人数\" type=\"number\" :readonly=\"canEdit\" label-width=\"100px\"\n              prop=\"applicantPassengersNumber\" clearable v-model=\"model.applicantPassengersNumber\"\n              placeholder=\"请输入乘车人数\" />\n\n            <wd-datetime-picker @open=\"openDatePicker\" :readonly=\"canEdit\" :default-value=\"defaultValueDate\"\n              label=\"计划开始时间\" label-width=\"100px\" placeholder=\"请选择时间\" prop=\"planStartTime\"\n              v-model=\"model.planStartTime\" />\n            <wd-datetime-picker @open=\"openDatePicker(2)\" :readonly=\"canEdit\" :default-value=\"defaultValueDate\"\n              label=\"计划结束时间\" label-width=\"100px\" placeholder=\"请选择时间\" prop=\"planEndTime\" v-model=\"model.planEndTime\" />\n            <wd-textarea :readonly=\"canEdit\" label=\"申请内容\" label-width=\"100px\" prop=\"applicantContent\" clearable\n              v-model=\"model.applicantContent\" placeholder=\"请输入申请内容\" :maxlength=\"200\" auto-height show-word-limit\n              type=\"textarea\" />\n          </wd-cell-group>\n        </view>\n\n        <view class=\"footer\" v-if=\"curType === 'draft' || !curType\">\n          <!-- <wd-button type=\"warning\" v-if=\"curType !== 'draft'\" @click=\"handleDraft\">保存草稿</wd-button> -->\n          <!-- <view class=\"mg\"></view> -->\n          <wd-button type=\"primary\" @click=\"handlePublish\">保存发布</wd-button>\n        </view>\n      </wd-form>\n\n      <wd-form ref=\"approveForm\" :model=\"approveModel\" :rules=\"approveRules\" errorType=\"toast\">\n        <view class=\"group-con\" v-if=\"curType === 'approve' || curType === 'history'\">\n          <wd-cell-group title=\"审批信息\" border use-slot>\n            <template #value>\n              <view class=\"btn\" @click=\"clickImg\">流程图</view>\n              <!-- <wd-button size=\"small\" plain @click=\"clickImg\">流程图</wd-button> -->\n            </template>\n            <wd-input v-if=\"model.taskName\" label=\"任务节点\" label-width=\"80px\" prop=\"taskName\" clearable\n              v-model=\"model.taskName\" placeholder=\"请输入任务节点\" readonly />\n            <wd-select-picker clearable :readonly=\"curType === 'history'\" type=\"radio\" value-key=\"vehicleId\"\n              label-key=\"label\" label-width=\"80px\" prop=\"approveVehicleId\" label=\"派发车辆\" placeholder=\"请选择派发车辆\"\n              v-model=\"approveModel.approveVehicleId\" :columns=\"carOptions\" @change=\"handleApproveCarChange\" filterable :show-confirm=\"false\" />\n            <wd-select-picker clearable :readonly=\"curType === 'history'\" type=\"radio\" value-key=\"driverId\" label-key=\"label\"\n              label-width=\"80px\" prop=\"approveDriverId\" label=\"车辆司机\" placeholder=\"请选择车辆司机\"\n              v-model=\"approveModel.approveDriverId\" :columns=\"driverOptions\" @change=\"handleApproveDriverChange\" filterable :show-confirm=\"false\" />\n            <!-- <wd-input label=\"联系电话\" type=\"tel\" label-width=\"80px\" prop=\"approveDriverMobile\" clearable\n              v-model=\"approveModel.approveDriverMobile\" placeholder=\"请输入联系电话\" :readonly=\"curType === 'history'\" /> -->\n            <wd-textarea v-if=\"curType !== 'history'\"  :readonly=\"curType === 'history'\" label=\"审批原因\" label-width=\"80px\" prop=\"approvalCause\"\n              clearable v-model=\"approveModel.approvalCause\" placeholder=\"请输入审批原因\" :maxlength=\"200\" auto-height\n              show-word-limit type=\"textarea\" />\n            <wd-input v-if=\"curType === 'history'\" label=\"审核状态\" :readonly=\"true\" label-width=\"80px\"\n              prop=\"orderStatusName\" clearable v-model=\"model.orderStatusName\" placeholder=\"\" />\n          </wd-cell-group>\n\n          <view class=\"footer\" v-if=\"curType === 'approve'\">\n            <wd-button type=\"warning\" @click=\"handleApprove('pass')\">通过</wd-button>\n            <view class=\"mg\"></view>\n            <wd-button type=\"primary\" @click=\"handleApprove('refuse')\">拒绝</wd-button>\n          </view>\n        </view>\n      </wd-form>\n    </BaseForm>\n  </view>\n</template>\n\n<style lang=\"scss\" scoped>\n.order-form-page {\n\n  .group-con {\n    border-radius: 20rpx;\n    padding: 20rpx 10rpx;\n    background-color: #fff;\n    margin-bottom: 30rpx;\n\n    .btn {\n      line-height: 48rpx;\n      border-radius: 6rpx;\n      color: #fff;\n      font-size: 26rpx;\n      background-color: #597fe8;\n      text-align: center;\n      padding: 0 12rpx;\n    }\n  }\n\n  .footer {\n    display: flex;\n    justify-content: center;\n    margin-top: 40rpx;\n\n    .mg {\n      width: 40rpx;\n    }\n  }\n\n  ::v-deep .wd-cell-group__title {\n    align-items: center;\n    // padding-bottom: 12rpx;\n    padding-top: 12rpx;\n  }\n}\n</style>\n","import MiniProgramPage from '/Users/jing/Code/mini/vehicle-info/pages/order/form.vue'\nwx.createPage(MiniProgramPage)"],"names":["curType","ref","defaultValueDate","curId","form","approveForm","model","rules","approveModel","approveRules","carOptions","driverOptions","handlePublish","valid","errors","putOrderDraftApi","formatDate","uni","postOrderApplyApi","error","canEdit","computed","getInfo","res","getApplyInfoApi","ynOptions","getDict","key","option","getDictApi","area","area2","areaOptions","getRegion","payload","getRegionApi","columnChange","selectedItem","index","resolve","finish","areaData","findChildrenByCode","columnChange2","handleConfirm","value","selectedItems","handleConfirm2","watchEffect","v1","_a","v2","_b","postOptions","getPost","getPostApi","getOrderDetail","id","getOrderDetailApi","openDatePicker","type","onMounted","onLoad","param","getCar","getDriver","handleApproveDriverChange","driver","item","handleApproveCarChange","car","handleApprove","status","postApprove","getCarApi","getDriverApi","clickImg","i","MiniProgramPage"],"mappings":"mrDAUA,MAAMA,EAAUC,EAAG,IAAC,EAAE,EAChBC,EAAmBD,EAAG,IAAC,KAAK,KAAK,EACjCE,EAAQF,EAAG,IAAC,EAAE,EACdG,EAAOH,EAAG,IAAC,IAAI,EACfI,EAAcJ,EAAG,IAAC,IAAI,EACtBK,EAAQL,EAAAA,IAAI,CAChB,kBAAmB,GACnB,gBAAiB,GACjB,kBAAmB,GACnB,gBAAiB,GACjB,kBAAmB,GACnB,uBAAwB,GACxB,yBAA0B,GAC1B,gBAAiB,GACjB,yBAA0B,GAC1B,MAAO,GACP,MAAO,GACP,MAAO,CAAE,EACT,MAAO,CAAE,EACT,uBAAwB,GACxB,+BAAgC,GAChC,0BAA2B,GAC3B,cAAe,GACf,YAAa,GACb,iBAAkB,EACpB,CAAC,EACKM,EAAQN,EAAAA,IAAI,CAChB,iBAAkB,CAAC,CAAE,SAAU,GAAM,QAAS,SAAS,CAAG,EAC1D,cAAe,CAAC,CAAE,SAAU,GAAM,QAAS,WAAW,CAAE,EACxD,YAAa,CAAC,CAAE,SAAU,GAAM,QAAS,WAAW,CAAE,EACtD,0BAA2B,CAAC,CAAE,SAAU,GAAM,QAAS,SAAS,CAAE,EAClE,yBAA0B,CAAC,CAAE,SAAU,GAAM,QAAS,SAAS,CAAE,EACjE,uBAAwB,CAAC,CAAE,SAAU,GAAM,QAAS,SAAS,CAAE,EAC/D,+BAAgC,CAAC,CAAE,SAAU,GAAM,QAAS,SAAS,CAAE,CACzE,CAAC,EAGKO,EAAeP,EAAAA,IAAI,CACvB,cAAe,OACf,mBAAoB,OACpB,gBAAiB,OACjB,kBAAmB,OACnB,mBAAoB,OACpB,oBAAqB,OACrB,iBAAkB,OAClB,yBAA0B,MAC5B,CAAC,EAEKQ,EAAeR,EAAAA,IAAI,CACvB,cAAe,CAAC,CAAE,SAAU,GAAM,QAAS,SAAS,CAAE,CAGxD,CAAC,EAGmBA,EAAG,IAAC,EAAE,EAC1B,MAAMS,EAAaT,EAAG,IAAC,EAAE,EACnBU,EAAgBV,EAAG,IAAC,EAAE,EAwBtBW,EAAgB,IAAM,CAC1BR,EAAK,MAAM,SAAU,EAAC,KAAK,MAAO,CAAE,MAAAS,EAAO,OAAAC,KAAa,CAClDD,IACEP,EAAM,MAAM,0BACF,MAAMS,mBAAiB,CACjC,GAAGT,EAAM,MACT,cAAeU,EAAU,WAACV,EAAM,MAAM,aAAa,EACnD,YAAaU,EAAU,WAACV,EAAM,MAAM,WAAW,EAC/C,gBAAiB,SAC3B,CAAS,GACO,OAAS,MACfW,EAAG,MAAC,UAAU,CAAE,MAAO,OAAQ,KAAM,UAAW,EAChD,WAAW,IAAM,CACfA,EAAAA,MAAI,aAAc,CACnB,EAAE,GAAI,IAGG,MAAMC,oBAAkB,CAClC,GAAGZ,EAAM,MACT,cAAeU,EAAU,WAACV,EAAM,MAAM,aAAa,EACnD,YAAaU,EAAU,WAACV,EAAM,MAAM,WAAW,EAC/C,gBAAiB,SAC3B,CAAS,GACO,OAAS,MACfW,EAAG,MAAC,UAAU,CAAE,MAAO,OAAQ,KAAM,UAAW,EAChD,WAAW,IAAM,CACfA,EAAAA,MAAI,aAAc,CACnB,EAAE,GAAI,GAIjB,CAAG,EACE,MAAOE,GAAU,CAChBF,EAAAA,MAAY,MAAA,MAAA,8BAAAE,EAAO,OAAO,CAChC,CAAK,CACL,EAGMC,EAAUC,EAAAA,SAAS,IAAM,EAAErB,EAAQ,QAAU,WAAaA,EAAQ,QAAU,UAAU,EAGtFsB,EAAU,SAAY,CAC1B,MAAMC,EAAM,MAAMC,kBAAiB,EACnClB,EAAM,MAAM,kBAAoBiB,EAAI,KAAK,SACzCjB,EAAM,MAAM,gBAAkBiB,EAAI,KAAK,OACvCjB,EAAM,MAAM,gBAAkBiB,EAAI,KAAK,OACvCjB,EAAM,MAAM,uBAAyBiB,EAAI,KAAK,cAC9CjB,EAAM,MAAM,gBAAkBiB,EAAI,KAAK,OACvCjB,EAAM,MAAM,kBAAoBiB,EAAI,KAAK,SACzCjB,EAAM,MAAM,kBAAoBiB,EAAI,KAAK,SACzCjB,EAAM,MAAM,yBAA2BiB,EAAI,KAAK,eAClD,EAE2BtB,EAAG,IAAC,EAAE,EACjC,MAAMwB,EAAYxB,EAAG,IAAC,EAAE,EAClByB,EAAU,MAAOC,EAAKC,IAAW,CACrC,MAAML,EAAM,MAAMM,EAAU,WAACF,CAAG,EAChCC,EAAO,MAAQL,EAAI,IACrB,EAGMO,EAAO7B,EAAAA,IAAI,CAAC,CAAA,CAAE,CAAC,EACf8B,EAAQ9B,EAAAA,IAAI,CAAC,CAAA,CAAE,CAAC,EAChB+B,EAAc/B,EAAG,IAAC,EAAE,EACpBgC,EAAY,MAAOC,GAAY,CACnC,MAAMX,EAAM,MAAMY,EAAY,aAACD,CAAO,EACtCJ,EAAK,MAAM,CAAC,EAAIP,EAAI,KACpBQ,EAAM,MAAM,CAAC,EAAIR,EAAI,KACrBS,EAAY,MAAQT,EAAI,IAC1B,EACMa,EAAe,MAAO,CAAE,aAAAC,EAAc,MAAAC,EAAO,QAAAC,EAAS,OAAAC,CAAM,IAAO,CACvE,GAAGF,EAAQ,EAAG,CACZ,MAAMf,EAAM,MAAMY,EAAY,aAAC,CAAE,KAAME,EAAa,KAAM,EACpDI,EAAWC,qBAAmBZ,EAAK,MAAMQ,CAAK,EAAGD,EAAa,KAAMd,EAAI,IAAI,EAC/Ee,GAAS,IACVR,EAAK,MAAQ,CAACE,EAAY,KAAK,GAE7BS,GAAYA,EAAS,QACvBX,EAAK,MAAMQ,EAAQ,CAAC,EAAIG,EACxBF,EAAQE,CAAQ,GAGhBD,EAAQ,CAEd,MACIA,EAAQ,CAEZ,EAEMG,EAAgB,MAAO,CAAE,aAAAN,EAAc,MAAAC,EAAO,QAAAC,EAAS,OAAAC,CAAM,IAAO,CACxE,GAAGF,EAAQ,EAAG,CACZ,MAAMf,EAAM,MAAMY,EAAY,aAAC,CAAE,KAAME,EAAa,KAAM,EACpDI,EAAWC,qBAAmBX,EAAM,MAAMO,CAAK,EAAGD,EAAa,KAAMd,EAAI,IAAI,EAChFe,GAAS,IACVP,EAAM,MAAQ,CAACC,EAAY,KAAK,GAE9BS,GAAYA,EAAS,QACvBV,EAAM,MAAMO,EAAQ,CAAC,EAAIG,EACzBF,EAAQE,CAAQ,GAGhBD,EAAQ,CAEd,MACIA,EAAQ,CAEZ,EAEMI,EAAgB,CAAC,CAAE,MAAAC,EAAO,cAAAC,KAAoB,CAClDxC,EAAM,MAAM,MAAQuC,EACpBvC,EAAM,MAAM,yBAA2BuC,EAAM,CAAC,CAEhD,EACME,EAAiB,CAAC,CAAE,MAAAF,EAAO,cAAAC,KAAoB,CACnDxC,EAAM,MAAM,MAAQuC,EACpBvC,EAAM,MAAM,uBAAyBuC,EAAM,CAAC,CAE9C,EAEAG,EAAAA,YAAY,IAAM,SAChB,GAAI,CAAC1C,EAAM,MAAM,0BAA4B,CAACA,EAAM,MAAM,uBAAwB,CAChFA,EAAM,MAAM,+BAAiC,GAC7C,MACD,CACD,MAAM2C,GAAKC,EAAA5C,EAAM,MAAM,2BAAZ,YAAA4C,EAAsC,UAAU,EAAG,GACxDC,GAAKC,EAAA9C,EAAM,MAAM,yBAAZ,YAAA8C,EAAoC,UAAU,EAAG,GAC5D9C,EAAM,MAAM,+BAAiC2C,IAAOE,EAAK,IAAM,GACjE,CAAC,EAGD,MAAME,EAAcpD,EAAG,IAAC,EAAE,EACpBqD,EAAU,SAAY,CAC1B,MAAM/B,EAAM,MAAMgC,aAAY,EAC9BF,EAAY,MAAQ9B,EAAI,KACpBA,EAAI,KAAK,SACXjB,EAAM,MAAM,gBAAkBiB,EAAI,KAAK,CAAC,EAAE,OAE9C,EAGMiC,EAAiB,MAAOC,GAAO,CACnC,MAAMlC,EAAM,MAAMmC,EAAiB,kBAACD,CAAE,EACtCnD,EAAM,MAAQ,CACZ,GAAGiB,EAAI,KACP,MAAO,CAACA,EAAI,KAAK,2BAA4BA,EAAI,KAAK,uBAAwBA,EAAI,KAAK,wBAAwB,EAC/G,MAAO,CAACA,EAAI,KAAK,yBAA0BA,EAAI,KAAK,qBAAsBA,EAAI,KAAK,sBAAsB,CAC1G,EACDf,EAAa,MAAQ,CACnB,GAAGA,EAAa,MAChB,gBAAiBF,EAAM,MAAM,gBAC7B,iBAAkBA,EAAM,MAAM,iBAC9B,oBAAqBA,EAAM,MAAM,oBACjC,cAAeA,EAAM,MAAM,aAC5B,EACDsC,EAAc,CAAE,MAAOtC,EAAM,MAAM,KAAK,CAAE,EAC1CyC,EAAe,CAAE,MAAOzC,EAAM,MAAM,KAAK,CAAE,CAC7C,EAGMqD,EAAkBC,GAAS,CAC/B1D,EAAiB,MAAQI,EAAM,MAAMsD,IAAS,EAAI,gBAAkB,aAAa,GAAK,KAAK,IAAK,CAClG,EAEAC,EAAAA,UAAU,IAAM,CACdvC,EAAS,EACTgC,EAAS,EAET5B,EAAQ,aAAcD,CAAS,CAEjC,CAAC,EAGDqC,EAAM,OAAC,MAAOC,GAAU,CACtB,GAAI,CACA9C,EAAAA,MAAI,YAAY,CAAE,MAAO,QAAQ,CAAE,EACnCjB,EAAQ,MAAQ+D,EAAM,KACtB5D,EAAM,MAAQ4D,EAAM,GACpB,MAAM9B,EAAW,EACb9B,EAAM,QACR,MAAMqD,EAAerD,EAAM,KAAK,GAC7BH,EAAQ,QAAU,WAAaA,EAAQ,QAAU,aAClD,MAAMgE,EAAQ,EACd,MAAMC,EAAW,IAGrBhD,EAAAA,MAAI,YAAa,CAClB,MAAW,CACVA,EAAAA,MAAI,YAAa,CAClB,CACL,CAAC,EAID,MAAMiD,EAA4B,CAAC,CAAE,MAAArB,KAAY,CAC/C,MAAMsB,EAASxD,EAAc,MAAM,KAAKyD,GAAQA,EAAK,WAAavB,CAAK,EACvErC,EAAa,MAAM,kBAAoB2D,EAAO,UAChD,EACME,EAAyB,CAAC,CAAE,MAAAxB,KAAY,CAC5C,MAAMyB,EAAM5D,EAAW,MAAM,KAAK0D,GAAQA,EAAK,YAAcvB,CAAK,EAClErC,EAAa,MAAM,mBAAqB8D,EAAI,YAC5C9D,EAAa,MAAM,kBAAoB8D,EAAI,WAC3C9D,EAAa,MAAM,gBAAkB8D,EAAI,QAC3C,EAEMC,EAAiBC,GAAW,CAChCnE,EAAY,MAAM,SAAU,EAAC,KAAK,MAAO,CAAE,MAAAQ,EAAO,OAAAC,KAAa,CAC7D,GAAID,EAAO,CACT,GAAGP,EAAM,MAAM,WAAa,QAAS,CACnC,GAAG,CAACE,EAAa,MAAM,iBAAkB,CACvCS,EAAG,MAAC,UAAU,CAAE,MAAO,QAAS,KAAM,OAAQ,EAC9C,MACD,CACD,GAAG,CAACT,EAAa,MAAM,gBAAiB,CACtCS,EAAG,MAAC,UAAU,CAAE,MAAO,QAAS,KAAM,OAAQ,EAC9C,MACD,CACF,EACW,MAAMwD,cAAY,CAC5B,GAAGjE,EAAa,MAChB,mBAAoBgE,EACpB,OAAQlE,EAAM,MAAM,OACpB,SAAUA,EAAM,MAAM,SACtB,yBAA0BA,EAAM,MAAM,wBAC9C,CAAO,GACO,OAAS,MACfW,EAAG,MAAC,UAAU,CAAE,MAAO,OAAQ,KAAM,UAAW,EAChD,WAAW,IAAM,CACfA,EAAAA,MAAI,aAAc,CACnB,EAAE,GAAI,EAEV,CACL,CAAG,EACE,MAAOE,GAAU,CAChBF,EAAAA,MAAY,MAAA,MAAA,8BAAAE,EAAO,OAAO,CAChC,CAAK,CACL,EAGM6C,EAAS,SAAY,CACzB,MAAMzC,EAAM,MAAMmD,EAAS,UAAC,CAAE,iBAAkB,IAAK,OAAQpE,EAAM,MAAM,uBAAwB,EACjGI,EAAW,MAAQa,EAAI,KAAK,IAAI6C,IAAS,CACvC,GAAGA,EACH,MAAO,GAAGA,EAAK,WAAW,IAAIA,EAAK,UAAU,IAAIA,EAAK,eAAe,EACzE,EAAI,CACJ,EAGMH,EAAY,SAAY,CAC5B,MAAM1C,EAAM,MAAMoD,EAAY,aAAC,CAAE,iBAAkB,IAAK,OAAQrE,EAAM,MAAM,uBAAwB,EACpGK,EAAc,MAAQY,EAAI,KAAK,IAAI6C,IAAS,CAC1C,GAAGA,EACH,MAAO,GAAGA,EAAK,UAAU,IAAIA,EAAK,aAAa,IAAIA,EAAK,eAAe,EAC3E,EAAI,CACJ,EAEMQ,EAAYC,GAAM,CACtB5D,EAAAA,MAAI,aAAa,CACf,KAAM,CAAC,yBAAyBX,EAAM,MAAM,SAAS,EAAE,CAC3D,CAAG,CAGH,+tJC/VA,GAAG,WAAWwE,EAAe"}