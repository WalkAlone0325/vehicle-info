{"version":3,"file":"edit-password.js","sources":["pages/mine/edit-password.vue","pages/mine/edit-password.vue?type=page"],"sourcesContent":["<script setup lang=\"ts\">\nimport { ref } from 'vue'\nimport { updatePwd } from '@/api'\n\nconst form = ref()\nconst model = ref({\n  oldPassword: '',\n  newPassword: '',\n  newPassword2: ''\n})\n\nconst rules = {\n  oldPassword: [{ required: true, message: '请填写旧密码' }],\n  newPassword: [{ required: true, message: '请填写新密码' }],\n  newPassword2: [{ required: true, message: '请再次输入新密码' }]\n}\n\nconst handleSubmit = () => {\n  form.value\n    .validate()\n    .then(async ({\n      valid,\n      errors\n    }) => {\n      if (valid) {\n        const res = await updatePwd(model.value)\n        if (res.code === 200) {\n          uni.removeStorageSync('token')\n          uni.removeStorageSync('user')\n          uni.navigateTo({\n            url: '/pages/login/login'\n          })\n        }\n      }\n    })\n    .catch((error) => {\n      uni.__f__('log','at pages/mine/edit-password.vue:37',error, 'error')\n    })\n}\n</script>\n\n<template>\n  <view class=\"edit-password-page\">\n    <view class=\"form-con\">\n      <wd-message-box />\n      <wd-toast />\n      <wd-form ref=\"form\" :model=\"model\" :rules=\"rules\" errorType=\"toast\">\n        <wd-cell-group border>\n          <wd-input showPassword label=\"旧密码\" label-width=\"80px\" prop=\"oldPassword\" clearable v-model=\"model.oldPassword\"\n            placeholder=\"请输入旧密码\" />\n          <wd-input showPassword label=\"新密码\" label-width=\"80px\" prop=\"newPassword\" clearable v-model=\"model.newPassword\"\n            placeholder=\"请输入新密码\" />\n          <wd-input showPassword label=\"确认密码\" label-width=\"80px\" prop=\"newPassword2\" clearable\n            v-model=\"model.newPassword2\" placeholder=\"请再次输入新密码\" />\n        </wd-cell-group>\n        <view class=\"footer\">\n          <wd-button type=\"primary\" @click=\"handleSubmit\" block>提交</wd-button>\n        </view>\n      </wd-form>\n    </view>\n  </view>\n</template>\n\n\n<style lang=\"scss\" scoped>\n.footer {\n  padding: 0 30rpx;\n  margin-top: 50rpx;\n}\n</style>\n","import MiniProgramPage from '/Users/jing/Code/mini/vehicle-info/pages/mine/edit-password.vue'\nwx.createPage(MiniProgramPage)"],"names":["form","ref","model","rules","handleSubmit","valid","errors","updatePwd","uni","error","MiniProgramPage"],"mappings":"q5BAIA,MAAMA,EAAOC,EAAAA,MACPC,EAAQD,EAAAA,IAAI,CAChB,YAAa,GACb,YAAa,GACb,aAAc,EAAA,CACf,EAEKE,EAAQ,CACZ,YAAa,CAAC,CAAE,SAAU,GAAM,QAAS,SAAU,EACnD,YAAa,CAAC,CAAE,SAAU,GAAM,QAAS,SAAU,EACnD,aAAc,CAAC,CAAE,SAAU,GAAM,QAAS,WAAY,CAAA,EAGlDC,EAAe,IAAM,CACzBJ,EAAK,MACF,SACA,EAAA,KAAK,MAAO,CACX,MAAAK,EACA,OAAAC,CAAA,IACI,CACAD,IACU,MAAME,EAAAA,UAAUL,EAAM,KAAK,GAC/B,OAAS,MACfM,QAAI,kBAAkB,OAAO,EAC7BA,QAAI,kBAAkB,MAAM,EAC5BA,EAAAA,MAAI,WAAW,CACb,IAAK,oBAAA,CACN,EAEL,CACD,EACA,MAAOC,GAAU,CAChBD,EAAA,MAAI,MAAM,MAAM,qCAAqCC,EAAO,OAAO,CAAA,CACpE,CAAA,2uBCpCL,GAAG,WAAWC,CAAe"}