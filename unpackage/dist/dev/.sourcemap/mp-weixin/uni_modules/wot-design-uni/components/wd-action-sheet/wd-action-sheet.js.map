{"version":3,"file":"wd-action-sheet.js","sources":["uni_modules/wot-design-uni/components/wd-action-sheet/wd-action-sheet.vue","/Users/jing/Code/mini/vehicle-info/uni_modules/wot-design-uni/components/wd-action-sheet/wd-action-sheet.vue?type=component"],"sourcesContent":["<template>\n  <view>\n    <wd-popup\n      custom-class=\"wd-action-sheet__popup\"\n      :custom-style=\"`${(actions && actions.length) || (panels && panels.length) ? 'background: transparent;' : ''}`\"\n      v-model=\"showPopup\"\n      :duration=\"duration\"\n      position=\"bottom\"\n      :close-on-click-modal=\"closeOnClickModal\"\n      :safe-area-inset-bottom=\"safeAreaInsetBottom\"\n      :lazy-render=\"lazyRender\"\n      @enter=\"handleOpen\"\n      @close=\"close\"\n      @after-enter=\"handleOpened\"\n      @after-leave=\"handleClosed\"\n      @click-modal=\"handleClickModal\"\n      :z-index=\"zIndex\"\n    >\n      <view\n        :class=\"`wd-action-sheet ${customClass}`\"\n        :style=\"`${\n          (actions && actions.length) || (panels && panels.length)\n            ? 'margin: 0 10px calc(var(--window-bottom) + 10px) 10px; border-radius: 16px;'\n            : 'margin-bottom: var(--window-bottom);'\n        } ${customStyle}`\"\n      >\n        <view v-if=\"title\" :class=\"`wd-action-sheet__header ${customHeaderClass}`\">\n          {{ title }}\n          <wd-icon custom-class=\"wd-action-sheet__close\" name=\"add\" @click=\"close\" />\n        </view>\n        <view class=\"wd-action-sheet__actions\" v-if=\"actions && actions.length\">\n          <button\n            v-for=\"(action, rowIndex) in actions\"\n            :key=\"rowIndex\"\n            :class=\"`wd-action-sheet__action ${action.disabled ? 'wd-action-sheet__action--disabled' : ''}  ${\n              action.loading ? 'wd-action-sheet__action--loading' : ''\n            }`\"\n            :style=\"`color: ${action.color}`\"\n            @click=\"select(rowIndex, 'action')\"\n          >\n            <wd-loading custom-class=\"`wd-action-sheet__action-loading\" v-if=\"action.loading\" />\n            <view v-else class=\"wd-action-sheet__name\">{{ action.name }}</view>\n            <view v-if=\"!action.loading && action.subname\" class=\"wd-action-sheet__subname\">{{ action.subname }}</view>\n          </button>\n        </view>\n        <view v-if=\"formatPanels && formatPanels.length\">\n          <view v-for=\"(panel, rowIndex) in formatPanels\" :key=\"rowIndex\" class=\"wd-action-sheet__panels\">\n            <view class=\"wd-action-sheet__panels-content\">\n              <view v-for=\"(col, colIndex) in panel\" :key=\"colIndex\" class=\"wd-action-sheet__panel\" @click=\"select(rowIndex, 'panels', colIndex)\">\n                <image class=\"wd-action-sheet__panel-img\" :src=\"(col as any).iconUrl\" />\n                <view class=\"wd-action-sheet__panel-title\">{{ (col as any).title }}</view>\n              </view>\n            </view>\n          </view>\n        </view>\n        <slot />\n        <button v-if=\"cancelText\" class=\"wd-action-sheet__cancel\" @click=\"handleCancel\">{{ cancelText }}</button>\n      </view>\n    </wd-popup>\n  </view>\n</template>\n<script lang=\"ts\">\nexport default {\n  name: 'wd-action-sheet',\n  options: {\n    addGlobalClass: true,\n    virtualHost: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport wdPopup from '../wd-popup/wd-popup.vue'\nimport wdIcon from '../wd-icon/wd-icon.vue'\nimport wdLoading from '../wd-loading/wd-loading.vue'\nimport { watch, ref } from 'vue'\nimport { actionSheetProps, type Panel } from './types'\nimport { isArray } from '../common/util'\n\nconst props = defineProps(actionSheetProps)\nconst emit = defineEmits(['select', 'click-modal', 'cancel', 'closed', 'close', 'open', 'opened', 'update:modelValue'])\n\nconst formatPanels = ref<Array<Panel> | Array<Panel[]>>([])\n\nconst showPopup = ref<boolean>(false)\n\nwatch(() => props.panels, computedValue, { deep: true, immediate: true })\n\nwatch(\n  () => props.modelValue,\n  (newValue) => {\n    showPopup.value = newValue\n  },\n  { deep: true, immediate: true }\n)\n\nfunction isPanelArray() {\n  return props.panels.length && !isArray(props.panels[0])\n}\nfunction computedValue() {\n  formatPanels.value = isPanelArray() ? [props.panels as Panel[]] : (props.panels as Panel[][])\n}\n\nfunction select(rowIndex: number, type: 'action' | 'panels', colIndex?: number) {\n  if (type === 'action') {\n    if (props.actions[rowIndex].disabled || props.actions[rowIndex].loading) {\n      return\n    }\n    emit('select', {\n      item: props.actions[rowIndex],\n      index: rowIndex\n    })\n  } else if (isPanelArray()) {\n    emit('select', {\n      item: props.panels[Number(colIndex)],\n      index: colIndex\n    })\n  } else {\n    emit('select', {\n      item: (props.panels as Panel[][])[rowIndex][Number(colIndex)],\n      rowIndex,\n      colIndex\n    })\n  }\n  if (props.closeOnClickAction) {\n    close()\n  }\n}\nfunction handleClickModal() {\n  emit('click-modal')\n}\nfunction handleCancel() {\n  emit('cancel')\n  close()\n}\nfunction close() {\n  emit('update:modelValue', false)\n  emit('close')\n}\nfunction handleOpen() {\n  emit('open')\n}\nfunction handleOpened() {\n  emit('opened')\n}\nfunction handleClosed() {\n  emit('closed')\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","import Component from '/Users/jing/Code/mini/vehicle-info/uni_modules/wot-design-uni/components/wd-action-sheet/wd-action-sheet.vue'\nwx.createComponent(Component)"],"names":["wdPopup","wdIcon","wdLoading","__default__","props","__props","emit","__emit","formatPanels","ref","showPopup","watch","computedValue","newValue","isPanelArray","isArray","select","rowIndex","type","colIndex","close","handleClickModal","handleCancel","handleOpen","handleOpened","handleClosed","Component"],"mappings":"oIAyEA,MAAAA,EAAoB,IAAA,0BACpBC,EAAmB,IAAA,wBACnBC,EAAsB,IAAA,8BAbtBC,EAAe,CACb,KAAM,kBACN,QAAS,CACP,eAAgB,GAChB,YAAa,GACb,eAAgB,QAClB,CACF,oKAWA,MAAMC,EAAQC,EACRC,EAAOC,EAEPC,EAAeC,MAAmC,CAAA,CAAE,EAEpDC,EAAYD,MAAa,EAAK,EAE9BE,QAAA,IAAMP,EAAM,OAAQQ,EAAe,CAAE,KAAM,GAAM,UAAW,EAAA,CAAM,EAExED,EAAA,MACE,IAAMP,EAAM,WACXS,GAAa,CACZH,EAAU,MAAQG,CACpB,EACA,CAAE,KAAM,GAAM,UAAW,EAAK,CAAA,EAGhC,SAASC,GAAe,CACf,OAAAV,EAAM,OAAO,QAAU,CAACW,UAAQX,EAAM,OAAO,CAAC,CAAC,CACxD,CACA,SAASQ,GAAgB,CACvBJ,EAAa,MAAQM,IAAiB,CAACV,EAAM,MAAiB,EAAKA,EAAM,MAC3E,CAES,SAAAY,EAAOC,EAAkBC,EAA2BC,EAAmB,CAC9E,GAAID,IAAS,SAAU,CACjB,GAAAd,EAAM,QAAQa,CAAQ,EAAE,UAAYb,EAAM,QAAQa,CAAQ,EAAE,QAC9D,OAEFX,EAAK,SAAU,CACb,KAAMF,EAAM,QAAQa,CAAQ,EAC5B,MAAOA,CAAA,CACR,CAAA,MACQH,IACTR,EAAK,SAAU,CACb,KAAMF,EAAM,OAAO,OAAOe,CAAQ,CAAC,EACnC,MAAOA,CAAA,CACR,EAEDb,EAAK,SAAU,CACb,KAAOF,EAAM,OAAqBa,CAAQ,EAAE,OAAOE,CAAQ,CAAC,EAC5D,SAAAF,EACA,SAAAE,CAAA,CACD,EAECf,EAAM,oBACFgB,GAEV,CACA,SAASC,GAAmB,CAC1Bf,EAAK,aAAa,CACpB,CACA,SAASgB,GAAe,CACtBhB,EAAK,QAAQ,EACPc,GACR,CACA,SAASA,GAAQ,CACfd,EAAK,oBAAqB,EAAK,EAC/BA,EAAK,OAAO,CACd,CACA,SAASiB,GAAa,CACpBjB,EAAK,MAAM,CACb,CACA,SAASkB,GAAe,CACtBlB,EAAK,QAAQ,CACf,CACA,SAASmB,GAAe,CACtBnB,EAAK,QAAQ,CACf,2lDCnJA,GAAG,gBAAgBoB,CAAS"}