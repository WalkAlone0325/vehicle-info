{"version":3,"file":"wd-text.js","sources":["uni_modules/wot-design-uni/components/wd-text/wd-text.vue","/Users/jing/Code/mini/vehicle-info/uni_modules/wot-design-uni/components/wd-text/wd-text.vue?type=component"],"sourcesContent":["<template>\n  <text @click=\"handleClick\" :class=\"rootClass\" :style=\"rootStyle\">\n    <slot v-if=\"$slots.prefix || prefix\" name=\"prefix\">{{ prefix }}</slot>\n    <text>{{ formattedText }}</text>\n    <slot v-if=\"$slots.suffix || suffix\" name=\"suffix\">{{ suffix }}</slot>\n  </text>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  name: 'wd-text',\n  options: {\n    virtualHost: true,\n    addGlobalClass: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport { computed, ref, watch } from 'vue'\nimport { isDef, objToStyle } from '../common/util'\nimport { textProps } from './types'\nimport { dayjs } from '../common/dayjs'\n\n// 获取组件的 props 和 emit 函数\nconst props = defineProps(textProps)\nconst emit = defineEmits(['click'])\n\n// 存储文本类名的响应式变量\nconst textClass = ref<string>('')\n\n// 监听 props 变化，合并 watch 逻辑\nwatch(\n  () => ({\n    type: props.type,\n    text: props.text,\n    mode: props.mode,\n    color: props.color,\n    bold: props.bold,\n    lines: props.lines,\n    format: props.format\n  }),\n  ({ type }) => {\n    // 验证 type 属性\n    const types = ['primary', 'error', 'warning', 'success', 'default']\n    if (type && !types.includes(type)) {\n      uni.__f__('error','at uni_modules/wot-design-uni/components/wd-text/wd-text.vue:48',`type must be one of ${types.toString()}`)\n    }\n    computeTextClass()\n  },\n  { deep: true, immediate: true }\n)\n\n// 计算根元素的类名\nconst rootClass = computed(() => {\n  return `wd-text ${props.customClass} ${textClass.value}`\n})\n\n// 计算根元素的样式\nconst rootStyle = computed(() => {\n  const rootStyle: Record<string, any> = {}\n  if (props.color) {\n    rootStyle['color'] = props.color\n  }\n  if (props.size) {\n    rootStyle['font-size'] = `${props.size}`\n  }\n  if (props.lineHeight) {\n    rootStyle['line-height'] = `${props.lineHeight}`\n  }\n  if (props.decoration) {\n    rootStyle['text-decoration'] = `${props.decoration}`\n  }\n  return `${objToStyle(rootStyle)}${props.customStyle}`\n})\n\n// 计算文本类名的函数\nfunction computeTextClass() {\n  const { type, color, bold, lines } = props\n  const textClassList: string[] = []\n  if (!color) {\n    textClassList.push(`is-${type}`)\n  }\n  if (isDef(lines)) {\n    textClassList.push(`is-lines-${lines}`)\n  }\n  bold && textClassList.push('is-bold')\n  textClass.value = textClassList.join(' ')\n}\n\n// 格式化文本的函数\nfunction formatText(text: string, format: boolean, mode: string): string {\n  if (format) {\n    if (mode === 'phone') {\n      return text.replace(/^(\\d{3})\\d{4}(\\d{4})$/, '$1****$2')\n    } else if (mode === 'name') {\n      return text.replace(/^(.).*(.)$/, '$1**$2')\n    } else {\n      throw new Error('mode must be one of phone or name for encryption')\n    }\n  }\n  return text\n}\n\n// 格式化数字的函数\nfunction formatNumber(num: number | string): string {\n  num = Number(num).toFixed(2)\n  const x = num.split('.')\n  let x1 = x[0]\n  const x2 = x.length > 1 ? '.' + x[1] : ''\n  const rgx = /(\\d+)(\\d{3})/\n  while (rgx.test(x1)) {\n    x1 = x1.replace(rgx, '$1,$2')\n  }\n  return x1 + x2\n}\n\n// 计算格式化后的文本\nconst formattedText = computed(() => {\n  const { text, mode, format } = props\n  if (mode === 'date') {\n    return dayjs(Number(text)).format('YYYY-MM-DD')\n  }\n  if (mode === 'price') {\n    return formatNumber(text)\n  }\n  return formatText(`${text}`, format, mode)\n})\n\n// 处理点击事件\nfunction handleClick(event: Event) {\n  emit('click', event)\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","import Component from '/Users/jing/Code/mini/vehicle-info/uni_modules/wot-design-uni/components/wd-text/wd-text.vue'\nwx.createComponent(Component)"],"names":["__default__","props","__props","emit","__emit","textClass","ref","watch","type","types","uni","computeTextClass","rootClass","computed","rootStyle","objToStyle","color","bold","lines","textClassList","isDef","formatText","text","format","mode","formatNumber","num","x","x1","x2","rgx","formattedText","dayjs","handleClick","event","Component"],"mappings":"oJASAA,EAAe,CACb,KAAM,UACN,QAAS,CACP,YAAa,GACb,eAAgB,GAChB,eAAgB,QAClB,CACF,gFAUA,MAAMC,EAAQC,EACRC,EAAOC,EAGPC,EAAYC,MAAY,EAAE,EAGhCC,EAAA,MACE,KAAO,CACL,KAAMN,EAAM,KACZ,KAAMA,EAAM,KACZ,KAAMA,EAAM,KACZ,MAAOA,EAAM,MACb,KAAMA,EAAM,KACZ,MAAOA,EAAM,MACb,OAAQA,EAAM,MAAA,GAEhB,CAAC,CAAE,KAAAO,CAAA,IAAW,CAEZ,MAAMC,EAAQ,CAAC,UAAW,QAAS,UAAW,UAAW,SAAS,EAC9DD,GAAQ,CAACC,EAAM,SAASD,CAAI,GAC9BE,QAAI,MAAM,QAAQ,kEAAkE,uBAAuBD,EAAM,UAAU,EAAE,EAE9GE,GACnB,EACA,CAAE,KAAM,GAAM,UAAW,EAAK,CAAA,EAI1B,MAAAC,EAAYC,EAAAA,SAAS,IAClB,WAAWZ,EAAM,WAAW,IAAII,EAAU,KAAK,EACvD,EAGKS,EAAYD,EAAAA,SAAS,IAAM,CAC/B,MAAMC,EAAiC,CAAA,EACvC,OAAIb,EAAM,QACRa,EAAU,MAAWb,EAAM,OAEzBA,EAAM,OACRa,EAAU,WAAW,EAAI,GAAGb,EAAM,IAAI,IAEpCA,EAAM,aACRa,EAAU,aAAa,EAAI,GAAGb,EAAM,UAAU,IAE5CA,EAAM,aACRa,EAAU,iBAAiB,EAAI,GAAGb,EAAM,UAAU,IAE7C,GAAGc,EAAAA,WAAWD,CAAS,CAAC,GAAGb,EAAM,WAAW,EAAA,CACpD,EAGD,SAASU,GAAmB,CAC1B,KAAM,CAAE,KAAAH,EAAM,MAAAQ,EAAO,KAAAC,EAAM,MAAAC,GAAUjB,EAC/BkB,EAA0B,CAAA,EAC3BH,GACWG,EAAA,KAAK,MAAMX,CAAI,EAAE,EAE7BY,EAAAA,MAAMF,CAAK,GACCC,EAAA,KAAK,YAAYD,CAAK,EAAE,EAEhCD,GAAAE,EAAc,KAAK,SAAS,EAC1Bd,EAAA,MAAQc,EAAc,KAAK,GAAG,CAC1C,CAGS,SAAAE,EAAWC,EAAcC,EAAiBC,EAAsB,CACvE,GAAID,EAAQ,CACV,GAAIC,IAAS,QACJ,OAAAF,EAAK,QAAQ,wBAAyB,UAAU,EACzD,GAAWE,IAAS,OACX,OAAAF,EAAK,QAAQ,aAAc,QAAQ,EAEpC,MAAA,IAAI,MAAM,kDAAkD,CAEtE,CACO,OAAAA,CACT,CAGA,SAASG,EAAaC,EAA8B,CAClDA,EAAM,OAAOA,CAAG,EAAE,QAAQ,CAAC,EACrB,MAAAC,EAAID,EAAI,MAAM,GAAG,EACnB,IAAAE,EAAKD,EAAE,CAAC,EACZ,MAAME,EAAKF,EAAE,OAAS,EAAI,IAAMA,EAAE,CAAC,EAAI,GACjCG,EAAM,eACL,KAAAA,EAAI,KAAKF,CAAE,GACXA,EAAAA,EAAG,QAAQE,EAAK,OAAO,EAE9B,OAAOF,EAAKC,CACd,CAGM,MAAAE,EAAgBlB,EAAAA,SAAS,IAAM,CACnC,KAAM,CAAE,KAAAS,EAAM,KAAAE,EAAM,OAAAD,CAAA,EAAWtB,EAC/B,OAAIuB,IAAS,OACJQ,EAAAA,MAAM,OAAOV,CAAI,CAAC,EAAE,OAAO,YAAY,EAE5CE,IAAS,QACJC,EAAaH,CAAI,EAEnBD,EAAW,GAAGC,CAAI,GAAIC,EAAQC,CAAI,CAAA,CAC1C,EAGD,SAASS,EAAYC,EAAc,CACjC/B,EAAK,QAAS+B,CAAK,CACrB,6RCpIA,GAAG,gBAAgBC,CAAS"}