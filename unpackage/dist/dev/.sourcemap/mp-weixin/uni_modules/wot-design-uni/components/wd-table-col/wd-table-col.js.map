{"version":3,"file":"wd-table-col.js","sources":["uni_modules/wot-design-uni/components/wd-table-col/wd-table-col.vue","/Users/jing/Code/mini/vehicle-info/uni_modules/wot-design-uni/components/wd-table-col/wd-table-col.vue?type=component"],"sourcesContent":["<template>\n  <view\n    :class=\"`wd-table-col ${fixed ? 'wd-table-col--fixed' : ''} ${isLastFixed && isDef(table) && table.state.scrollLeft ? 'is-shadow' : ''}`\"\n    :style=\"columnStyle\"\n  >\n    <view\n      :class=\"`wd-table__cell ${stripe && isOdd(index) ? 'is-stripe' : ''} ${border ? 'is-border' : ''} is-${align}`\"\n      v-for=\"(row, index) in column\"\n      :key=\"index\"\n      :style=\"cellStyle\"\n      @click=\"handleRowClick(index)\"\n    >\n      <slot name=\"value\" v-if=\"$slots.value\" :row=\"getScope(index)\" :index=\"index\"></slot>\n      <text :class=\"`wd-table__value ${ellipsis ? 'is-ellipsis' : ''}`\" v-else>{{ row }}</text>\n    </view>\n  </view>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  name: 'wd-table-col',\n  options: {\n    addGlobalClass: true,\n    virtualHost: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n<script lang=\"ts\" setup>\nimport { type CSSProperties, computed, ref } from 'vue'\nimport { addUnit, isDef, objToStyle, isOdd, isFunction } from '../common/util'\nimport { tableColumnProps, type SortDirection } from './types'\nimport { useParent } from '../composables/useParent'\nimport { TABLE_KEY } from '../wd-table/types'\n\nconst props = defineProps(tableColumnProps)\n\nconst { parent: table, index: columnIndex } = useParent(TABLE_KEY)\n\nconst sortDirection = ref<SortDirection>(0) // 排序方向\n\n// 是否开启斑马纹\nconst stripe = computed(() => {\n  if (isDef(table)) {\n    return table.props.stripe\n  } else {\n    return false\n  }\n})\n\n/**\n * 是否有边框\n */\nconst border = computed(() => {\n  if (isDef(table)) {\n    return table.props.border\n  } else {\n    return false\n  }\n})\n\n/**\n * 是否超出省略\n */\nconst ellipsis = computed(() => {\n  if (isDef(table)) {\n    return table.props.ellipsis\n  } else {\n    return false\n  }\n})\n\n/**\n * 是否最后一个固定元素\n */\nconst isLastFixed = computed(() => {\n  let isLastFixed: boolean = false\n  if (props.fixed && isDef(table)) {\n    isLastFixed = table.getIsLastFixed(props)\n  }\n  return isLastFixed\n})\n\n/**\n * 列样式\n */\nconst columnStyle = computed(() => {\n  let style: CSSProperties = {}\n  if (isDef(props.width)) {\n    style['width'] = addUnit(props.width)\n  }\n  if (props.fixed && isDef(table) && isFunction(table.getFixedStyle)) {\n    style = table.getFixedStyle(columnIndex.value, style)\n  }\n  return style\n})\n\n/**\n * 单元格样式\n */\nconst cellStyle = computed(() => {\n  let style: CSSProperties = {}\n  const rowHeight: string | number = isDef(table) && isDef(table.props) ? table.props.rowHeight : 50 // 自定义行高\n  if (isDef(rowHeight)) {\n    style['height'] = addUnit(rowHeight)\n  }\n  if (props.fixed && isDef(table) && isFunction(table.getFixedStyle)) {\n    style = table.getFixedStyle(columnIndex.value, style)\n  }\n  return objToStyle(style)\n})\n\n// 列数据\nconst column = computed(() => {\n  if (!isDef(table) || !isDef(table.props) || !isDef(table.props.data) || !Array.isArray(table.props.data)) {\n    return []\n  }\n\n  const column: any[] = table.props.data.map((item) => {\n    return item[props.prop]\n  })\n  return column\n})\n\n/**\n * 行点击事件\n * @param index 行下标\n */\nfunction handleRowClick(index: number) {\n  if (!isDef(table)) {\n    return\n  }\n  isFunction(table.rowClick) && table.rowClick(index)\n}\n\n// 行数据\nfunction getScope(index: number) {\n  if (!isDef(table) || !isDef(table.props) || !isDef(table.props.data) || !Array.isArray(table.props.data)) {\n    return {}\n  }\n  return table.props.data[index] || {}\n}\n\ndefineExpose({ sortDirection: sortDirection })\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","import Component from '/Users/jing/Code/mini/vehicle-info/uni_modules/wot-design-uni/components/wd-table-col/wd-table-col.vue'\nwx.createComponent(Component)"],"names":["__default__","props","__props","table","columnIndex","useParent","TABLE_KEY","sortDirection","ref","stripe","computed","isDef","border","ellipsis","isLastFixed","columnStyle","style","addUnit","isFunction","cellStyle","rowHeight","objToStyle","column","item","handleRowClick","index","getScope","__expose","Component"],"mappings":"+LAmBAA,EAAe,CACb,KAAM,eACN,QAAS,CACP,eAAgB,GAChB,YAAa,GACb,eAAgB,QAClB,CACF,yEASA,MAAMC,EAAQC,EAER,CAAE,OAAQC,EAAO,MAAOC,GAAgBC,EAAAA,UAAUC,EAAAA,SAAS,EAE3DC,EAAgBC,MAAmB,CAAC,EAGpCC,EAASC,EAAAA,SAAS,IAClBC,EAAAA,MAAMR,CAAK,EACNA,EAAM,MAAM,OAEZ,EAEV,EAKKS,EAASF,EAAAA,SAAS,IAClBC,EAAAA,MAAMR,CAAK,EACNA,EAAM,MAAM,OAEZ,EAEV,EAKKU,EAAWH,EAAAA,SAAS,IACpBC,EAAAA,MAAMR,CAAK,EACNA,EAAM,MAAM,SAEZ,EAEV,EAKKW,EAAcJ,EAAAA,SAAS,IAAM,CACjC,IAAII,EAAuB,GAC3B,OAAIb,EAAM,OAASU,EAAM,MAAAR,CAAK,IAC5BW,EAAcX,EAAM,eAAeF,CAAK,GAEnCa,CAAA,CACR,EAKKC,EAAcL,EAAAA,SAAS,IAAM,CACjC,IAAIM,EAAuB,CAAA,EACvB,OAAAL,EAAA,MAAMV,EAAM,KAAK,IACnBe,EAAM,MAAWC,EAAQ,QAAAhB,EAAM,KAAK,GAElCA,EAAM,OAASU,QAAMR,CAAK,GAAKe,aAAWf,EAAM,aAAa,IAC/Da,EAAQb,EAAM,cAAcC,EAAY,MAAOY,CAAK,GAE/CA,CAAA,CACR,EAKKG,EAAYT,EAAAA,SAAS,IAAM,CAC/B,IAAIM,EAAuB,CAAA,EACrB,MAAAI,EAA6BT,EAAAA,MAAMR,CAAK,GAAKQ,EAAAA,MAAMR,EAAM,KAAK,EAAIA,EAAM,MAAM,UAAY,GAC5F,OAAAQ,EAAAA,MAAMS,CAAS,IACXJ,EAAA,OAAYC,EAAA,QAAQG,CAAS,GAEjCnB,EAAM,OAASU,QAAMR,CAAK,GAAKe,aAAWf,EAAM,aAAa,IAC/Da,EAAQb,EAAM,cAAcC,EAAY,MAAOY,CAAK,GAE/CK,EAAAA,WAAWL,CAAK,CAAA,CACxB,EAGKM,EAASZ,EAAAA,SAAS,IAClB,CAACC,EAAAA,MAAMR,CAAK,GAAK,CAACQ,EAAM,MAAAR,EAAM,KAAK,GAAK,CAACQ,QAAMR,EAAM,MAAM,IAAI,GAAK,CAAC,MAAM,QAAQA,EAAM,MAAM,IAAI,EAC9F,GAGaA,EAAM,MAAM,KAAK,IAAKoB,GACnCA,EAAKtB,EAAM,IAAI,CACvB,CAEF,EAMD,SAASuB,EAAeC,EAAe,CAChCd,EAAAA,MAAMR,CAAK,GAGhBe,EAAA,WAAWf,EAAM,QAAQ,GAAKA,EAAM,SAASsB,CAAK,CACpD,CAGA,SAASC,EAASD,EAAe,CAC3B,MAAA,CAACd,EAAAA,MAAMR,CAAK,GAAK,CAACQ,EAAM,MAAAR,EAAM,KAAK,GAAK,CAACQ,QAAMR,EAAM,MAAM,IAAI,GAAK,CAAC,MAAM,QAAQA,EAAM,MAAM,IAAI,EAC9F,GAEFA,EAAM,MAAM,KAAKsB,CAAK,GAAK,CAAA,CACpC,CAEa,OAAAE,EAAA,CAAE,cAAApB,EAA8B,wiBC9I7C,GAAG,gBAAgBqB,CAAS"}