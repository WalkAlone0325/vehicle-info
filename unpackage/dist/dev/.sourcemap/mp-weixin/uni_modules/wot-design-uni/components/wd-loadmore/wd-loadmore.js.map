{"version":3,"file":"wd-loadmore.js","sources":["uni_modules/wot-design-uni/components/wd-loadmore/wd-loadmore.vue","/Users/jing/Code/mini/vehicle-info/uni_modules/wot-design-uni/components/wd-loadmore/wd-loadmore.vue?type=component"],"sourcesContent":["<!--\n * @Author: weisheng\n * @Date: 2024-11-09 12:35:25\n * @LastEditTime: 2024-11-09 15:01:32\n * @LastEditors: weisheng\n * @Description: \n * @FilePath: /wot-design-uni/src/uni_modules/wot-design-uni/components/wd-loadmore/wd-loadmore.vue\n * 记得注释\n-->\n<template>\n  <view :class=\"['wd-loadmore', customClass]\" :style=\"customStyle\" @click=\"reload\">\n    <wd-divider v-if=\"state === 'finished'\">{{ finishedText || translate('finished') }}</wd-divider>\n    <template v-if=\"state === 'error'\">\n      <text class=\"wd-loadmore__text\">{{ errorText || translate('error') }}</text>\n      <text class=\"wd-loadmore__text is-light\">{{ translate('retry') }}</text>\n      <wd-icon name=\"refresh\" custom-class=\"wd-loadmore__refresh\" />\n    </template>\n    <template v-if=\"state === 'loading'\">\n      <wd-loading v-bind=\"customLoadingProps\" />\n      <text class=\"wd-loadmore__text\">{{ loadingText || translate('loading') }}</text>\n    </template>\n  </view>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  name: 'wd-loadmore',\n  options: {\n    virtualHost: true,\n    addGlobalClass: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport wdDivider from '../wd-divider/wd-divider.vue'\nimport wdLoading from '../wd-loading/wd-loading.vue'\nimport wdIcon from '../wd-icon/wd-icon.vue'\nimport { computed, ref } from 'vue'\nimport { useTranslate } from '../composables/useTranslate'\nimport { loadmoreProps, type LoadMoreState } from './types'\nimport type { LoadingProps } from '../wd-loading/types'\nimport { isDef, isUndefined, omitBy } from '../common/util'\n\nconst customLoadingProps = computed(() => {\n  const loadingProps: Partial<LoadingProps> = isDef(props.loadingProps) ? omitBy(props.loadingProps, isUndefined) : {}\n  loadingProps.customClass = `wd-loadmore__loading ${loadingProps.customClass || ''}`\n  return loadingProps\n})\n\nconst props = defineProps(loadmoreProps)\nconst emit = defineEmits(['reload'])\n\nconst { translate } = useTranslate('loadmore')\n\nconst currentState = ref<LoadMoreState | null>(null)\n\nfunction reload() {\n  if (props.state !== 'error') return\n  currentState.value = 'loading'\n  emit('reload')\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","import Component from '/Users/jing/Code/mini/vehicle-info/uni_modules/wot-design-uni/components/wd-loadmore/wd-loadmore.vue'\nwx.createComponent(Component)"],"names":["wdDivider","wdLoading","wdIcon","__default__","customLoadingProps","computed","loadingProps","isDef","props","omitBy","isUndefined","__props","emit","__emit","translate","useTranslate","currentState","ref","reload","Component"],"mappings":"gLAoCA,MAAAA,EAAsB,IAAA,8BACtBC,EAAsB,IAAA,8BACtBC,EAAmB,IAAA,wBAbnBC,EAAe,CACb,KAAM,cACN,QAAS,CACP,YAAa,GACb,eAAgB,GAChB,eAAgB,QAClB,CACF,qFAaM,MAAAC,EAAqBC,EAAAA,SAAS,IAAM,CAClC,MAAAC,EAAsCC,EAAAA,MAAMC,EAAM,YAAY,EAAIC,SAAOD,EAAM,aAAcE,aAAW,EAAI,GAClH,OAAAJ,EAAa,YAAc,wBAAwBA,EAAa,aAAe,EAAE,GAC1EA,CAAA,CACR,EAEKE,EAAQG,EACRC,EAAOC,EAEP,CAAE,UAAAC,CAAA,EAAcC,EAAA,aAAa,UAAU,EAEvCC,EAAeC,MAA0B,IAAI,EAEnD,SAASC,GAAS,CACZV,EAAM,QAAU,UACpBQ,EAAa,MAAQ,UACrBJ,EAAK,QAAQ,EACf,ggBC7DA,GAAG,gBAAgBO,CAAS"}