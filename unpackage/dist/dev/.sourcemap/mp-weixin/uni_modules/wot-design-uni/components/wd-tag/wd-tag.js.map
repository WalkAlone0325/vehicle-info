{"version":3,"file":"wd-tag.js","sources":["uni_modules/wot-design-uni/components/wd-tag/wd-tag.vue","/Users/jing/Code/mini/vehicle-info/uni_modules/wot-design-uni/components/wd-tag/wd-tag.vue?type=component"],"sourcesContent":["<template>\n  <view :class=\"rootClass\" :style=\"rootStyle\" @click=\"handleClick\">\n    <view v-if=\"useIconSlot\" class=\"wd-tag__icon\">\n      <slot name=\"icon\" />\n    </view>\n    <wd-icon v-else-if=\"icon\" :name=\"icon\" custom-class=\"wd-tag__icon\" />\n    <view class=\"wd-tag__text\" :style=\"textStyle\">\n      <slot />\n    </view>\n    <view class=\"wd-tag__close\" v-if=\"closable && round\" @click.stop=\"handleClose\">\n      <wd-icon name=\"error-fill\" />\n    </view>\n    <input\n      v-if=\"dynamicInput && dynamic\"\n      class=\"wd-tag__add-text\"\n      :placeholder=\"translate('placeholder')\"\n      type=\"text\"\n      :focus=\"true\"\n      v-model=\"dynamicValue\"\n      @blur=\"handleBlur\"\n      @confirm=\"handleConfirm\"\n    />\n    <view v-else-if=\"dynamic\" class=\"wd-tag__text\" :style=\"textStyle\" @click.stop=\"handleAdd\">\n      <slot name=\"add\" v-if=\"$slots.add\"></slot>\n      <template v-else>\n        <wd-icon name=\"add\" custom-class=\"wd-tag__add wd-tag__icon\" />\n        <text>{{ translate('add') }}</text>\n      </template>\n    </view>\n  </view>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  name: 'wd-tag',\n  options: {\n    addGlobalClass: true,\n    virtualHost: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n<script lang=\"ts\" setup>\nimport wdIcon from '../wd-icon/wd-icon.vue'\nimport { objToStyle } from '../common/util'\nimport { computed, ref, watch } from 'vue'\nimport { useTranslate } from '../composables/useTranslate'\nimport { tagProps } from './types'\n\nconst props = defineProps(tagProps)\nconst emit = defineEmits(['click', 'close', 'confirm'])\n\nconst { translate } = useTranslate('tag')\n\nconst tagClass = ref<string>('')\nconst dynamicValue = ref<string>('')\nconst dynamicInput = ref<boolean>(false)\n\nwatch(\n  [() => props.useIconSlot, () => props.icon, () => props.plain, () => props.dynamic, () => props.round, () => props.mark],\n  () => {\n    computeTagClass()\n  },\n  { deep: true, immediate: true }\n)\n\nwatch(\n  () => props.type,\n  (newValue) => {\n    if (!newValue) return\n    // type: 'primary', 'danger', 'warning', 'success'\n    const type = ['primary', 'danger', 'warning', 'success', 'default']\n    if (type.indexOf(newValue) === -1) uni.__f__('error','at uni_modules/wot-design-uni/components/wd-tag/wd-tag.vue:73',`type must be one of ${type.toString()}`)\n    computeTagClass()\n  },\n  { deep: true, immediate: true }\n)\n\nwatch(\n  () => dynamicInput.value,\n  () => {\n    computeTagClass()\n  },\n  { deep: true, immediate: true }\n)\n\nconst rootClass = computed(() => {\n  return `wd-tag ${props.customClass} ${tagClass.value}`\n})\n\nconst rootStyle = computed(() => {\n  const rootStyle: Record<string, any> = {}\n  if (!props.plain && props.bgColor) {\n    rootStyle['background'] = props.bgColor\n  }\n  if (props.bgColor) {\n    rootStyle['border-color'] = props.bgColor\n  }\n  return `${objToStyle(rootStyle)}${props.customStyle}`\n})\n\nconst textStyle = computed(() => {\n  const textStyle: Record<string, any> = {}\n  if (props.color) {\n    textStyle['color'] = props.color\n  }\n  return objToStyle(textStyle)\n})\n\nfunction computeTagClass() {\n  const { type, plain, round, mark, dynamic, icon, useIconSlot } = props\n  let tagClassList: string[] = []\n  type && tagClassList.push(`is-${type}`)\n  plain && tagClassList.push('is-plain')\n  round && tagClassList.push('is-round')\n  mark && tagClassList.push('is-mark')\n  dynamic && tagClassList.push('is-dynamic')\n  dynamicInput.value && tagClassList.push('is-dynamic-input')\n  if (icon || useIconSlot) tagClassList.push('is-icon')\n  tagClass.value = tagClassList.join(' ')\n}\n\nfunction handleClick(event: any) {\n  emit('click', event)\n}\nfunction handleClose(event: any) {\n  emit('close', event)\n}\nfunction handleAdd() {\n  dynamicInput.value = true\n  dynamicValue.value = ''\n}\nfunction handleBlur() {\n  setDynamicInput()\n}\nfunction handleConfirm(event: any) {\n  setDynamicInput()\n  emit('confirm', {\n    value: event.detail.value\n  })\n}\nfunction setDynamicInput() {\n  dynamicInput.value = false\n}\n</script>\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","import Component from '/Users/jing/Code/mini/vehicle-info/uni_modules/wot-design-uni/components/wd-tag/wd-tag.vue'\nwx.createComponent(Component)"],"names":["wdIcon","__default__","props","__props","emit","__emit","translate","useTranslate","tagClass","ref","dynamicValue","dynamicInput","watch","computeTagClass","newValue","type","uni","rootClass","computed","rootStyle","objToStyle","textStyle","plain","round","mark","dynamic","icon","useIconSlot","tagClassList","handleClick","event","handleClose","handleAdd","handleBlur","setDynamicInput","handleConfirm","Component"],"mappings":"0KA2CA,MAAAA,EAAmB,IAAA,wBAVnBC,EAAe,CACb,KAAM,SACN,QAAS,CACP,eAAgB,GAChB,YAAa,GACb,eAAgB,QAClB,CACF,iGASA,MAAMC,EAAQC,EACRC,EAAOC,EAEP,CAAE,UAAAC,CAAA,EAAcC,EAAA,aAAa,KAAK,EAElCC,EAAWC,MAAY,EAAE,EACzBC,EAAeD,MAAY,EAAE,EAC7BE,EAAeF,MAAa,EAAK,EAEvCG,EAAA,MACE,CAAC,IAAMV,EAAM,YAAa,IAAMA,EAAM,KAAM,IAAMA,EAAM,MAAO,IAAMA,EAAM,QAAS,IAAMA,EAAM,MAAO,IAAMA,EAAM,IAAI,EACvH,IAAM,CACYW,GAClB,EACA,CAAE,KAAM,GAAM,UAAW,EAAK,CAAA,EAGhCD,EAAA,MACE,IAAMV,EAAM,KACXY,GAAa,CACZ,GAAI,CAACA,EAAU,OAEf,MAAMC,EAAO,CAAC,UAAW,SAAU,UAAW,UAAW,SAAS,EAC9DA,EAAK,QAAQD,CAAQ,IAAM,IAAIE,QAAI,MAAM,QAAQ,gEAAgE,uBAAuBD,EAAK,UAAU,EAAE,EAC7IF,GAClB,EACA,CAAE,KAAM,GAAM,UAAW,EAAK,CAAA,EAGhCD,EAAA,MACE,IAAMD,EAAa,MACnB,IAAM,CACYE,GAClB,EACA,CAAE,KAAM,GAAM,UAAW,EAAK,CAAA,EAG1B,MAAAI,EAAYC,EAAAA,SAAS,IAClB,UAAUhB,EAAM,WAAW,IAAIM,EAAS,KAAK,EACrD,EAEKW,EAAYD,EAAAA,SAAS,IAAM,CAC/B,MAAMC,EAAiC,CAAA,EACvC,MAAI,CAACjB,EAAM,OAASA,EAAM,UACxBiB,EAAU,WAAgBjB,EAAM,SAE9BA,EAAM,UACRiB,EAAU,cAAc,EAAIjB,EAAM,SAE7B,GAAGkB,EAAAA,WAAWD,CAAS,CAAC,GAAGjB,EAAM,WAAW,EAAA,CACpD,EAEKmB,EAAYH,EAAAA,SAAS,IAAM,CAC/B,MAAMG,EAAiC,CAAA,EACvC,OAAInB,EAAM,QACRmB,EAAU,MAAWnB,EAAM,OAEtBkB,EAAAA,WAAWC,CAAS,CAAA,CAC5B,EAED,SAASR,GAAkB,CACnB,KAAA,CAAE,KAAAE,EAAM,MAAAO,EAAO,MAAAC,EAAO,KAAAC,EAAM,QAAAC,EAAS,KAAAC,EAAM,YAAAC,CAAgB,EAAAzB,EACjE,IAAI0B,EAAyB,CAAA,EAC7Bb,GAAQa,EAAa,KAAK,MAAMb,CAAI,EAAE,EAC7BO,GAAAM,EAAa,KAAK,UAAU,EAC5BL,GAAAK,EAAa,KAAK,UAAU,EAC7BJ,GAAAI,EAAa,KAAK,SAAS,EACxBH,GAAAG,EAAa,KAAK,YAAY,EAC5BjB,EAAA,OAASiB,EAAa,KAAK,kBAAkB,GACtDF,GAAQC,IAAaC,EAAa,KAAK,SAAS,EAC3CpB,EAAA,MAAQoB,EAAa,KAAK,GAAG,CACxC,CAEA,SAASC,EAAYC,EAAY,CAC/B1B,EAAK,QAAS0B,CAAK,CACrB,CACA,SAASC,EAAYD,EAAY,CAC/B1B,EAAK,QAAS0B,CAAK,CACrB,CACA,SAASE,GAAY,CACnBrB,EAAa,MAAQ,GACrBD,EAAa,MAAQ,EACvB,CACA,SAASuB,GAAa,CACJC,GAClB,CACA,SAASC,EAAcL,EAAY,CACjBI,IAChB9B,EAAK,UAAW,CACd,MAAO0B,EAAM,OAAO,KAAA,CACrB,CACH,CACA,SAASI,GAAkB,CACzBvB,EAAa,MAAQ,EACvB,0nBC9IA,GAAG,gBAAgByB,CAAS"}