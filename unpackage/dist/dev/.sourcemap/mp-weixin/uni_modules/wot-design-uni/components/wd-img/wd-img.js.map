{"version":3,"file":"wd-img.js","sources":["uni_modules/wot-design-uni/components/wd-img/wd-img.vue","/Users/jing/Code/mini/vehicle-info/uni_modules/wot-design-uni/components/wd-img/wd-img.vue?type=component"],"sourcesContent":["<!--\n * @Author: 810505339\n * @Date: 2024-09-25 11:30:46\n * @LastEditors: 810505339\n * @LastEditTime: 2025-01-09 11:37:45\n * @FilePath: \\wot-design-uni\\src\\uni_modules\\wot-design-uni\\components\\wd-img\\wd-img.vue\n * 记得注释\n-->\n<template>\n  <view :class=\"rootClass\" @click=\"handleClick\" :style=\"rootStyle\">\n    <image\n      :class=\"`wd-img__image ${customImage}`\"\n      :style=\"status !== 'success' ? 'width: 0;height: 0;' : ''\"\n      :src=\"src\"\n      :mode=\"mode\"\n      :show-menu-by-longpress=\"showMenuByLongpress\"\n      :lazy-load=\"lazyLoad\"\n      @load=\"handleLoad\"\n      @error=\"handleError\"\n    />\n    <slot v-if=\"status === 'loading'\" name=\"loading\"></slot>\n    <slot v-if=\"status === 'error'\" name=\"error\"></slot>\n  </view>\n</template>\n<script lang=\"ts\">\nexport default {\n  name: 'wd-img',\n  options: {\n    virtualHost: true,\n    addGlobalClass: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport { computed, ref } from 'vue'\nimport { addUnit, isDef, objToStyle } from '../common/util'\nimport { imgProps } from './types'\n\nconst props = defineProps(imgProps)\nconst emit = defineEmits<{\n  (e: 'error', event: Event): void\n  (e: 'click', event: MouseEvent): void\n  (e: 'load', event: Event): void\n}>()\n\nconst rootStyle = computed(() => {\n  const style: Record<string, string | number> = {}\n  if (isDef(props.height)) {\n    style['height'] = addUnit(props.height)\n  }\n  if (isDef(props.width)) {\n    style['width'] = addUnit(props.width)\n  }\n  if (isDef(props.radius)) {\n    style['border-radius'] = addUnit(props.radius)\n    style['overflow'] = 'hidden'\n  }\n  return `${objToStyle(style)}${props.customStyle}`\n})\n\nconst rootClass = computed(() => {\n  return `wd-img  ${props.round ? 'is-round' : ''} ${props.customClass}`\n})\n\nconst status = ref<'loading' | 'error' | 'success'>('loading')\n\nfunction handleError(event: any) {\n  status.value = 'error'\n  emit('error', event)\n}\nfunction handleClick(event: MouseEvent) {\n  if (props.enablePreview && props.src && status.value == 'success') {\n    uni.previewImage({\n      urls: [props.previewSrc || props.src]\n    })\n  }\n  emit('click', event)\n}\nfunction handleLoad(event: any) {\n  status.value = 'success'\n  emit('load', event)\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","import Component from '/Users/jing/Code/mini/vehicle-info/uni_modules/wot-design-uni/components/wd-img/wd-img.vue'\nwx.createComponent(Component)"],"names":["__default__","props","__props","emit","__emit","rootStyle","computed","style","isDef","addUnit","objToStyle","rootClass","status","ref","handleError","event","handleClick","uni","handleLoad","Component"],"mappings":"oHAyBAA,EAAe,CACb,KAAM,SACN,QAAS,CACP,YAAa,GACb,eAAgB,GAChB,eAAgB,QAClB,CACF,8FAQA,MAAMC,EAAQC,EACRC,EAAOC,EAMPC,EAAYC,EAAAA,SAAS,IAAM,CAC/B,MAAMC,EAAyC,CAAA,EAC3C,OAAAC,EAAA,MAAMP,EAAM,MAAM,IACpBM,EAAM,OAAYE,EAAQ,QAAAR,EAAM,MAAM,GAEpCO,EAAA,MAAMP,EAAM,KAAK,IACnBM,EAAM,MAAWE,EAAQ,QAAAR,EAAM,KAAK,GAElCO,EAAA,MAAMP,EAAM,MAAM,IACpBM,EAAM,eAAe,EAAIE,EAAQ,QAAAR,EAAM,MAAM,EAC7CM,EAAM,SAAc,UAEf,GAAGG,EAAAA,WAAWH,CAAK,CAAC,GAAGN,EAAM,WAAW,EAAA,CAChD,EAEKU,EAAYL,EAAAA,SAAS,IAClB,WAAWL,EAAM,MAAQ,WAAa,EAAE,IAAIA,EAAM,WAAW,EACrE,EAEKW,EAASC,MAAqC,SAAS,EAE7D,SAASC,EAAYC,EAAY,CAC/BH,EAAO,MAAQ,QACfT,EAAK,QAASY,CAAK,CACrB,CACA,SAASC,EAAYD,EAAmB,CAClCd,EAAM,eAAiBA,EAAM,KAAOW,EAAO,OAAS,WACtDK,EAAAA,MAAI,aAAa,CACf,KAAM,CAAChB,EAAM,YAAcA,EAAM,GAAG,CAAA,CACrC,EAEHE,EAAK,QAASY,CAAK,CACrB,CACA,SAASG,EAAWH,EAAY,CAC9BH,EAAO,MAAQ,UACfT,EAAK,OAAQY,CAAK,CACpB,wXClFA,GAAG,gBAAgBI,CAAS"}