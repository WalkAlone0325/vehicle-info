{"version":3,"file":"wd-popup.js","sources":["uni_modules/wot-design-uni/components/wd-popup/wd-popup.vue","/Users/jing/Code/mini/vehicle-info/uni_modules/wot-design-uni/components/wd-popup/wd-popup.vue?type=component"],"sourcesContent":["<template>\n  <view class=\"wd-popup-wrapper\">\n    <wd-overlay\n      v-if=\"modal\"\n      :show=\"modelValue\"\n      :z-index=\"zIndex\"\n      :lock-scroll=\"lockScroll\"\n      :duration=\"duration\"\n      :custom-style=\"modalStyle\"\n      @click=\"handleClickModal\"\n      @touchmove=\"noop\"\n    />\n    <wd-transition\n      :lazy-render=\"lazyRender\"\n      :custom-class=\"rootClass\"\n      :custom-style=\"style\"\n      :duration=\"duration\"\n      :show=\"modelValue\"\n      :name=\"transitionName\"\n      :destroy=\"hideWhenClose\"\n      @before-enter=\"emit('before-enter')\"\n      @enter=\"emit('enter')\"\n      @after-enter=\"emit('after-enter')\"\n      @before-leave=\"emit('before-leave')\"\n      @leave=\"emit('leave')\"\n      @after-leave=\"emit('after-leave')\"\n    >\n      <slot />\n      <wd-icon v-if=\"closable\" custom-class=\"wd-popup__close\" name=\"add\" @click=\"close\" />\n    </wd-transition>\n  </view>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  name: 'wd-popup',\n  options: {\n    virtualHost: true,\n    addGlobalClass: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport wdIcon from '../wd-icon/wd-icon.vue'\nimport wdOverlay from '../wd-overlay/wd-overlay.vue'\nimport wdTransition from '../wd-transition/wd-transition.vue'\nimport { computed, onBeforeMount, ref } from 'vue'\nimport { popupProps } from './types'\nimport type { TransitionName } from '../wd-transition/types'\n\nconst props = defineProps(popupProps)\nconst emit = defineEmits([\n  'update:modelValue',\n  'before-enter',\n  'enter',\n  'before-leave',\n  'leave',\n  'after-leave',\n  'after-enter',\n  'click-modal',\n  'close'\n])\n\n/**\n * 弹出位置\n */\nconst transitionName = computed<TransitionName | TransitionName[]>(() => {\n  if (props.transition) {\n    return props.transition\n  }\n  if (props.position === 'center') {\n    return ['zoom-in', 'fade']\n  }\n  if (props.position === 'left') {\n    return 'slide-left'\n  }\n  if (props.position === 'right') {\n    return 'slide-right'\n  }\n  if (props.position === 'bottom') {\n    return 'slide-up'\n  }\n  if (props.position === 'top') {\n    return 'slide-down'\n  }\n  return 'slide-up'\n})\n\nconst safeBottom = ref<number>(0)\n\nconst style = computed(() => {\n  return `z-index:${props.zIndex}; padding-bottom: ${safeBottom.value}px;${props.customStyle}`\n})\n\nconst rootClass = computed(() => {\n  return `wd-popup wd-popup--${props.position} ${!props.transition && props.position === 'center' ? 'is-deep' : ''} ${props.customClass || ''}`\n})\n\nonBeforeMount(() => {\n  if (props.safeAreaInsetBottom) {\n    const { safeArea, screenHeight, safeAreaInsets } = uni.getSystemInfoSync()\n\n    if (safeArea) {\n\n      safeBottom.value = screenHeight - (safeArea!.bottom || 0)\n\n\n\n\n    } else {\n      safeBottom.value = 0\n    }\n  }\n})\n\nfunction handleClickModal() {\n  emit('click-modal')\n  if (props.closeOnClickModal) {\n    close()\n  }\n}\n\nfunction close() {\n  emit('close')\n  emit('update:modelValue', false)\n}\nfunction noop() {}\n</script>\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","import Component from '/Users/jing/Code/mini/vehicle-info/uni_modules/wot-design-uni/components/wd-popup/wd-popup.vue'\nwx.createComponent(Component)"],"names":["wdIcon","wdOverlay","wdTransition","__default__","props","__props","emit","__emit","transitionName","computed","safeBottom","ref","style","rootClass","onBeforeMount","safeArea","screenHeight","safeAreaInsets","uni","handleClickModal","close","noop","Component"],"mappings":"qGA6CA,MAAAA,EAAmB,IAAA,wBACnBC,EAAsB,IAAA,8BACtBC,EAAyB,IAAA,oCAbzBC,EAAe,CACb,KAAM,WACN,QAAS,CACP,YAAa,GACb,eAAgB,GAChB,eAAgB,QAClB,CACF,6LAWA,MAAMC,EAAQC,EACRC,EAAOC,EAePC,EAAiBC,EAAAA,SAA4C,IAC7DL,EAAM,WACDA,EAAM,WAEXA,EAAM,WAAa,SACd,CAAC,UAAW,MAAM,EAEvBA,EAAM,WAAa,OACd,aAELA,EAAM,WAAa,QACd,cAELA,EAAM,WAAa,SACd,WAELA,EAAM,WAAa,MACd,aAEF,UACR,EAEKM,EAAaC,MAAY,CAAC,EAE1BC,EAAQH,EAAAA,SAAS,IACd,WAAWL,EAAM,MAAM,qBAAqBM,EAAW,KAAK,MAAMN,EAAM,WAAW,EAC3F,EAEKS,EAAYJ,EAAAA,SAAS,IAClB,sBAAsBL,EAAM,QAAQ,IAAI,CAACA,EAAM,YAAcA,EAAM,WAAa,SAAW,UAAY,EAAE,IAAIA,EAAM,aAAe,EAAE,EAC5I,EAEDU,EAAAA,cAAc,IAAM,CAClB,GAAIV,EAAM,oBAAqB,CAC7B,KAAM,CAAE,SAAAW,EAAU,aAAAC,EAAc,eAAAC,CAAe,EAAIC,EAAAA,MAAI,oBAEnDH,EAESL,EAAA,MAAQM,GAAgBD,EAAU,QAAU,GAMvDL,EAAW,MAAQ,CAEvB,CAAA,CACD,EAED,SAASS,GAAmB,CAC1Bb,EAAK,aAAa,EACdF,EAAM,mBACFgB,GAEV,CAEA,SAASA,GAAQ,CACfd,EAAK,OAAO,EACZA,EAAK,oBAAqB,EAAK,CACjC,CACA,SAASe,GAAO,CAAC,moBC/HjB,GAAG,gBAAgBC,CAAS"}