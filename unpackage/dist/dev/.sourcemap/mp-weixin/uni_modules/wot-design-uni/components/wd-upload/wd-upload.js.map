{"version":3,"file":"wd-upload.js","sources":["uni_modules/wot-design-uni/components/wd-upload/wd-upload.vue","/Users/jing/Code/mini/vehicle-info/uni_modules/wot-design-uni/components/wd-upload/wd-upload.vue?type=component"],"sourcesContent":["<template>\n  <view :class=\"['wd-upload', customClass]\" :style=\"customStyle\">\n    <!-- 预览列表 -->\n    <view :class=\"['wd-upload__preview', customPreviewClass]\" v-for=\"(file, index) in uploadFiles\" :key=\"index\">\n      <!-- 成功时展示图片 -->\n      <view class=\"wd-upload__status-content\">\n        <image v-if=\"isImage(file)\" :src=\"file.url\" :mode=\"imageMode\" class=\"wd-upload__picture\" @click=\"onPreviewImage(file)\" />\n        <template v-else-if=\"isVideo(file)\">\n          <view class=\"wd-upload__video\" v-if=\"file.thumb\" @click=\"onPreviewVideo(file)\">\n            <image :src=\"file.thumb\" :mode=\"imageMode\" class=\"wd-upload__picture\" />\n            <wd-icon name=\"play-circle-filled\" custom-class=\"wd-upload__video-paly\"></wd-icon>\n          </view>\n          <view v-else class=\"wd-upload__video\" @click=\"onPreviewVideo(file)\">\n\n\n\n\n\n            <video\n              :src=\"file.url\"\n              :title=\"file.name || '视频' + index\"\n              object-fit=\"contain\"\n              :controls=\"false\"\n              :poster=\"file.thumb\"\n              :autoplay=\"false\"\n              :show-center-play-btn=\"false\"\n              :show-fullscreen-btn=\"false\"\n              :show-play-btn=\"false\"\n              :show-loading=\"false\"\n              :show-progress=\"false\"\n              :show-mute-btn=\"false\"\n              :enable-progress-gesture=\"false\"\n              :enableNative=\"true\"\n              class=\"wd-upload__video\"\n            ></video>\n            <wd-icon name=\"play-circle-filled\" custom-class=\"wd-upload__video-paly\"></wd-icon>\n\n\n          </view>\n        </template>\n\n        <view v-else class=\"wd-upload__file\" @click=\"onPreviewFile(file)\">\n          <wd-icon name=\"file\" custom-class=\"wd-upload__file-icon\"></wd-icon>\n          <view class=\"wd-upload__file-name\">{{ file.name || file.url }}</view>\n        </view>\n      </view>\n\n      <view v-if=\"file[props.statusKey] !== 'success'\" class=\"wd-upload__mask wd-upload__status-content\">\n        <!-- loading时展示loading图标和进度 -->\n        <view v-if=\"file[props.statusKey] === 'loading'\" class=\"wd-upload__status-content\">\n          <wd-loading :type=\"loadingType\" :size=\"loadingSize\" :color=\"loadingColor\" />\n          <text class=\"wd-upload__progress-txt\">{{ file.percent }}%</text>\n        </view>\n        <!-- 失败时展示失败图标以及失败信息 -->\n        <view v-if=\"file[props.statusKey] === 'fail'\" class=\"wd-upload__status-content\">\n          <wd-icon name=\"close-outline\" custom-class=\"wd-upload__icon\"></wd-icon>\n          <text class=\"wd-upload__progress-txt\">{{ file.error || translate('error') }}</text>\n        </view>\n      </view>\n      <!-- 上传状态为上传中时不展示移除按钮 -->\n      <wd-icon\n        v-if=\"file[props.statusKey] !== 'loading' && !disabled\"\n        name=\"error-fill\"\n        custom-class=\"wd-upload__close\"\n        @click=\"removeFile(index)\"\n      ></wd-icon>\n      <!-- 自定义预览样式 -->\n      <slot name=\"preview-cover\" v-if=\"$slots['preview-cover']\" :file=\"file\" :index=\"index\"></slot>\n    </view>\n\n    <template v-if=\"showUpload\">\n      <view :class=\"['wd-upload__evoke-slot', customEvokeClass]\" v-if=\"$slots.default\" @click=\"handleChoose\">\n        <slot></slot>\n      </view>\n      <!-- 唤起项 -->\n      <view v-else @click=\"handleChoose\" :class=\"['wd-upload__evoke', disabled ? 'is-disabled' : '', customEvokeClass]\">\n        <!-- 唤起项图标 -->\n        <wd-icon class=\"wd-upload__evoke-icon\" name=\"fill-camera\"></wd-icon>\n        <!-- 有限制个数时确认是否展示限制个数 -->\n        <view v-if=\"limit && showLimitNum\" class=\"wd-upload__evoke-num\">（{{ uploadFiles.length }}/{{ limit }}）</view>\n      </view>\n    </template>\n  </view>\n  <wd-video-preview ref=\"videoPreview\"></wd-video-preview>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  name: 'wd-upload',\n  options: {\n    addGlobalClass: true,\n    virtualHost: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport wdIcon from '../wd-icon/wd-icon.vue'\nimport wdVideoPreview from '../wd-video-preview/wd-video-preview.vue'\nimport wdLoading from '../wd-loading/wd-loading.vue'\n\nimport { computed, ref, watch } from 'vue'\nimport { context, isEqual, isImageUrl, isVideoUrl, isFunction, isDef, deepClone } from '../common/util'\nimport { useTranslate } from '../composables/useTranslate'\nimport { useUpload } from '../composables/useUpload'\nimport {\n  uploadProps,\n  type UploadFileItem,\n  type ChooseFile,\n  type UploadExpose,\n  type UploadErrorEvent,\n  type UploadChangeEvent,\n  type UploadSuccessEvent,\n  type UploadProgressEvent,\n  type UploadOversizeEvent,\n  type UploadRemoveEvent,\n  type UploadMethod\n} from './types'\nimport type { VideoPreviewInstance } from '../wd-video-preview/types'\n\nconst props = defineProps(uploadProps)\n\nconst emit = defineEmits<{\n  (e: 'fail', value: UploadErrorEvent): void\n  (e: 'change', value: UploadChangeEvent): void\n  (e: 'success', value: UploadSuccessEvent): void\n  (e: 'progress', value: UploadProgressEvent): void\n  (e: 'oversize', value: UploadOversizeEvent): void\n  (e: 'chooseerror', value: any): void\n  (e: 'remove', value: UploadRemoveEvent): void\n  (e: 'update:fileList', value: UploadFileItem[]): void\n}>()\n\ndefineExpose<UploadExpose>({\n  submit: () => startUploadFiles(),\n  abort: () => abort()\n})\n\nconst { translate } = useTranslate('upload')\n\nconst uploadFiles = ref<UploadFileItem[]>([])\n\nconst showUpload = computed(() => !props.limit || uploadFiles.value.length < props.limit)\n\nconst videoPreview = ref<VideoPreviewInstance>()\n\nconst { startUpload, abort, chooseFile, UPLOAD_STATUS } = useUpload()\n\nwatch(\n  () => props.fileList,\n  (val) => {\n    const { statusKey } = props\n    if (isEqual(val, uploadFiles.value)) return\n    const uploadFileList: UploadFileItem[] = val.map((item) => {\n      item[statusKey] = item[statusKey] || 'success'\n      item.response = item.response || ''\n      return { ...item, uid: context.id++ }\n    })\n    uploadFiles.value = uploadFileList\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\nwatch(\n  () => props.limit,\n  (val) => {\n    if (val && val < uploadFiles.value.length) {\n      uni.__f__('error','at uni_modules/wot-design-uni/components/wd-upload/wd-upload.vue:172','[wot-design]Error: props limit must less than fileList.length')\n    }\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\nwatch(\n  () => props.beforePreview,\n  (fn) => {\n    if (fn && !isFunction(fn)) {\n      uni.__f__('error','at uni_modules/wot-design-uni/components/wd-upload/wd-upload.vue:185','The type of beforePreview must be Function')\n    }\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\nwatch(\n  () => props.onPreviewFail,\n  (fn) => {\n    if (fn && !isFunction(fn)) {\n      uni.__f__('error','at uni_modules/wot-design-uni/components/wd-upload/wd-upload.vue:198','The type of onPreviewFail must be Function')\n    }\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\nwatch(\n  () => props.beforeRemove,\n  (fn) => {\n    if (fn && !isFunction(fn)) {\n      uni.__f__('error','at uni_modules/wot-design-uni/components/wd-upload/wd-upload.vue:211','The type of beforeRemove must be Function')\n    }\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\nwatch(\n  () => props.beforeUpload,\n  (fn) => {\n    if (fn && !isFunction(fn)) {\n      uni.__f__('error','at uni_modules/wot-design-uni/components/wd-upload/wd-upload.vue:224','The type of beforeUpload must be Function')\n    }\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\nwatch(\n  () => props.beforeChoose,\n  (fn) => {\n    if (fn && !isFunction(fn)) {\n      uni.__f__('error','at uni_modules/wot-design-uni/components/wd-upload/wd-upload.vue:237','The type of beforeChoose must be Function')\n    }\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\nwatch(\n  () => props.buildFormData,\n  (fn) => {\n    if (fn && !isFunction(fn)) {\n      uni.__f__('error','at uni_modules/wot-design-uni/components/wd-upload/wd-upload.vue:250','The type of buildFormData must be Function')\n    }\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\nfunction emitFileList() {\n  emit('update:fileList', uploadFiles.value)\n}\n\n/**\n *  开始上传文件\n */\nfunction startUploadFiles() {\n  const { buildFormData, formData = {}, statusKey } = props\n  const { action, name, header = {}, accept, successStatus, uploadMethod } = props\n  const statusCode = isDef(successStatus) ? successStatus : 200\n\n  for (const uploadFile of uploadFiles.value) {\n    // 仅开始未上传的文件\n    if (uploadFile[statusKey] === UPLOAD_STATUS.PENDING) {\n      if (buildFormData) {\n        buildFormData({\n          file: uploadFile,\n          formData,\n          resolve: (formData: Record<string, any>) => {\n            formData &&\n              startUpload(uploadFile, {\n                action,\n                header,\n                name,\n                formData,\n                fileType: accept as 'image' | 'video' | 'audio',\n                statusCode,\n                statusKey,\n                uploadMethod,\n                onSuccess: handleSuccess,\n                onError: handleError,\n                onProgress: handleProgress\n              })\n          }\n        })\n      } else {\n        startUpload(uploadFile, {\n          action,\n          header,\n          name,\n          formData,\n          fileType: accept as 'image' | 'video' | 'audio',\n          statusCode,\n          statusKey,\n          uploadMethod,\n          onSuccess: handleSuccess,\n          onError: handleError,\n          onProgress: handleProgress\n        })\n      }\n    }\n  }\n}\n\n/**\n * 获取图片信息\n * @param img\n */\nfunction getImageInfo(img: string) {\n  return new Promise<UniApp.GetImageInfoSuccessData>((resolve, reject) => {\n    uni.getImageInfo({\n      src: img,\n      success: (res) => {\n        resolve(res)\n      },\n      fail: (error) => {\n        reject(error)\n      }\n    })\n  })\n}\n\n/**\n * @description 初始化文件数据\n * @param {Object} file 上传的文件\n */\nfunction initFile(file: ChooseFile, currentIndex?: number) {\n  const { statusKey } = props\n  // 状态初始化\n  const initState: UploadFileItem = {\n    uid: context.id++,\n    // 仅h5支持 name\n    name: file.name || '',\n    thumb: file.thumb || '',\n    [statusKey]: 'pending',\n    size: file.size || 0,\n    url: file.path,\n    percent: 0\n  }\n  if (typeof currentIndex === 'number') {\n    uploadFiles.value.splice(currentIndex, 1, initState)\n  } else {\n    uploadFiles.value.push(initState)\n  }\n  if (props.autoUpload) {\n    startUploadFiles()\n  }\n}\n\n/**\n * @description 上传失败捕获\n * @param {Object} err 错误返回信息\n * @param {Object} file 上传的文件\n */\nfunction handleError(err: Record<string, any>, file: UploadFileItem, formData: Record<string, any>) {\n  const { statusKey } = props\n  const index = uploadFiles.value.findIndex((item) => item.uid === file.uid)\n  if (index > -1) {\n    uploadFiles.value[index][statusKey] = 'fail'\n    uploadFiles.value[index].error = err.message\n    uploadFiles.value[index].response = err\n    emit('fail', { error: err, file, formData })\n    emitFileList()\n  }\n}\n\n/**\n * @description 上传成功捕获\n * @param {Object} res 接口返回信息\n * @param {Object} file 上传的文件\n */\nfunction handleSuccess(res: Record<string, any>, file: UploadFileItem, formData: Record<string, any>) {\n  const { statusKey } = props\n  const index = uploadFiles.value.findIndex((item) => item.uid === file.uid)\n  if (index > -1) {\n    uploadFiles.value[index][statusKey] = 'success'\n    uploadFiles.value[index].response = res.data\n    emit('change', { fileList: uploadFiles.value })\n    emit('success', { file, fileList: uploadFiles.value, formData })\n    emitFileList()\n  }\n}\n\n/**\n * @description 上传中捕获\n * @param {Object} res 接口返回信息\n * @param {Object} file 上传的文件\n */\nfunction handleProgress(res: UniApp.OnProgressUpdateResult, file: UploadFileItem) {\n  const index = uploadFiles.value.findIndex((item) => item.uid === file.uid)\n  if (index > -1) {\n    uploadFiles.value[index].percent = res.progress\n    emit('progress', { response: res, file })\n  }\n}\n\n/**\n * @description 选择文件的实际操作，将chooseFile自己用promise包了一层\n */\nfunction onChooseFile(currentIndex?: number) {\n  const { multiple, maxSize, accept, sizeType, limit, sourceType, compressed, maxDuration, camera, beforeUpload, extension } = props\n\n  chooseFile({\n    multiple,\n    sizeType,\n    sourceType,\n    maxCount: limit ? limit - uploadFiles.value.length : 9,\n    accept,\n    compressed,\n    maxDuration,\n    camera,\n    extension\n  })\n    .then((res) => {\n      // 成功选择初始化file\n      let files = res\n      // 单选只有一个\n      if (!multiple) {\n        files = files.slice(0, 1)\n      }\n      // 遍历列表逐个初始化上传参数\n      const mapFiles = async (files: ChooseFile[]) => {\n        for (let index = 0; index < files.length; index++) {\n          const file = files[index]\n          if (file.type === 'image' && !file.size) {\n            const imageInfo = await getImageInfo(file.path)\n            file.size = imageInfo.width * imageInfo.height\n          }\n          Number(file.size) <= maxSize ? initFile(file, currentIndex) : emit('oversize', { file })\n        }\n      }\n\n      // 上传前的钩子\n      if (beforeUpload) {\n        beforeUpload({\n          files,\n          fileList: uploadFiles.value,\n          resolve: (isPass: boolean) => {\n            isPass && mapFiles(files)\n          }\n        })\n      } else {\n        mapFiles(files)\n      }\n    })\n    .catch((error) => {\n      emit('chooseerror', { error })\n    })\n}\n\n/**\n * @description 选择文件，内置拦截选择操作\n */\nfunction handleChoose(index?: number) {\n  if (props.disabled) return\n  const { beforeChoose } = props\n\n  // 选择图片前的钩子\n  if (beforeChoose) {\n    beforeChoose({\n      fileList: uploadFiles.value,\n      resolve: (isPass: boolean) => {\n        isPass && onChooseFile(index)\n      }\n    })\n  } else {\n    onChooseFile(index)\n  }\n}\n\n/**\n * @description 移除文件\n * @param {Object} file 上传的文件\n * @param {Number} index 删除\n */\nfunction handleRemove(file: UploadFileItem) {\n  uploadFiles.value.splice(\n    uploadFiles.value.findIndex((item) => item.uid === file.uid),\n    1\n  )\n  emit('change', {\n    fileList: uploadFiles.value\n  })\n  emit('remove', { file })\n  emitFileList()\n}\n\nfunction removeFile(index: number) {\n  const { beforeRemove } = props\n  const intIndex: number = index\n  const file = uploadFiles.value[intIndex]\n  if (beforeRemove) {\n    beforeRemove({\n      file,\n      index: intIndex,\n      fileList: uploadFiles.value,\n      resolve: (isPass: boolean) => {\n        isPass && handleRemove(file)\n      }\n    })\n  } else {\n    handleRemove(file)\n  }\n}\n\n/**\n * 预览文件\n * @param file\n */\nfunction handlePreviewFile(file: UploadFileItem) {\n  uni.openDocument({\n    filePath: file.url,\n    showMenu: true\n  })\n}\n\n/**\n * 预览图片\n * @param index\n * @param lists\n */\nfunction handlePreviewImage(index: number, lists: string[]) {\n  const { onPreviewFail } = props\n  uni.previewImage({\n    urls: lists,\n    current: lists[index],\n    fail() {\n      if (onPreviewFail) {\n        onPreviewFail({\n          index,\n          imgList: lists\n        })\n      } else {\n        uni.showToast({ title: '预览图片失败', icon: 'none' })\n      }\n    }\n  })\n}\n\n/**\n * 预览视频\n * @param index\n * @param lists\n */\nfunction handlePreviewVieo(index: number, lists: UploadFileItem[]) {\n  const { onPreviewFail } = props\n\n  uni.previewMedia({\n    current: index,\n    sources: lists.map((file) => {\n      return {\n        url: file.url,\n        type: 'video',\n        poster: file.thumb\n      }\n    }),\n    fail() {\n      if (onPreviewFail) {\n        onPreviewFail({\n          index,\n          imgList: []\n        })\n      } else {\n        uni.showToast({ title: '预览视频失败', icon: 'none' })\n      }\n    }\n  })\n\n\n\n\n\n}\n\nfunction onPreviewImage(file: UploadFileItem) {\n  const { beforePreview, reupload } = props\n  const fileList = deepClone(uploadFiles.value)\n  const index: number = fileList.findIndex((item) => item.url === file.url)\n  const imgList = fileList.filter((file) => isImage(file)).map((file) => file.url)\n  const imgIndex: number = imgList.findIndex((item) => item === file.url)\n  if (reupload) {\n    handleChoose(index)\n  } else {\n    if (beforePreview) {\n      beforePreview({\n        file,\n        index,\n        fileList: fileList,\n        imgList: imgList,\n        resolve: (isPass: boolean) => {\n          isPass && handlePreviewImage(imgIndex, imgList)\n        }\n      })\n    } else {\n      handlePreviewImage(imgIndex, imgList)\n    }\n  }\n}\n\nfunction onPreviewVideo(file: UploadFileItem) {\n  const { beforePreview, reupload } = props\n  const fileList = deepClone(uploadFiles.value)\n  const index: number = fileList.findIndex((item) => item.url === file.url)\n  const videoList = fileList.filter((file) => isVideo(file))\n  const videoIndex: number = videoList.findIndex((item) => item.url === file.url)\n  if (reupload) {\n    handleChoose(index)\n  } else {\n    if (beforePreview) {\n      beforePreview({\n        file,\n        index,\n        imgList: [],\n        fileList,\n        resolve: (isPass: boolean) => {\n          isPass && handlePreviewVieo(videoIndex, videoList)\n        }\n      })\n    } else {\n      handlePreviewVieo(videoIndex, videoList)\n    }\n  }\n}\n\nfunction onPreviewFile(file: UploadFileItem) {\n  const { beforePreview, reupload } = props\n  const fileList = deepClone(uploadFiles.value)\n  const index: number = fileList.findIndex((item) => item.url === file.url)\n  if (reupload) {\n    handleChoose(index)\n  } else {\n    if (beforePreview) {\n      beforePreview({\n        file,\n        index,\n        imgList: [],\n        fileList,\n        resolve: (isPass: boolean) => {\n          isPass && handlePreviewFile(file)\n        }\n      })\n    } else {\n      handlePreviewFile(file)\n    }\n  }\n}\n\nfunction isVideo(file: UploadFileItem) {\n  return (file.name && isVideoUrl(file.name)) || isVideoUrl(file.url)\n}\n\nfunction isImage(file: UploadFileItem) {\n  return (file.name && isImageUrl(file.name)) || isImageUrl(file.url)\n}\n</script>\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","import Component from '/Users/jing/Code/mini/vehicle-info/uni_modules/wot-design-uni/components/wd-upload/wd-upload.vue'\nwx.createComponent(Component)"],"names":["wdIcon","wdVideoPreview","wdLoading","__default__","props","__props","emit","__emit","__expose","startUploadFiles","abort","translate","useTranslate","uploadFiles","ref","showUpload","computed","videoPreview","startUpload","chooseFile","UPLOAD_STATUS","useUpload","watch","val","statusKey","isEqual","uploadFileList","item","context","uni","fn","isFunction","emitFileList","buildFormData","formData","action","name","header","accept","successStatus","uploadMethod","statusCode","isDef","uploadFile","handleSuccess","handleError","handleProgress","getImageInfo","img","resolve","reject","res","error","initFile","file","currentIndex","initState","err","index","onChooseFile","multiple","maxSize","sizeType","limit","sourceType","compressed","maxDuration","camera","beforeUpload","extension","files","mapFiles","imageInfo","isPass","handleChoose","beforeChoose","handleRemove","removeFile","beforeRemove","intIndex","handlePreviewFile","handlePreviewImage","lists","onPreviewFail","handlePreviewVieo","onPreviewImage","beforePreview","reupload","fileList","deepClone","imgList","isImage","imgIndex","onPreviewVideo","videoList","isVideo","videoIndex","onPreviewFile","isVideoUrl","isImageUrl","Component"],"mappings":"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"}