{"version":3,"file":"wd-grid-item.js","sources":["uni_modules/wot-design-uni/components/wd-grid-item/wd-grid-item.vue","/Users/jing/Code/mini/vehicle-info/uni_modules/wot-design-uni/components/wd-grid-item/wd-grid-item.vue?type=component"],"sourcesContent":["<template>\n  <view :class=\"`wd-grid-item ${border && !gutter ? itemClass : ''} ${customClass}`\" @click=\"click\" :style=\"`${style};${customStyle}`\">\n    <view\n      :class=\"`wd-grid-item__content ${square ? 'is-square' : ''} ${border && gutter > 0 ? 'is-round' : ''}`\"\n      :style=\"gutterContentStyle\"\n      :hover-class=\"hoverClass\"\n    >\n      <slot v-if=\"useSlot\" />\n      <template v-else>\n        <view :style=\"'width:' + iconSize + '; height: ' + iconSize\" class=\"wd-grid-item__wrapper\">\n          <wd-badge custom-class=\"badge\" v-bind=\"customBadgeProps\">\n            <template v-if=\"useIconSlot\">\n              <slot name=\"icon\" />\n            </template>\n            <wd-icon v-else :name=\"icon\" :size=\"iconSize\" :custom-class=\"customIcon\" />\n          </wd-badge>\n        </view>\n        <slot name=\"text\" v-if=\"useTextSlot\" />\n        <view v-else class=\"wd-grid-item__text custom-text\">{{ text }}</view>\n      </template>\n    </view>\n  </view>\n</template>\n<script lang=\"ts\">\nexport default {\n  name: 'wd-grid-item',\n  options: {\n    virtualHost: true,\n    addGlobalClass: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport wdIcon from '../wd-icon/wd-icon.vue'\nimport wdBadge from '../wd-badge/wd-badge.vue'\nimport { onMounted, ref, watch, computed } from 'vue'\nimport { useParent } from '../composables/useParent'\nimport { GRID_KEY } from '../wd-grid/types'\nimport { deepAssign, isDef, isUndefined, omitBy } from '../common/util'\nimport { gridItemProps } from './types'\nimport type { BadgeProps } from '../wd-badge/types'\n\nconst props = defineProps(gridItemProps)\nconst emit = defineEmits(['itemclick'])\n\nconst style = ref<string>('')\nconst gutterContentStyle = ref<string>('')\nconst itemClass = ref<string>('')\nconst gutter = ref<number>(0)\nconst square = ref<boolean>(false)\nconst border = ref<boolean>(true)\nconst { parent: grid } = useParent(GRID_KEY)\n\nconst childCount = computed(() => {\n  if (isDef(grid) && isDef(grid.children)) {\n    return grid.children.length\n  } else {\n    return 0\n  }\n})\n\nconst customBadgeProps = computed(() => {\n  const badgeProps: Partial<BadgeProps> = deepAssign(\n    isDef(props.badgeProps) ? omitBy(props.badgeProps, isUndefined) : {},\n    omitBy(\n      {\n        max: props.max,\n        isDot: props.isDot,\n        modelValue: props.value,\n        type: props.type\n      },\n      isUndefined\n    )\n  )\n  return badgeProps\n})\n\nwatch(\n  () => childCount.value,\n  () => {\n    if (!grid) return\n    const width = grid.props.column ? 100 / grid.props.column + '%' : 100 / (childCount.value || 1) + '%'\n    // 单独定义间隔\n    const gutterStyle = grid.props.gutter ? `padding:${grid.props.gutter}px ${grid.props.gutter}px 0 0; background-color: transparent;` : ''\n    // 单独定义正方形\n    const squareStyle = grid.props.square ? `background-color:transparent; padding-bottom: 0; padding-top:${width}` : ''\n    style.value = `width: ${width}; ${squareStyle || gutterStyle}`\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\nonMounted(() => {\n  init()\n})\n\nfunction init() {\n  if (!grid) return\n  const children = grid.children\n  const width = grid.props.column ? 100 / grid.props.column + '%' : 100 / children.length + '%'\n  // 单独定义间隔\n  const gutterStyle = grid.props.gutter ? `padding:${grid.props.gutter}px ${grid.props.gutter}px 0 0; background-color: transparent;` : ''\n  // 单独定义正方形\n  const squareStyle = grid.props.square ? `background-color:transparent; padding-bottom: 0; padding-top:${width}` : ''\n  // 间隔+正方形\n  gutterContentStyle.value =\n    grid.props.gutter && grid.props.square\n      ? `right: ${grid.props.gutter}px; bottom:${grid.props.gutter}px;height: auto; background-color: ${grid.props.bgColor}`\n      : `background-color: ${grid.props.bgColor}`\n\n  border.value = Boolean(grid.props.border)\n  square.value = Boolean(grid.props.square)\n  gutter.value = Number(grid.props.gutter)\n  style.value = `width: ${width}; ${squareStyle || gutterStyle}`\n}\n\nfunction click() {\n  if (grid && !grid.props.clickable) return\n  const { url, linkType } = props\n  emit('itemclick')\n  if (url) {\n    switch (linkType) {\n      case 'navigateTo':\n        uni.navigateTo({\n          url\n        })\n        break\n      case 'reLaunch':\n        uni.reLaunch({\n          url\n        })\n        break\n      case 'redirectTo':\n        uni.redirectTo({\n          url\n        })\n        break\n      case 'switchTab':\n        uni.switchTab({\n          url\n        })\n        break\n      default:\n        uni.__f__('error','at uni_modules/wot-design-uni/components/wd-grid-item/wd-grid-item.vue:148',`[wot-design] warning(wd-grid-item): linkType can not be ${linkType}`)\n        break\n    }\n  }\n}\n/**\n * 设置样式\n * @param classes\n */\nfunction setiIemClass(classes: string) {\n  itemClass.value = classes\n}\n\nconst hoverClass = computed(() => {\n  if (grid?.props.clickable) {\n    return grid.props.hoverClass ? grid.props.hoverClass : 'wd-grid-item__content--hover'\n  }\n  return 'none'\n})\n\ndefineExpose({\n  setiIemClass,\n  itemClass,\n  init\n})\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","import Component from '/Users/jing/Code/mini/vehicle-info/uni_modules/wot-design-uni/components/wd-grid-item/wd-grid-item.vue'\nwx.createComponent(Component)"],"names":["wdIcon","wdBadge","__default__","props","__props","emit","__emit","style","ref","gutterContentStyle","itemClass","gutter","square","border","grid","useParent","GRID_KEY","childCount","computed","isDef","customBadgeProps","deepAssign","omitBy","isUndefined","watch","width","gutterStyle","squareStyle","onMounted","init","children","click","url","linkType","uni","setiIemClass","classes","hoverClass","__expose","Component"],"mappings":"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"}