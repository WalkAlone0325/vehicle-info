{"version":3,"file":"wd-checkbox.js","sources":["uni_modules/wot-design-uni/components/wd-checkbox/wd-checkbox.vue","/Users/jing/Code/mini/vehicle-info/uni_modules/wot-design-uni/components/wd-checkbox/wd-checkbox.vue?type=component"],"sourcesContent":["<template>\n  <view\n    :class=\"`wd-checkbox ${innerCell ? 'is-cell-box' : ''} ${innerShape === 'button' ? 'is-button-box' : ''} ${isChecked ? 'is-checked' : ''} ${\n      isFirst ? 'is-first-child' : ''\n    } ${isLast ? 'is-last-child' : ''} ${innerInline ? 'is-inline' : ''} ${innerShape === 'button' ? 'is-button' : ''} ${\n      innerDisabled ? 'is-disabled' : ''\n    } ${innerSize ? 'is-' + innerSize : ''} ${customClass}`\"\n    :style=\"customStyle\"\n    @click=\"toggle\"\n  >\n    <!--shape为button时，移除wd-checkbox__shape，只保留wd-checkbox__label-->\n    <view\n      v-if=\"innerShape !== 'button'\"\n      :class=\"`wd-checkbox__shape ${innerShape === 'square' ? 'is-square' : ''} ${customShapeClass}`\"\n      :style=\"isChecked && !innerDisabled && innerCheckedColor ? 'color :' + innerCheckedColor : ''\"\n    >\n      <wd-icon custom-class=\"wd-checkbox__check\" name=\"check-bold\" />\n    </view>\n    <!--shape为button时只保留wd-checkbox__label-->\n    <view\n      :class=\"`wd-checkbox__label ${customLabelClass}`\"\n      :style=\"isChecked && innerShape === 'button' && !innerDisabled && innerCheckedColor ? 'color:' + innerCheckedColor : ''\"\n    >\n      <!--button选中时展示的icon-->\n      <wd-icon v-if=\"innerShape === 'button' && isChecked\" custom-class=\"wd-checkbox__btn-check\" name=\"check-bold\" />\n      <!--文案-->\n      <view class=\"wd-checkbox__txt\" :style=\"maxWidth ? 'max-width:' + maxWidth : ''\">\n        <slot></slot>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  name: 'wd-checkbox',\n  options: {\n    addGlobalClass: true,\n    virtualHost: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport wdIcon from '../wd-icon/wd-icon.vue'\nimport { computed, getCurrentInstance, onBeforeMount, watch } from 'vue'\nimport { useParent } from '../composables/useParent'\nimport { CHECKBOX_GROUP_KEY } from '../wd-checkbox-group/types'\nimport { getPropByPath, isDef } from '../common/util'\nimport { checkboxProps, type CheckboxExpose } from './types'\n\nconst props = defineProps(checkboxProps)\nconst emit = defineEmits(['change', 'update:modelValue'])\n\ndefineExpose<CheckboxExpose>({\n  toggle\n})\n\nconst { parent: checkboxGroup, index } = useParent(CHECKBOX_GROUP_KEY)\n\nconst isChecked = computed(() => {\n  if (checkboxGroup) {\n    return checkboxGroup.props.modelValue.indexOf(props.modelValue) > -1\n  } else {\n    return props.modelValue === props.trueValue\n  }\n}) // 是否被选中\n\nconst isFirst = computed(() => {\n  return index.value === 0\n})\n\nconst isLast = computed(() => {\n  const children = isDef(checkboxGroup) ? checkboxGroup.children : []\n  return index.value === children.length - 1\n})\nconst { proxy } = getCurrentInstance() as any\n\nwatch(\n  () => props.modelValue,\n  () => {\n    // 组合使用走这个逻辑\n    if (checkboxGroup) {\n      checkName()\n    }\n  }\n)\n\nwatch(\n  () => props.shape,\n  (newValue) => {\n    const type = ['circle', 'square', 'button']\n    if (isDef(newValue) && type.indexOf(newValue) === -1) uni.__f__('error','at uni_modules/wot-design-uni/components/wd-checkbox/wd-checkbox.vue:94',`shape must be one of ${type.toString()}`)\n  }\n)\n\nconst innerShape = computed(() => {\n  return props.shape || getPropByPath(checkboxGroup, 'props.shape') || 'circle'\n})\n\nconst innerCheckedColor = computed(() => {\n  return props.checkedColor || getPropByPath(checkboxGroup, 'props.checkedColor')\n})\n\nconst innerDisabled = computed(() => {\n  if (!checkboxGroup) {\n    return props.disabled\n  }\n  const { max, min, modelValue, disabled } = checkboxGroup.props\n  if (\n    (max && modelValue.length >= max && !isChecked.value) ||\n    (min && modelValue.length <= min && isChecked.value) ||\n    props.disabled === true ||\n    (disabled && props.disabled === null)\n  ) {\n    return true\n  }\n\n  return props.disabled\n})\n\nconst innerInline = computed(() => {\n  return getPropByPath(checkboxGroup, 'props.inline') || false\n})\n\nconst innerCell = computed(() => {\n  return getPropByPath(checkboxGroup, 'props.cell') || false\n})\n\nconst innerSize = computed(() => {\n  return props.size || getPropByPath(checkboxGroup, 'props.size')\n})\n\nonBeforeMount(() => {\n  // eslint-disable-next-line quotes\n  if (props.modelValue === null) uni.__f__('error','at uni_modules/wot-design-uni/components/wd-checkbox/wd-checkbox.vue:137',\"checkbox's value must be set\")\n})\n\n/**\n * @description 检测checkbox绑定的value是否和其它checkbox的value冲突\n * @param {Object} self 自身\n * @param  myName 自己的标识符\n */\nfunction checkName() {\n  checkboxGroup &&\n    checkboxGroup.children &&\n    checkboxGroup.children.forEach((child: any) => {\n      if (child.$.uid !== proxy.$.uid && child.modelValue === props.modelValue) {\n        uni.__f__('error','at uni_modules/wot-design-uni/components/wd-checkbox/wd-checkbox.vue:150',`The checkbox's bound value: ${props.modelValue} has been used`)\n      }\n    })\n}\n/**\n * @description 点击checkbox的Event handle\n */\nfunction toggle() {\n  if (innerDisabled.value) return\n  // 复选框单独使用时点击反选，并且在checkbox上触发change事件\n  if (checkboxGroup) {\n    emit('change', {\n      value: !isChecked.value\n    })\n    checkboxGroup.changeSelectState(props.modelValue)\n  } else {\n    const newVal = props.modelValue === props.trueValue ? props.falseValue : props.trueValue\n    emit('update:modelValue', newVal)\n    emit('change', {\n      value: newVal\n    })\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","import Component from '/Users/jing/Code/mini/vehicle-info/uni_modules/wot-design-uni/components/wd-checkbox/wd-checkbox.vue'\nwx.createComponent(Component)"],"names":["wdIcon","__default__","props","__props","emit","__emit","__expose","toggle","checkboxGroup","index","useParent","CHECKBOX_GROUP_KEY","isChecked","computed","isFirst","isLast","children","isDef","proxy","getCurrentInstance","watch","checkName","newValue","type","uni","innerShape","getPropByPath","innerCheckedColor","innerDisabled","max","min","modelValue","disabled","innerInline","innerCell","innerSize","onBeforeMount","child","newVal","Component"],"mappings":"kNA6CA,MAAAA,EAAmB,IAAA,wBAXnBC,EAAe,CACb,KAAM,cACN,QAAS,CACP,eAAgB,GAChB,YAAa,GACb,eAAgB,QAClB,CACF,kHAWA,MAAMC,EAAQC,EACRC,EAAOC,EAEgBC,EAAA,CAC3B,OAAAC,CAAA,CACD,EAED,KAAM,CAAE,OAAQC,EAAe,MAAAC,CAAM,EAAIC,EAAAA,UAAUC,EAAAA,kBAAkB,EAE/DC,EAAYC,EAAAA,SAAS,IACrBL,EACKA,EAAc,MAAM,WAAW,QAAQN,EAAM,UAAU,EAAI,GAE3DA,EAAM,aAAeA,EAAM,SAErC,EAEKY,EAAUD,EAAAA,SAAS,IAChBJ,EAAM,QAAU,CACxB,EAEKM,EAASF,EAAAA,SAAS,IAAM,CAC5B,MAAMG,EAAWC,EAAAA,MAAMT,CAAa,EAAIA,EAAc,SAAW,GAC1D,OAAAC,EAAM,QAAUO,EAAS,OAAS,CAAA,CAC1C,EACK,CAAE,MAAAE,GAAUC,EAAAA,qBAElBC,EAAA,MACE,IAAMlB,EAAM,WACZ,IAAM,CAEAM,GACQa,GAEd,CAAA,EAGFD,EAAA,MACE,IAAMlB,EAAM,MACXoB,GAAa,CACZ,MAAMC,EAAO,CAAC,SAAU,SAAU,QAAQ,EACtCN,EAAAA,MAAMK,CAAQ,GAAKC,EAAK,QAAQD,CAAQ,IAAM,IAAIE,QAAI,MAAM,QAAQ,0EAA0E,wBAAwBD,EAAK,UAAU,EAAE,CAC7L,CAAA,EAGI,MAAAE,EAAaZ,EAAAA,SAAS,IACnBX,EAAM,OAASwB,EAAAA,cAAclB,EAAe,aAAa,GAAK,QACtE,EAEKmB,EAAoBd,EAAAA,SAAS,IAC1BX,EAAM,cAAgBwB,EAAc,cAAAlB,EAAe,oBAAoB,CAC/E,EAEKoB,EAAgBf,EAAAA,SAAS,IAAM,CACnC,GAAI,CAACL,EACH,OAAON,EAAM,SAEf,KAAM,CAAE,IAAA2B,EAAK,IAAAC,EAAK,WAAAC,EAAY,SAAAC,GAAaxB,EAAc,MACzD,OACGqB,GAAOE,EAAW,QAAUF,GAAO,CAACjB,EAAU,OAC9CkB,GAAOC,EAAW,QAAUD,GAAOlB,EAAU,OAC9CV,EAAM,WAAa,IAClB8B,GAAY9B,EAAM,WAAa,KAEzB,GAGFA,EAAM,QAAA,CACd,EAEK+B,EAAcpB,EAAAA,SAAS,IACpBa,gBAAclB,EAAe,cAAc,GAAK,EACxD,EAEK0B,EAAYrB,EAAAA,SAAS,IAClBa,gBAAclB,EAAe,YAAY,GAAK,EACtD,EAEK2B,EAAYtB,EAAAA,SAAS,IAClBX,EAAM,MAAQwB,EAAc,cAAAlB,EAAe,YAAY,CAC/D,EAED4B,EAAAA,cAAc,IAAM,CAEdlC,EAAM,aAAe,MAAUsB,EAAAA,MAAA,MAAM,QAAQ,2EAA2E,8BAA8B,CAAA,CAC3J,EAOD,SAASH,GAAY,CACnBb,GACEA,EAAc,UACdA,EAAc,SAAS,QAAS6B,GAAe,CACzCA,EAAM,EAAE,MAAQnB,EAAM,EAAE,KAAOmB,EAAM,aAAenC,EAAM,YAC5DsB,QAAI,MAAM,QAAQ,2EAA2E,+BAA+BtB,EAAM,UAAU,gBAAgB,CAC9J,CACD,CACL,CAIA,SAASK,GAAS,CAChB,GAAI,CAAAqB,EAAc,MAElB,GAAIpB,EACFJ,EAAK,SAAU,CACb,MAAO,CAACQ,EAAU,KAAA,CACnB,EACaJ,EAAA,kBAAkBN,EAAM,UAAU,MAC3C,CACL,MAAMoC,EAASpC,EAAM,aAAeA,EAAM,UAAYA,EAAM,WAAaA,EAAM,UAC/EE,EAAK,oBAAqBkC,CAAM,EAChClC,EAAK,SAAU,CACb,MAAOkC,CAAA,CACR,CACH,CACF,88BC1KA,GAAG,gBAAgBC,CAAS"}