{"version":3,"file":"asn1.js","sources":["uni_modules/jsencrypt/lib/lib/asn1js/asn1.js"],"sourcesContent":["// ASN.1 JavaScript decoder\n// Copyright (c) 2008-2014 Lapo Luchini <lapo@lapo.it>\n// Permission to use, copy, modify, and/or distribute this software for any\n// purpose with or without fee is hereby granted, provided that the above\n// copyright notice and this permission notice appear in all copies.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */\n/*global oids */\nimport { Int10 } from \"./int10\";\nvar ellipsis = \"\\u2026\";\nvar reTimeS = /^(\\d\\d)(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])([01]\\d|2[0-3])(?:([0-5]\\d)(?:([0-5]\\d)(?:[.,](\\d{1,3}))?)?)?(Z|[-+](?:[0]\\d|1[0-2])([0-5]\\d)?)?$/;\nvar reTimeL = /^(\\d\\d\\d\\d)(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])([01]\\d|2[0-3])(?:([0-5]\\d)(?:([0-5]\\d)(?:[.,](\\d{1,3}))?)?)?(Z|[-+](?:[0]\\d|1[0-2])([0-5]\\d)?)?$/;\nfunction stringCut(str, len) {\n    if (str.length > len) {\n        str = str.substring(0, len) + ellipsis;\n    }\n    return str;\n}\nvar Stream = /** @class */ (function () {\n    function Stream(enc, pos) {\n        this.hexDigits = \"0123456789ABCDEF\";\n        if (enc instanceof Stream) {\n            this.enc = enc.enc;\n            this.pos = enc.pos;\n        }\n        else {\n            // enc should be an array or a binary string\n            this.enc = enc;\n            this.pos = pos;\n        }\n    }\n    Stream.prototype.get = function (pos) {\n        if (pos === undefined) {\n            pos = this.pos++;\n        }\n        if (pos >= this.enc.length) {\n            throw new Error(\"Requesting byte offset \".concat(pos, \" on a stream of length \").concat(this.enc.length));\n        }\n        return (\"string\" === typeof this.enc) ? this.enc.charCodeAt(pos) : this.enc[pos];\n    };\n    Stream.prototype.hexByte = function (b) {\n        return this.hexDigits.charAt((b >> 4) & 0xF) + this.hexDigits.charAt(b & 0xF);\n    };\n    Stream.prototype.hexDump = function (start, end, raw) {\n        var s = \"\";\n        for (var i = start; i < end; ++i) {\n            s += this.hexByte(this.get(i));\n            if (raw !== true) {\n                switch (i & 0xF) {\n                    case 0x7:\n                        s += \"  \";\n                        break;\n                    case 0xF:\n                        s += \"\\n\";\n                        break;\n                    default:\n                        s += \" \";\n                }\n            }\n        }\n        return s;\n    };\n    Stream.prototype.isASCII = function (start, end) {\n        for (var i = start; i < end; ++i) {\n            var c = this.get(i);\n            if (c < 32 || c > 176) {\n                return false;\n            }\n        }\n        return true;\n    };\n    Stream.prototype.parseStringISO = function (start, end) {\n        var s = \"\";\n        for (var i = start; i < end; ++i) {\n            s += String.fromCharCode(this.get(i));\n        }\n        return s;\n    };\n    Stream.prototype.parseStringUTF = function (start, end) {\n        var s = \"\";\n        for (var i = start; i < end;) {\n            var c = this.get(i++);\n            if (c < 128) {\n                s += String.fromCharCode(c);\n            }\n            else if ((c > 191) && (c < 224)) {\n                s += String.fromCharCode(((c & 0x1F) << 6) | (this.get(i++) & 0x3F));\n            }\n            else {\n                s += String.fromCharCode(((c & 0x0F) << 12) | ((this.get(i++) & 0x3F) << 6) | (this.get(i++) & 0x3F));\n            }\n        }\n        return s;\n    };\n    Stream.prototype.parseStringBMP = function (start, end) {\n        var str = \"\";\n        var hi;\n        var lo;\n        for (var i = start; i < end;) {\n            hi = this.get(i++);\n            lo = this.get(i++);\n            str += String.fromCharCode((hi << 8) | lo);\n        }\n        return str;\n    };\n    Stream.prototype.parseTime = function (start, end, shortYear) {\n        var s = this.parseStringISO(start, end);\n        var m = (shortYear ? reTimeS : reTimeL).exec(s);\n        if (!m) {\n            return \"Unrecognized time: \" + s;\n        }\n        if (shortYear) {\n            // to avoid querying the timer, use the fixed range [1970, 2069]\n            // it will conform with ITU X.400 [-10, +40] sliding window until 2030\n            m[1] = +m[1];\n            m[1] += (+m[1] < 70) ? 2000 : 1900;\n        }\n        s = m[1] + \"-\" + m[2] + \"-\" + m[3] + \" \" + m[4];\n        if (m[5]) {\n            s += \":\" + m[5];\n            if (m[6]) {\n                s += \":\" + m[6];\n                if (m[7]) {\n                    s += \".\" + m[7];\n                }\n            }\n        }\n        if (m[8]) {\n            s += \" UTC\";\n            if (m[8] != \"Z\") {\n                s += m[8];\n                if (m[9]) {\n                    s += \":\" + m[9];\n                }\n            }\n        }\n        return s;\n    };\n    Stream.prototype.parseInteger = function (start, end) {\n        var v = this.get(start);\n        var neg = (v > 127);\n        var pad = neg ? 255 : 0;\n        var len;\n        var s = \"\";\n        // skip unuseful bits (not allowed in DER)\n        while (v == pad && ++start < end) {\n            v = this.get(start);\n        }\n        len = end - start;\n        if (len === 0) {\n            return neg ? -1 : 0;\n        }\n        // show bit length of huge integers\n        if (len > 4) {\n            s = v;\n            len <<= 3;\n            while (((+s ^ pad) & 0x80) == 0) {\n                s = +s << 1;\n                --len;\n            }\n            s = \"(\" + len + \" bit)\\n\";\n        }\n        // decode the integer\n        if (neg) {\n            v = v - 256;\n        }\n        var n = new Int10(v);\n        for (var i = start + 1; i < end; ++i) {\n            n.mulAdd(256, this.get(i));\n        }\n        return s + n.toString();\n    };\n    Stream.prototype.parseBitString = function (start, end, maxLength) {\n        var unusedBit = this.get(start);\n        var lenBit = ((end - start - 1) << 3) - unusedBit;\n        var intro = \"(\" + lenBit + \" bit)\\n\";\n        var s = \"\";\n        for (var i = start + 1; i < end; ++i) {\n            var b = this.get(i);\n            var skip = (i == end - 1) ? unusedBit : 0;\n            for (var j = 7; j >= skip; --j) {\n                s += (b >> j) & 1 ? \"1\" : \"0\";\n            }\n            if (s.length > maxLength) {\n                return intro + stringCut(s, maxLength);\n            }\n        }\n        return intro + s;\n    };\n    Stream.prototype.parseOctetString = function (start, end, maxLength) {\n        if (this.isASCII(start, end)) {\n            return stringCut(this.parseStringISO(start, end), maxLength);\n        }\n        var len = end - start;\n        var s = \"(\" + len + \" byte)\\n\";\n        maxLength /= 2; // we work in bytes\n        if (len > maxLength) {\n            end = start + maxLength;\n        }\n        for (var i = start; i < end; ++i) {\n            s += this.hexByte(this.get(i));\n        }\n        if (len > maxLength) {\n            s += ellipsis;\n        }\n        return s;\n    };\n    Stream.prototype.parseOID = function (start, end, maxLength) {\n        var s = \"\";\n        var n = new Int10();\n        var bits = 0;\n        for (var i = start; i < end; ++i) {\n            var v = this.get(i);\n            n.mulAdd(128, v & 0x7F);\n            bits += 7;\n            if (!(v & 0x80)) { // finished\n                if (s === \"\") {\n                    n = n.simplify();\n                    if (n instanceof Int10) {\n                        n.sub(80);\n                        s = \"2.\" + n.toString();\n                    }\n                    else {\n                        var m = n < 80 ? n < 40 ? 0 : 1 : 2;\n                        s = m + \".\" + (n - m * 40);\n                    }\n                }\n                else {\n                    s += \".\" + n.toString();\n                }\n                if (s.length > maxLength) {\n                    return stringCut(s, maxLength);\n                }\n                n = new Int10();\n                bits = 0;\n            }\n        }\n        if (bits > 0) {\n            s += \".incomplete\";\n        }\n        return s;\n    };\n    return Stream;\n}());\nexport { Stream };\nvar ASN1 = /** @class */ (function () {\n    function ASN1(stream, header, length, tag, sub) {\n        if (!(tag instanceof ASN1Tag)) {\n            throw new Error(\"Invalid tag value.\");\n        }\n        this.stream = stream;\n        this.header = header;\n        this.length = length;\n        this.tag = tag;\n        this.sub = sub;\n    }\n    ASN1.prototype.typeName = function () {\n        switch (this.tag.tagClass) {\n            case 0: // universal\n                switch (this.tag.tagNumber) {\n                    case 0x00:\n                        return \"EOC\";\n                    case 0x01:\n                        return \"BOOLEAN\";\n                    case 0x02:\n                        return \"INTEGER\";\n                    case 0x03:\n                        return \"BIT_STRING\";\n                    case 0x04:\n                        return \"OCTET_STRING\";\n                    case 0x05:\n                        return \"NULL\";\n                    case 0x06:\n                        return \"OBJECT_IDENTIFIER\";\n                    case 0x07:\n                        return \"ObjectDescriptor\";\n                    case 0x08:\n                        return \"EXTERNAL\";\n                    case 0x09:\n                        return \"REAL\";\n                    case 0x0A:\n                        return \"ENUMERATED\";\n                    case 0x0B:\n                        return \"EMBEDDED_PDV\";\n                    case 0x0C:\n                        return \"UTF8String\";\n                    case 0x10:\n                        return \"SEQUENCE\";\n                    case 0x11:\n                        return \"SET\";\n                    case 0x12:\n                        return \"NumericString\";\n                    case 0x13:\n                        return \"PrintableString\"; // ASCII subset\n                    case 0x14:\n                        return \"TeletexString\"; // aka T61String\n                    case 0x15:\n                        return \"VideotexString\";\n                    case 0x16:\n                        return \"IA5String\"; // ASCII\n                    case 0x17:\n                        return \"UTCTime\";\n                    case 0x18:\n                        return \"GeneralizedTime\";\n                    case 0x19:\n                        return \"GraphicString\";\n                    case 0x1A:\n                        return \"VisibleString\"; // ASCII subset\n                    case 0x1B:\n                        return \"GeneralString\";\n                    case 0x1C:\n                        return \"UniversalString\";\n                    case 0x1E:\n                        return \"BMPString\";\n                }\n                return \"Universal_\" + this.tag.tagNumber.toString();\n            case 1:\n                return \"Application_\" + this.tag.tagNumber.toString();\n            case 2:\n                return \"[\" + this.tag.tagNumber.toString() + \"]\"; // Context\n            case 3:\n                return \"Private_\" + this.tag.tagNumber.toString();\n        }\n    };\n    ASN1.prototype.content = function (maxLength) {\n        if (this.tag === undefined) {\n            return null;\n        }\n        if (maxLength === undefined) {\n            maxLength = Infinity;\n        }\n        var content = this.posContent();\n        var len = Math.abs(this.length);\n        if (!this.tag.isUniversal()) {\n            if (this.sub !== null) {\n                return \"(\" + this.sub.length + \" elem)\";\n            }\n            return this.stream.parseOctetString(content, content + len, maxLength);\n        }\n        switch (this.tag.tagNumber) {\n            case 0x01: // BOOLEAN\n                return (this.stream.get(content) === 0) ? \"false\" : \"true\";\n            case 0x02: // INTEGER\n                return this.stream.parseInteger(content, content + len);\n            case 0x03: // BIT_STRING\n                return this.sub ? \"(\" + this.sub.length + \" elem)\" :\n                    this.stream.parseBitString(content, content + len, maxLength);\n            case 0x04: // OCTET_STRING\n                return this.sub ? \"(\" + this.sub.length + \" elem)\" :\n                    this.stream.parseOctetString(content, content + len, maxLength);\n            // case 0x05: // NULL\n            case 0x06: // OBJECT_IDENTIFIER\n                return this.stream.parseOID(content, content + len, maxLength);\n            // case 0x07: // ObjectDescriptor\n            // case 0x08: // EXTERNAL\n            // case 0x09: // REAL\n            // case 0x0A: // ENUMERATED\n            // case 0x0B: // EMBEDDED_PDV\n            case 0x10: // SEQUENCE\n            case 0x11: // SET\n                if (this.sub !== null) {\n                    return \"(\" + this.sub.length + \" elem)\";\n                }\n                else {\n                    return \"(no elem)\";\n                }\n            case 0x0C: // UTF8String\n                return stringCut(this.stream.parseStringUTF(content, content + len), maxLength);\n            case 0x12: // NumericString\n            case 0x13: // PrintableString\n            case 0x14: // TeletexString\n            case 0x15: // VideotexString\n            case 0x16: // IA5String\n            // case 0x19: // GraphicString\n            case 0x1A: // VisibleString\n                // case 0x1B: // GeneralString\n                // case 0x1C: // UniversalString\n                return stringCut(this.stream.parseStringISO(content, content + len), maxLength);\n            case 0x1E: // BMPString\n                return stringCut(this.stream.parseStringBMP(content, content + len), maxLength);\n            case 0x17: // UTCTime\n            case 0x18: // GeneralizedTime\n                return this.stream.parseTime(content, content + len, (this.tag.tagNumber == 0x17));\n        }\n        return null;\n    };\n    ASN1.prototype.toString = function () {\n        return this.typeName() + \"@\" + this.stream.pos + \"[header:\" + this.header + \",length:\" + this.length + \",sub:\" + ((this.sub === null) ? \"null\" : this.sub.length) + \"]\";\n    };\n    ASN1.prototype.toPrettyString = function (indent) {\n        if (indent === undefined) {\n            indent = \"\";\n        }\n        var s = indent + this.typeName() + \" @\" + this.stream.pos;\n        if (this.length >= 0) {\n            s += \"+\";\n        }\n        s += this.length;\n        if (this.tag.tagConstructed) {\n            s += \" (constructed)\";\n        }\n        else if ((this.tag.isUniversal() && ((this.tag.tagNumber == 0x03) || (this.tag.tagNumber == 0x04))) && (this.sub !== null)) {\n            s += \" (encapsulates)\";\n        }\n        s += \"\\n\";\n        if (this.sub !== null) {\n            indent += \"  \";\n            for (var i = 0, max = this.sub.length; i < max; ++i) {\n                s += this.sub[i].toPrettyString(indent);\n            }\n        }\n        return s;\n    };\n    ASN1.prototype.posStart = function () {\n        return this.stream.pos;\n    };\n    ASN1.prototype.posContent = function () {\n        return this.stream.pos + this.header;\n    };\n    ASN1.prototype.posEnd = function () {\n        return this.stream.pos + this.header + Math.abs(this.length);\n    };\n    ASN1.prototype.toHexString = function () {\n        return this.stream.hexDump(this.posStart(), this.posEnd(), true);\n    };\n    ASN1.decodeLength = function (stream) {\n        var buf = stream.get();\n        var len = buf & 0x7F;\n        if (len == buf) {\n            return len;\n        }\n        // no reason to use Int10, as it would be a huge buffer anyways\n        if (len > 6) {\n            throw new Error(\"Length over 48 bits not supported at position \" + (stream.pos - 1));\n        }\n        if (len === 0) {\n            return null;\n        } // undefined\n        buf = 0;\n        for (var i = 0; i < len; ++i) {\n            buf = (buf * 256) + stream.get();\n        }\n        return buf;\n    };\n    /**\n     * Retrieve the hexadecimal value (as a string) of the current ASN.1 element\n     * @returns {string}\n     * @public\n     */\n    ASN1.prototype.getHexStringValue = function () {\n        var hexString = this.toHexString();\n        var offset = this.header * 2;\n        var length = this.length * 2;\n        return hexString.substr(offset, length);\n    };\n    ASN1.decode = function (str) {\n        var stream;\n        if (!(str instanceof Stream)) {\n            stream = new Stream(str, 0);\n        }\n        else {\n            stream = str;\n        }\n        var streamStart = new Stream(stream);\n        var tag = new ASN1Tag(stream);\n        var len = ASN1.decodeLength(stream);\n        var start = stream.pos;\n        var header = start - streamStart.pos;\n        var sub = null;\n        var getSub = function () {\n            var ret = [];\n            if (len !== null) {\n                // definite length\n                var end = start + len;\n                while (stream.pos < end) {\n                    ret[ret.length] = ASN1.decode(stream);\n                }\n                if (stream.pos != end) {\n                    throw new Error(\"Content size is not correct for container starting at offset \" + start);\n                }\n            }\n            else {\n                // undefined length\n                try {\n                    for (;;) {\n                        var s = ASN1.decode(stream);\n                        if (s.tag.isEOC()) {\n                            break;\n                        }\n                        ret[ret.length] = s;\n                    }\n                    len = start - stream.pos; // undefined lengths are represented as negative values\n                }\n                catch (e) {\n                    throw new Error(\"Exception while decoding undefined length content: \" + e);\n                }\n            }\n            return ret;\n        };\n        if (tag.tagConstructed) {\n            // must have valid content\n            sub = getSub();\n        }\n        else if (tag.isUniversal() && ((tag.tagNumber == 0x03) || (tag.tagNumber == 0x04))) {\n            // sometimes BitString and OctetString are used to encapsulate ASN.1\n            try {\n                if (tag.tagNumber == 0x03) {\n                    if (stream.get() != 0) {\n                        throw new Error(\"BIT STRINGs with unused bits cannot encapsulate.\");\n                    }\n                }\n                sub = getSub();\n                for (var i = 0; i < sub.length; ++i) {\n                    if (sub[i].tag.isEOC()) {\n                        throw new Error(\"EOC is not supposed to be actual content.\");\n                    }\n                }\n            }\n            catch (e) {\n                // but silently ignore when they don't\n                sub = null;\n            }\n        }\n        if (sub === null) {\n            if (len === null) {\n                throw new Error(\"We can't skip over an invalid tag with undefined length at offset \" + start);\n            }\n            stream.pos = start + Math.abs(len);\n        }\n        return new ASN1(streamStart, header, len, tag, sub);\n    };\n    return ASN1;\n}());\nexport { ASN1 };\nvar ASN1Tag = /** @class */ (function () {\n    function ASN1Tag(stream) {\n        var buf = stream.get();\n        this.tagClass = buf >> 6;\n        this.tagConstructed = ((buf & 0x20) !== 0);\n        this.tagNumber = buf & 0x1F;\n        if (this.tagNumber == 0x1F) { // long tag\n            var n = new Int10();\n            do {\n                buf = stream.get();\n                n.mulAdd(128, buf & 0x7F);\n            } while (buf & 0x80);\n            this.tagNumber = n.simplify();\n        }\n    }\n    ASN1Tag.prototype.isUniversal = function () {\n        return this.tagClass === 0x00;\n    };\n    ASN1Tag.prototype.isEOC = function () {\n        return this.tagClass === 0x00 && this.tagNumber === 0x00;\n    };\n    return ASN1Tag;\n}());\nexport { ASN1Tag };\n"],"names":["ellipsis","reTimeS","reTimeL","stringCut","str","len","Stream","enc","pos","b","start","end","raw","s","i","c","hi","lo","shortYear","m","v","neg","pad","n","Int10","maxLength","unusedBit","lenBit","intro","skip","j","bits","ASN1","stream","header","length","tag","sub","ASN1Tag","content","indent","max","buf","hexString","offset","streamStart","getSub","ret","e"],"mappings":"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"}